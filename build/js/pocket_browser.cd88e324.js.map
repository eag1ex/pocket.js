{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/x-utils-es/umd/index.js","webpack:///./libs/Probe/Probe.js","webpack:///./libs/utils.js","webpack:///./libs/Pocket/PocketExit.module.js","webpack:///./libs/Models/SetUpdateModel.js","webpack:///./libs/Models/ProjectPayloadModel.js","webpack:///./libs/versions/Pocket.browser.js","webpack:///./libs/Pocket/Pocket.selectors.js","webpack:///./node_modules/process/browser.js","webpack:///(webpack)/buildin/global.js","webpack:///./libs/Probe/Probe.dataBank.js","webpack:///./libs/Intellisense/index.js","webpack:///./libs/Models/ProbeReadyOutput.js","webpack:///./libs/Pocket/Pocket.architect.js","webpack:///./libs/Models/ArchitectModel.js","webpack:///./libs/Pocket/PocketExtended.js","webpack:///./libs/Models/ProbePayloadModel.js","webpack:///./libs/Pocket/Pocket.module.js","webpack:///./libs/Pocket/Pocket.libs.js","webpack:///./libs/Pocket/Imports.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","factory","_Numberprototype","Number","_Stringprototype","String","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","err","apply","isWindow","process","env","NODE_ENV","window","checkLoggerSetting","logType","xUtilsConfig","logging","toString","global","loggingON","callFN","cb","logConstract","type","length","format","filter","concat","console","log","_len","Array","_key","warn","_len3","_key3","alert","_len4","_key4","onerror","_len6","_key6","allData","isFunction","el","isBigInt","isArray","arr","cbEval","__proto__","typeCheck","standard","ofType","asPrototype","Type","primitiveValue","Boolean","BigInt","Date","Function","keys","Error","isNaN","isError","isBoolean","isNull","isUndefined","isNumber","isQPromise","defer","promise","fulfill","notify","isSQ","entity","isPromise","isObject","obj","uniq","all","indexOf","isClass","isRegExp","expression","RegExp","isInstance","objectSize","isFalsy","isString","str","copy","data","JSON","parse","stringify","disableLogging","resetLogging","loggerSetting","logMode","includes","stack","asArray","stackList","split","splice","stackHead","replace","unshift","errorTrace","errHead","loop","size","index","inx","entries","break","push","isFalse","valueOf","isTrue","isEmpty","head","flat","shift","last","timer","time","setTimeout","clearTimeout","interval","every","endTime","counter","setInterval","clearInterval","sq","SimpleQ","deferrerCallback","_promise","super","res","_resolve","rej","_reject","deferred","validID","id","toLowerCase","stringSize","cancelPromise","_ref","checkEvery","maxWait","cbErr","_ref2","message","exit_interval","deffer","def","shuffle","_Mathfloor","Math","floor","j","random","k","selectiveArray","selectBy","item","nData","findNest","found","sArr","collective","hasPrototype","hasProto","copyBy","refs","reduce","copyDeep","map","_ref3","val","assign","delay","someKeyMatch","source","a","b","z","zz","exactKeyMatch","trueVal","itm","trueValDeep","typeIs","child","_ref4","v","trueProp","_ref5","resolver","timeout","testEvery","_ref6","max","test","anon","catch","flatten","flattenDeep","acc","slice","chunks","_Mathceil","ceil","from","dupes","dups","parseInt","uniqBy","propName","stored","_loop","_ref8","arrayWith","prop","objWith","exFromArray","excludes","_o","_ref9","excludeFrom","debug","_len2","_key2","attention","_len5","_key5","validDate","dt","pickFromArray","picks","allowedPicks","nn","isInstanceByName","pick","selected","pEntries","pass","_ref10","_pass","evalItem","dispatcher","uid","_this","plugin","getTime","cbQueue","dispatchInstance","_isActive","_onComplete_cb","onComplete","initListener","Dispatch","next","isActive","del","subscribe","init","sub","emit","delete","unsubscribe","withHoc","_len7","_key7","extraArgs","hoc","_len8","_key8","argsFN","defItem","isDate","xrequire","path","ref","Mod","constructor","require","_path","_load","code","asJson","truthFul","_ref11","inIndex","patterns","patt","regx","matched","Probe","props","undefined","opts","task","_id","_error","_task","_status","_data","_campaign","_dataIndex","_statusIndex","_statusAsync","status","_sealed","_onChange","onChange","_onchangeDispatch","emitter","withDataBank","completeOnNull","disableWarnings","campaign","_completeAsync","merge","dataBank","watch","availableWatch","statIndex","onchangeDispatch","changedName","changed","probe","_sq","pat","dispatchChange","open","set","updated","complete","send","stat","statusStackOrder","onOpenStatus","setStatusAsync","timestamp","lastPromise","sort","getStatusAsync","errorMessages","messages","msgs","idRegexValid","validProjectID","validProbe","probeID","Pocket","forEach","ProbePayload","tasks","$computeCallBack","PocketSelectors","projectID","assetName","asCallback","selectByTask","projectsCache","payloadData","selfType","lastProbeID","lastProjectID","$get","cbDATA","probeRef","pocket","dataFrom","mergeData","returnAs","isNONE","probeList","_lastFilterList","projectProbeList","matchFound","lastFilter","_probe","list","fromProbeID","storeTransfers","$transfer_lastID","toProbeID","pointToThisProbe","maxDelay","lastValidTransfer","accessLastValidTransfer","dataProp","trim","dataPropSelector","_$cached_data","hasValue","watchProp","_lastProjectID","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","e","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","len","run","marker","runClearTimeout","Item","array","noop","nextTick","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","g","ProbeDataBank","_dataBank","data_id","readyOutput","asPocket","instance","asProbe","ArchitectModel","PocketArchitect","architectConfig","archModel","architectMod","architect","lastProject","getArchitect","config","configProjectID","validConfig","project","asset","setArchitect","cached","$payload","_architectVal","configurable","PocketModuleExt","$project","values","poc","_ready","_projectSetDispatcher","_projectSetAsync","clearStoreTransfers","deletePocketSet","async","asAsync","payload","payloadID","allowsMultiple","_payloadID","_ready_method_set","$projectSetAsync","ready","deleteWithDelay","ProjectPayloadModel","SetUpdateModel","PocketModule","isUpdated","initialProject","lastPocketTimestamp","distributor","setDefer","projectSetDispatcher","_setUpdate","dataFromArr","pos","probeProps","msg","pocketSet","output","pock","userOutput","pl","setProbe","_emit","Imports","PocketLibs","_lastProbeID","_projectSet","_transferCached","cleared","element","fromAverageTimeHasPast","transferCachedCopy","coundCache","currentOffset","taskOrProbeID","updateLastProbeID","dynamicProbeID","newProbeID","selectedData","probeData"],"mappings":"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","file":"js/pocket_browser.cd88e324.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","\r\n// @ts-nocheck\r\n/* tslint:disable */\r\n/* eslint-disable */\r\n/* eslint-disable no-proto */\r\n\r\n/**\r\n * @x-utils\r\n * * Simple javascript, lodash alternative library\r\n * * Developed by Anon\r\n * * License: CC-BY-SA-4.0\r\n * * For projects contact me at: eaglex.net\r\n */\r\n\r\n\r\n(function(global,factory){if(\"function\"===typeof define&&define.amd)define(\"xutils\",[\"module\",\"exports\"],factory);else if(\"undefined\"!==typeof exports)factory(module,exports);else{var mod={exports:{}};factory(mod,mod.exports),global.xutils=mod.exports}})(void 0,function(module,exports){\"use strict\";var _Numberprototype=Number.prototype,_Stringprototype=String.prototype;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}var gen=fn.apply(self,args);_next(void 0)})}}Object.defineProperty(exports,\"__esModule\",{value:!0});var isWindow=()=>{try{if(\"test\"===(process.env||{}).NODE_ENV)return!1;if(window)return!0}catch(err){return!1}},checkLoggerSetting=function checkLoggerSetting(logType){void 0===logType&&(logType=\"\");try{if(isWindow())return window.xUtilsConfig||(window.xUtilsConfig={}),window.xUtilsConfig?\"off\"===window.xUtilsConfig.logging?\"off\":(window.xUtilsConfig[logType]?window.xUtilsConfig[logType]:\"on\").toString():\"on\"}catch(err){}try{return global.xUtilsConfig||(global.xUtilsConfig={}),global.xUtilsConfig?\"off\"===global.xUtilsConfig.logging?\"off\":(global.xUtilsConfig[logType]?global.xUtilsConfig[logType]:\"on\").toString():\"on\"}catch(err){}return\"on\"},loggingON=()=>{try{if(isWindow())return\"on\"===(window.xUtilsConfig||{}).logging||(window.xUtilsConfig||{}).logging===void 0}catch(err){}try{return\"on\"===(global.xUtilsConfig||{}).logging||(global.xUtilsConfig||{}).logging===void 0}catch(err){}return!0},callFN=function callFN(cb){if(void 0===cb&&(cb=void 0),\"function\"!==typeof cb)return!1;try{var d=cb();return!0===d||0<d}catch(err){return!1}},logConstract=function logConstract(type,args){void 0===type&&(type=\"\"),args.length||(args[0]=\"\");var allData=0===args.filter(n=>\"string\"===typeof n||n===void 0).length,format=allData?\"%o\":\"\";\"log\"===type&&(args=[].concat(\"\\x1B[90m[log]\\x1B[0m\\x1B[2m\"+format+\" \",args,\"\\x1B[0m\")),\"debug\"===type&&(args=[].concat(\"\\x1B[90m[debug]\\x1B[0m\\x1B[32m\"+format+\" \",args,\"\\x1B[0m\")),\"warn\"===type&&(args=[].concat(\"\\x1B[90m[warning]\\x1B[0m\\x1B[1m\"+format+\" \",args,\"\\x1B[0m\")),\"alert\"===type&&(args=[].concat(\"\\x1B[90m[alert]\\x1B[0m\\x1B[33m\"+format+\" \",args,\"\\x1B[0m\")),\"attention\"===type&&(args=[].concat(\"\\x1B[90m[attention]\\x1B[0m\\x1B[36m\"+format+\" \",args,\"\\x1B[0m\"));try{return void(window&&console.log.apply(null,args))}catch(err){}console.log.apply(null,args)},log=function log(){if(loggingON()&&\"off\"!==checkLoggerSetting(\"log\")){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return logConstract(\"log\",args)}},warn=function warn(){if(loggingON()&&\"off\"!==checkLoggerSetting(\"warn\")){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return logConstract(\"warn\",args)}},alert=function alert(){if(loggingON()&&\"off\"!==checkLoggerSetting(\"alert\")){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return logConstract(\"alert\",args)}},onerror=function onerror(){for(var _len6=arguments.length,args=Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];if(loggingON()&&\"off\"!==checkLoggerSetting(\"error\")&&\"off\"!==checkLoggerSetting(\"onerror\")){args.length||(args[0]=\"\");var allData=0===args.filter(n=>\"string\"===typeof n||void 0===n).length,format=allData?\"%o\":\"\";try{if(isWindow())return args=[].concat(\"\\x1B[31m[error]\\x1B[0m\\x1B[31m\"+format+\" \",args,\"\\x1B[0m\"),void console.error.apply(null,args)}catch(err){}args=[].concat(\"\\x1B[41m[error]\\x1B[0m\\x1B[31m\"+format+\" \",args,\"\\x1B[0m\"),console.error.apply(null,args)}},error=onerror,isFunction=function isFunction(el){return void 0===el&&(el=void 0),\"function\"===typeof el},isBigInt=n=>\"bigint\"===typeof n,isArray=function isArray(arr,cbEval){return void 0===arr&&(arr=void 0),void 0===cbEval&&(cbEval=void 0),(!isFunction(cbEval)||callFN(cbEval))&&!isBigInt(arr)&&!!arr&&Array.prototype===arr.__proto__},typeCheck=function typeCheck(el,standard){void 0===standard&&(standard=!0);var ofType=type=>standard?typeof el:type||typeof el,asPrototype=Type=>Type.prototype===el.prototype;try{return\"symbol\"===typeof el?{type:ofType(),value:0,primitiveValue:Symbol(\"\")}:void 0===el?{type:ofType(),value:0,primitiveValue:void 0}:\"boolean\"===typeof el?{type:ofType(),value:+el,primitiveValue:Boolean()}:\"bigint\"===typeof el&&\"object\"===typeof Object(el)?{type:ofType(),value:1,primitiveValue:BigInt(\"\")}:null===el?{type:ofType(\"null\"),value:0,primitiveValue:{}}:el.__proto__===Date.prototype||asPrototype(Date)?{type:ofType(\"date\"),value:1,primitiveValue:new Date}:_Stringprototype===el.__proto__?{type:ofType(),value:el.length,primitiveValue:String()}:Array.prototype===el.__proto__||asPrototype(Array)?{type:ofType(\"array\"),value:(el||[]).length,primitiveValue:[]}:Promise.prototype===(el||\"\").__proto__||asPrototype(Promise)?{type:ofType(\"promise\"),value:1,primitiveValue:Function}:Function.prototype===el.__proto__||asPrototype(Function)?{type:ofType(),value:1,primitiveValue:Function}:Object.prototype===el.__proto__||asPrototype(Object)?{type:ofType(),value:Object.keys(el).length,primitiveValue:{}}:Error.prototype===el.__proto__||asPrototype(Error)?{type:ofType(\"error\"),value:Object.keys(el).length,primitiveValue:Error()}:el.__proto__===_Numberprototype||asPrototype(Number)?isNaN(el)?{type:ofType(\"NaN\"),value:0,primitiveValue:Number()}:{type:ofType(),value:el,primitiveValue:Number()}:!1===0<=+el?{type:typeof el,value:+el,primitiveValue:void 0}:{type:typeof el,value:0,primitiveValue:void 0}}catch(err){return error(err),{}}},isError=el=>Error.prototype===(el||\"\").__proto__,isBoolean=el=>{if(el===void 0)return!1;if(null===el)return!1;if(!0===el||!1===el)return!0;try{if(el instanceof Boolean)return!0}catch(err){}return!1},isNull=el=>null===el,isUndefined=el=>\"undefined\"===typeof el,isNumber=n=>{if(isBigInt(n))return!1;try{if(n instanceof Number)return!0}catch(err){}return!(n===void 0||null===n||\"\"===n)&&n.__proto__===_Numberprototype},isQPromise=function isQPromise(defer){void 0===defer&&(defer=void 0);try{if(!0===(defer.promise!==void 0&&\"function\"===typeof defer.resolve&&\"function\"===typeof defer.reject&&\"function\"===typeof defer.fulfill&&\"function\"===typeof defer.notify))return!0}catch(err){}return!1},isSQ=defer=>{try{return\"SimpleQ\"===defer.entity}catch(err){return!1}},isPromise=defer=>{if(isQPromise(defer))return!0;try{if(defer instanceof Promise)return!0}catch(err){}return!1},isObject=function isObject(obj,cbEval){if(void 0===obj&&(obj=void 0),void 0===cbEval&&(cbEval=void 0),isFunction(cbEval)&&!callFN(cbEval))return!1;if(isBigInt(obj))return!1;if(isNaN(obj)&&\"number\"===typeof obj)return!1;if(\"function\"===typeof obj)return!1;if(!isNaN(+obj)||void 0===obj)return!1;if(obj.__proto__===[].__proto__)return!1;var a=Object.prototype===obj.__proto__||Error.prototype===obj.__proto__,ab=a&&obj instanceof Object;if(ab)return!0;if(void 0!==obj.__proto__)try{return obj instanceof Object}catch(err){return!1}return!!obj.prototype},uniq=function uniq(arr){void 0===arr&&(arr=[]);var o=[];return o=arr.filter((el,i,all)=>all.indexOf(el)===i),o instanceof Array?o:[]},isClass=function isClass(obj,cbEval){return void 0===obj&&(obj={}),void 0===cbEval&&(cbEval=void 0),(!isFunction(cbEval)||callFN(cbEval))&&!!obj&&void 0!==obj.prototype},isRegExp=function isRegExp(expression){void 0===expression&&(expression=/\\\\/);try{return expression instanceof RegExp}catch(err){return!1}},isInstance=function isInstance(obj,cbEval){if(void 0===obj&&(obj={}),void 0===cbEval&&(cbEval=void 0),isFunction(cbEval)&&!callFN(cbEval))return!1;if(!obj)return!1;if(isArray(obj))return!1;if(obj.__proto__&&!isClass(obj))try{return obj.__proto__ instanceof Object}catch(err){return!1}return!1},objectSize=function objectSize(obj){return void 0===obj&&(obj={}),obj&&isNaN(+obj)?isInstance(obj)?Object.keys(obj).length:Object.prototype===obj.__proto__||Error.prototype===obj.__proto__?Object.keys(obj).length:0:0},isFalsy=function isFalsy(el){return void 0===el&&(el=void 0),void 0===el||null===el||!1===el&&\"boolean\"===typeof el||(!0!==el||\"boolean\"!==typeof el)&&!(\"number\"===typeof el&&0<el)&&(_Stringprototype===el.__proto__?1>el.length:Array.prototype===el.__proto__?0===(el||[]).length:Promise.prototype!==(el||{}).__proto__&&\"function\"!==typeof el&&(Object.prototype===el.__proto__||isInstance(el)?0===Object.keys(el).length:Error.prototype!==el.__proto__&&(void 0!==el&&el.__proto__===_Numberprototype?!!isNaN(el)||0>=el:!1===0<+el||!el&&!1)))},isString=function isString(str,cbEval){return void 0===str&&(str=void 0),void 0===cbEval&&(cbEval=void 0),(!isFunction(cbEval)||callFN(cbEval))&&void 0!==str&&null!==str&&\"boolean\"!==typeof str&&(\"\"===str||_Stringprototype===str.__proto__)},copy=data=>{try{return JSON.parse(JSON.stringify(data))}catch(err){return typeCheck(data).primitiveValue}};exports.disableLogging=()=>{try{if(isWindow())return window.xUtilsConfig?window.xUtilsConfig.logging=\"off\":window.xUtilsConfig={logging:\"off\"},!0}catch(err){}try{return global.xUtilsConfig?global.xUtilsConfig.logging=\"off\":global.xUtilsConfig={logging:\"off\"},!0}catch(err){return!1}},exports.resetLogging=()=>{try{if(isWindow())return window.xUtilsConfig?window.xUtilsConfig.logging=\"on\":window.xUtilsConfig={logging:\"on\"},!0}catch(err){}try{return global.xUtilsConfig?global.xUtilsConfig.logging=\"on\":global.xUtilsConfig={logging:\"on\"},!0}catch(err){return!1}},exports.loggerSetting=function loggerSetting(logType,logMode){void 0===logType&&(logType=\"log\"),void 0===logMode&&(logMode=\"off\");if(![\"log\",\"warn\",\"onerror\",\"error\",\"alert\",\"attention\",\"debug\",\"stack\",\"errorTrace\"].includes(logType)||!logType)return!1;if(![\"on\",\"off\"].includes(logMode)||!logMode)return!1;\"onerror\"===logType&&(logType=\"error\");try{if(isWindow())return window.xUtilsConfig?window.xUtilsConfig[logType]=logMode:window.xUtilsConfig={[logType]:logMode},!0}catch(err){}try{return global.xUtilsConfig?global.xUtilsConfig[logType]=logMode:global.xUtilsConfig={[logType]:logMode},!0}catch(err){return!1}},exports.checkLoggerSetting=checkLoggerSetting,exports.stack=function stack(data,asArray){if((void 0===asArray&&(asArray=!1),!!loggingON())&&\"off\"!==checkLoggerSetting(\"stack\")){var stackList=new Error(JSON.stringify(data)).stack.split(\"(\");stackList.splice(1,1);var stackHead=stackList[0].split(/\\n/)[0].replace(\"Error\",\"[STACK TRACE]\");return stackList.splice(0,1),stackList.unshift(stackHead),void(asArray?console.log(stackList):console.log.apply(null,stackList))}},exports.errorTrace=function errorTrace(data,asArray){if((void 0===asArray&&(asArray=!1),!!loggingON())&&\"off\"!==checkLoggerSetting(\"errorTrace\")){var stackList=new Error(JSON.stringify(data)).stack.split(\"(\");stackList.splice(1,1);var errHead=stackList[0].split(/\\n/)[0].replace(\"Error\",\"[ERROR]\");return stackList.splice(0,1),stackList.unshift(errHead),void(asArray?console.error(stackList):console.error.apply(null,stackList))}},exports.loop=function loop(size,cb){void 0===size&&(size=0),void 0===cb&&(cb=function cb(index){void 0===index&&(index=0)});var isFN=\"function\"===typeof cb,isNum=\"number\"===typeof size;if(!isFN||!isNum)return[];for(var r,d=[],inx=0;inx<Array(size).length;inx++){r=cb.apply(this,[inx]);try{if(r&&Object.entries(r).length&&r.break)break}catch(err){}d.push(r)}return d},exports.isFalse=el=>{if(null===el)return!0;if(\"undefined\"===typeof el)return!0;if(\"number\"===typeof el&&1>el)return!0;if(\"boolean\"===typeof el&&!1===el)return!0;try{if(el instanceof Boolean)return!1===el.valueOf()}catch(err){}return!1},exports.isTrue=el=>{if(null===el)return!1;if(\"undefined\"===typeof el)return!1;if(\"number\"===typeof el&&0<el)return!0;if(\"boolean\"===typeof el&&!0===el)return!0;try{if(el instanceof Boolean)return!0===el.valueOf()}catch(err){}return!1},exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isUndefined=isUndefined,exports.isEmpty=value=>!isError(value)&&!typeCheck(value).value,exports.head=function head(arr){return void 0===arr&&(arr=[]),Array.prototype===(arr||null).__proto__?arr.flat().shift():void 0},exports.last=function last(arr){return void 0===arr&&(arr=[]),arr&&Array.prototype===arr.__proto__?arr[arr.length-1]:void 0},exports.timer=function timer(cb,time){void 0===cb&&(cb=()=>{}),void 0===time&&(time=0);var isFN=\"function\"===typeof cb;if(isFN){time=\"number\"===typeof time&&0<=time?time:0;var s=setTimeout(()=>{cb(),clearTimeout(s)},time)}},exports.interval=function interval(cb,every,endTime){void 0===cb&&(cb=()=>{}),void 0===every&&(every=0),void 0===endTime&&(endTime=0);var isFN=\"function\"===typeof cb;if(!isFN)return null;every=\"number\"===typeof every&&0<=every?every:0,endTime=\"number\"===typeof endTime&&0<=endTime?endTime:0;var counter=0,c=setInterval(()=>(cb(),endTime<=counter?clearInterval(c):void(counter+=every)),every)},exports.sq=()=>{class SimpleQ extends Promise{constructor(deferrerCallback){void 0===deferrerCallback&&(deferrerCallback=function deferrerCallback(resolve,reject){void 0===resolve&&(resolve=()=>{}),void 0===reject&&(reject=()=>{})}),SimpleQ._promise=super(deferrerCallback)}resolve(data){var res=SimpleQ._resolve;return res instanceof Function?res(data):onerror(\"[SimpleQ][resolve]\",\"not callable\"),this}reject(data){var rej=SimpleQ._reject;return rej instanceof Function?rej(data):onerror(\"[SimpleQ][reject]\",\"not callable\"),this}get promise(){var promise=SimpleQ._promise;return promise instanceof Promise?promise:void 0}}var deferred=new SimpleQ((resolve,reject)=>{SimpleQ._resolve=resolve,SimpleQ._reject=reject});if(deferred.__proto__.entity=\"SimpleQ\",deferred instanceof Promise&&deferred instanceof SimpleQ)return deferred;throw\"sq() not a valid Promise ?\"},exports.validID=function validID(id){return void 0===id&&(id=\"\"),id||\"\"?(id||\"\").toString().toLowerCase().replace(/\\s/g,\"\"):\"\"},exports.isBigInt=isBigInt,exports.isNumber=isNumber,exports.stringSize=function stringSize(str){return void 0===str&&(str=\"\"),void 0!==str&&null!==str?str.__proto__===_Stringprototype?str.length:0:0},exports.cancelPromise=_ref=>{var{defer={},checkEvery=500,maxWait=9500,cbErr=_ref2=>{var{error,defer,id}=_ref2},message=\"taken too long to respond\",logging=!1,id=void 0}=_ref,validPromise=isPromise(defer)||isQPromise(defer);if(!validPromise||!(el=>\"function\"===typeof el)(cbErr)||!maxWait)return onerror(\"[cancelPromise]\",\"{defer,maxWait,cbErr} must be provided\"),Promise.reject(\"{defer,maxWait,cbErr} must be provided\");var exit_interval,every=checkEvery||500;maxWait=maxWait||1;var inx=0,t=setInterval(()=>{if(exit_interval)return clearInterval(t);if(inx>maxWait){var args={error:message+\", time: \"+inx,defer,id};try{cbErr.apply(args,[args]),defer.reject(message+\", time: \"+inx)}catch(err){onerror(\"[cancelPromise]\",err)}return clearInterval(t)}logging&&(id?log(\"-- processing: \",id):alert(\"-- processing \"));inx=every+inx},every),deffer=def=>def.then(n=>(exit_interval=!0,n),err=>(exit_interval=!0,Promise.reject(err)));return isSQ(defer)||isPromise(defer)&&!isQPromise(defer)?deffer(defer):isQPromise(defer)?deffer(defer.promise):Promise.reject(\"[cancelPromise], Supplied {defer} is not a promise\")},exports.shuffle=function shuffle(arr){var _Mathfloor=Math.floor;if(void 0===arr&&(arr=[]),!isArray(arr))return[];for(var i=arr.length-1;0<i;i--){var j=_Mathfloor(Math.random()*i),k=arr[i];arr[i]=arr[j],arr[j]=k}return arr},exports.selectiveArray=function selectiveArray(selectBy,data){if(void 0===selectBy&&(selectBy=[]),void 0===data&&(data=[]),!isArray(data))return[];if(!data.length)return[];if(!isArray(selectBy))return data;if(!selectBy.length)return data;selectBy=uniq(selectBy);for(var item,nData=[],findNest=function findNest(s,item,inx){void 0===inx&&(inx=0);var found,lastItem=null;if(s&&isArray(s)&&s.length){try{if(void 0!==item[s[inx]])return lastItem=item[s[inx]],found=lastItem,++inx,s[inx]?findNest(s,found,inx):found}catch(err){console.log(err.toString())}return found}},i=0;i<data.length;i++){if(item=data[i],!isObject(item)){nData.push([item]);continue}for(var sArr,found=void 0,collective=[],o=0;o<selectBy.length;o++){sArr=(selectBy[o]||\"\").split(\".\");try{found=findNest(sArr,item,0),collective.push(found)}catch(err){}}if(selectBy.length===collective.length){var allUndef=collective.filter(n=>void 0===n);allUndef.length===selectBy.length&&(collective=collective.filter(n=>!!n))}collective.length?nData.push([].concat(collective)):void 0!==found&&nData.push(found)}return nData},exports.hasPrototype=isClass,exports.hasProto=function hasProto(el,cbEval){if(void 0===cbEval&&(cbEval=void 0),isFunction(cbEval)&&!callFN(cbEval))return!1;try{return void 0!==el.__proto__}catch(err){return!1}},exports.objectSize=objectSize,exports.isString=isString,exports.isFunction=isFunction,exports.copyBy=function copyBy(obj,refs){if(void 0===obj&&(obj={}),void 0===refs&&(refs=[]),!isObject(obj))return{};var d=[].concat(refs).reduce((n,el)=>(void 0!==obj[el]&&(n[el]=obj[el]),n),{});try{return JSON.parse(JSON.stringify(d))}catch(err){return{}}},exports.copyDeep=data=>{if(isArray(data))return data.map(n=>copy(n));if(isObject(data))return Object.entries(data).reduce((n,_ref3)=>{var[k,val]=_ref3;return n[k]=isObject(val)?Object.assign({},copy(val)):val,n},{});try{return JSON.parse(JSON.stringify(data))}catch(err){return typeCheck(data).primitiveValue}},exports.delay=function delay(time){void 0===time&&(time=100);var isNum=\"number\"===typeof time&&0<=time;return isNum?new Promise(resolve=>{var t=setTimeout(()=>{clearTimeout(t),resolve(!0)},time)}):Promise.resolve(!0)},exports.someKeyMatch=function someKeyMatch(object,source,cbEval){if(void 0===object&&(object={}),void 0===source&&(source={}),void 0===cbEval&&(cbEval=void 0),isFunction(cbEval)&&!callFN(cbEval))return!1;if(!object||Object.prototype!==object.__proto__)return!1;if(!source||Object.prototype!==source.__proto__)return!1;var a=Object.keys(object),b=Object.keys(source);return a.length>=b.length?0<a.filter(z=>b.filter(zz=>zz===z).length).length:0<b.filter(z=>a.filter(zz=>zz===z).length).length},exports.exactKeyMatch=function exactKeyMatch(object,source,cbEval){if(void 0===object&&(object={}),void 0===source&&(source={}),void 0===cbEval&&(cbEval=void 0),isFunction(cbEval)&&!callFN(cbEval))return!1;if(!object||Object.prototype!==object.__proto__)return!1;if(!source||Object.prototype!==source.__proto__)return!1;var a=Object.keys(object),b=Object.keys(source);return a.length>=b.length?a.filter(z=>b.filter(zz=>zz===z).length).length===a.length:b.filter(z=>a.filter(zz=>zz===z).length).length===b.length},exports.trueVal=function trueVal(arr){return void 0===arr&&(arr=[]),arr&&Array.prototype===arr.__proto__?[].concat(arr).filter(itm=>!0!==isFalsy(itm)):[]},exports.trueValDeep=function trueValDeep(arr){return void 0===arr&&(arr=[]),arr&&Array.prototype===arr.__proto__?arr.length?[].concat(arr).map(itm=>{var typeIs=typeCheck(itm,!1);return\"array\"===typeIs.type&&0<typeIs.value?itm.map(child=>0<typeCheck(child,!1).value?child:null).filter(n=>!!n):\"object\"===typeIs.type&&typeIs.value?Object.entries(itm).reduce((n,_ref4)=>{var[k,v]=_ref4;return 0<typeCheck(k,!1).value&&(n[k]=v),n},{}):0<typeIs.value?itm:null}).filter(n=>!!n):[]:[]},exports.trueProp=function trueProp(obj){return void 0===obj&&(obj={}),obj&&Object.prototype===obj.__proto__?Object.entries(obj).reduce((n,_ref5)=>{var[key,val]=_ref5;return isFalsy(val)||(n[key]=val),n},{}):{}},exports.resolver=function resolver(fn,timeout,testEvery){void 0===fn&&(fn=()=>{}),void 0===timeout&&(timeout=5e3),void 0===testEvery&&(testEvery=50);var isFunction=\"function\"===typeof fn;return isFunction?new Promise(resolve=>{var every=testEvery||50,max=timeout,inx=0,test=function(){var _ref6=_asyncToGenerator(function*(){try{return yield fn()}catch(error){return isError(error)?{error}:isObject(error)?error.error?error:{error:error}:{error}}});return function test(){return _ref6.apply(this,arguments)}}(),t=setInterval(_asyncToGenerator(function*(){var anon=test();if(anon.catch(err=>err),inx>=max)return(anon||{}).resolve&&anon.resolve(void 0),resolve(void 0),clearInterval(t);inx+=every;try{inx+=every;var d=yield anon;if(d)return resolve(d),clearInterval(t)}catch(error){return isError(error)&&resolve(error),isObject(error)?error.error?resolve(error):resolve({error}):resolve({error}),clearInterval(t)}}),every)}):Promise.reject(\"fn() must be callable\")},exports.flatten=function flatten(arr){return void 0===arr&&(arr=[]),isArray(arr)?[].concat(...arr):[]},exports.flattenDeep=function flattenDeep(arr){function test(arr,d){return void 0===d&&(d=1),0<d?arr.reduce((acc,val)=>acc.concat(Array.isArray(val)?test(val,d-1):val),[]):arr.slice()}void 0===arr&&(arr=[]);var o=[];if(!isArray(arr))return o;try{return o=test(arr,1/0)||[],o instanceof Array?o:[]}catch(err){return[]}},exports.chunks=function chunks(arr,size){var _Mathceil=Math.ceil;return void 0===arr&&(arr=[]),void 0===size&&(size=0),Array.from({length:_Mathceil(arr.length/size)},(v,i)=>arr.slice(i*size,i*size+size))},exports.dupes=function dupes(item,index){void 0===index&&(index=0);for(var dups=[],n=parseInt(index);0<n;)n--,dups.push(item);return dups},exports.uniqBy=function uniqBy(arr,propName){void 0===arr&&(arr=[]),void 0===propName&&(propName=\"\");var stored={},n=[];if(!propName)return[];if(!(arr||[]).length)return[];for(var _ret,_loop=function _loop(inx){var item=arr[inx];if(isUndefined(item)||isNull(item))return n.push(item),\"continue\";if(!isObject(item))return n.push(item),\"continue\";if(!item[propName])return n.push(item),\"continue\";var exists=Object.entries(stored).filter(_ref8=>{var[k]=_ref8;return item[propName]===stored[k]}).length;return exists?\"continue\":void(item[propName]!==stored[propName+(\":\"+inx)]&&(stored[propName+(\":\"+inx)]=item[propName],n.push(item)))},inx=0;inx<arr.length;inx++)_ret=_loop(inx),\"continue\"===_ret;return n},exports.arrayWith=function arrayWith(arr,prop){if(void 0===arr&&(arr=[]),void 0===prop&&(prop=\"\"),!isArray(arr))return[];var objWith=o=>isObject(o)?-1===Object.keys(o).indexOf(prop)?void 0:o:void 0;try{var o=arr.map(n=>objWith(n)).filter(n=>!!n);return o instanceof Array?o:[]}catch(err){return[]}},exports.exFromArray=function exFromArray(arr,excludes){void 0===arr&&(arr=[]),void 0===excludes&&(excludes=[]);try{if(!(arr instanceof Array))return[]}catch(err){return[]}if(excludes=[].concat(excludes),!excludes.length)return arr;var excludeFrom=function excludeFrom(obj,excludes){if(void 0===obj&&(obj={}),void 0===excludes&&(excludes=[]),!isObject(obj))return obj;var d=Object.entries(obj).reduce((n,_ref9)=>{var[k,val]=_ref9;return-1===excludes.indexOf(k)&&(n[k]=val),n},{});return isFalsy(d)?void 0:d};try{var _o=arr.map(n=>excludeFrom(n,excludes));return _o instanceof Array?_o:[]}catch(err){return[]}},exports.copy=copy,exports.uniq=uniq,exports.isPromise=isPromise,exports.isQPromise=isQPromise,exports.debug=function debug(){if(loggingON()&&\"off\"!==checkLoggerSetting(\"debug\")){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return logConstract(\"debug\",args)}},exports.log=log,exports.warn=warn,exports.onerror=onerror,exports.error=error,exports.alert=alert,exports.attention=function attention(){if(loggingON()&&\"off\"!==checkLoggerSetting(\"attention\")){for(var _len5=arguments.length,args=Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return logConstract(\"attention\",args)}},exports.isObject=isObject,exports.isFalsy=isFalsy,exports.isError=isError,exports.typeCheck=typeCheck,exports.validDate=function validDate(dt,cbEval){if(void 0===cbEval&&(cbEval=void 0),isFunction(cbEval)&&!callFN(cbEval))return!1;try{return dt.__proto__===Date.prototype&&\"Invalid Date\"!==dt.toString()}catch(err){return!1}},exports.isInstance=isInstance,exports.isClass=isClass,exports.isArray=isArray,exports.pickFromArray=function pickFromArray(arr,picks){void 0===arr&&(arr=[]),void 0===picks&&(picks=[]);var o=[];try{if(!(arr instanceof Array))return o}catch(err){return[]}if(isArray(picks)||(picks=[].concat(picks)),!picks.length)return arr;var allowedPicks=[void 0,null,!1];if(picks=picks.filter(n=>!isFalsy(n)||allowedPicks.filter(nn=>nn===n||(isNumber(n)&&!isNaN(n)).length)),!picks.length)return arr;var isInstanceByName=(item,pick)=>{if(isArray(item)&&isFunction(pick)){if(\"object\"===pick.name.toLowerCase())return!1;if(\"array\"===pick.name.toLowerCase())return!0}if(isObject(item)&&isFunction(pick)){if(\"array\"===pick.name.toLowerCase())return!1;if(\"object\"===pick.name.toLowerCase())return!0}try{return(pick.name||\"\").toLowerCase()===typeof item}catch(err){}},evalItem=item=>{for(var selected,pick,inx=0;inx<picks.length;inx++){if(pick=picks[inx],isObject(pick)&&isObject(item)){var pEntries=Object.entries(pick),pass=pEntries.filter(_ref10=>{var[k,val]=_ref10,ok=item[k]===val;return!!ok||(void 0===item[k]?void 0:isInstanceByName(item[k],val))});if(pass=pass.length===pEntries.length&&Object.entries(item).length>=pass.length,pass&&objectSize(item)>=objectSize(pick)){selected=!0;break}}if(isArray(pick)&&isArray(item)){var _pass=pick.filter(n=>item.filter(nn=>nn===n||isInstanceByName(nn,n)).length);if(_pass=_pass.length===pick.length&&item.length>=_pass.length,_pass){selected=!0;break}}else if(pick===item){selected=!0;break}else if(isNumber(item)||isBoolean(item)||isString(item)||isArray(item)||isObject(item)||isFunction(item)){if(isInstanceByName(item,pick)){selected=!0;break}}else if(isInstanceByName(item,pick)){selected=!0;break}}return selected};try{return o=arr.reduce((n,el)=>(evalItem(el)&&n.push(el),n),[]),o instanceof Array?o:[]}catch(err){return[]}},exports.dispatcher=function dispatcher(uid,debug){function Dispatcher(uid,debug){var _this=this,plugin=\"[dispatcher]\";this.uid=((uid||\"\").toString()||new Date().getTime()).toString(),this.debug=debug,this.cbQueue={},this.dispatchInstance={},this._isActive=null,this._onComplete_cb=null,this.index=0,this.data=null,this.onComplete=cb=>(this._onComplete_cb=cb,this),this.initListener=()=>(this.Dispatch(),this._isActive=!0,this),this.next=function(data){return void 0===data&&(data=null),!1!==_this._isActive&&_this.initListener(),_this.dispatchInstance[_this.uid]?_this.dispatchInstance[_this.uid].next(data):_this.debug&&log({message:plugin+\" for uid not available\",uid:_this.uid}),_this},this.Dispatch=()=>{if(this.dispatchInstance[this.uid])return this;var self=this;return this.dispatchInstance[this.uid]||(this.dispatchInstance[this.uid]=new function D(){this.uid=self.uid,this.data=null,this.next=data=>(\"cb\"!==(data||{}).type&&(this.data=data),\"cb\"===(data||{}).type?void(\"function\"===typeof data.cb&&(!self.cbQueue[self.uid]&&(self.cbQueue[self.uid]=data.cb),this.data&&(self.index++,self.data=this.data,data.cb.call(self,this.data,self.uid,self.index)))):void(this.data?\"function\"===typeof self.cbQueue[self.uid]&&(self.index++,self.data=this.data,self.cbQueue[self.uid].call(self,this.data,self.uid,self.index)):self.debug&&warn(plugin+\" no callback data\")))}),this},this.isActive=()=>this._isActive,this.del=()=>(delete this.cbQueue[this.uid],delete this.dispatchInstance[this.uid],this._isActive=!1,\"function\"===typeof this._onComplete_cb&&this._onComplete_cb(this.uid),this),this.subscribe=cb=>{return\"function\"===typeof cb?(this.dispatchInstance[this.uid]||this.Dispatch(),this.dispatchInstance[this.uid]&&this.dispatchInstance[this.uid].next({type:\"cb\",cb}),this):(this.debug&&warn(plugin+\"[subscribe] cb must be set\"),this)},this.init=this.initListener,this.sub=this.subscribe,this.emit=this.next,this.delete=this.del,this.unsubscribe=this.del}return void 0===uid&&(uid=void 0),void 0===debug&&(debug=!1),new Dispatcher(uid,debug)},exports.isSQ=isSQ,exports.withHoc=function withHoc(item){void 0===item&&(item=()=>{});for(var _len7=arguments.length,args=Array(1<_len7?_len7-1:0),_key7=1;_key7<_len7;_key7++)args[_key7-1]=arguments[_key7];var extraArgs=args,hoc=function hoc(){for(var _len8=arguments.length,args=Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];var argsFN=()=>{var _args;return _args=extraArgs?[].concat(args,extraArgs):args,_args};if(item instanceof Function)try{return item(...argsFN())}catch(err){onerror(\"[HOC]\",err)}else{if(isPromise(item)){return(()=>{var asPromise=()=>item.promise?item.promise:item;return asPromise().then(defItem=>isFunction(defItem)?defItem(...argsFN()):Promise.reject(\"DEFERRED_NOT_CALLABLE\"),err=>isFunction(err)?Promise.reject(err(...argsFN())):Promise.reject(\"DEFERRED_NOT_CALLABLE\"))})()}onerror(\"[HOC]\",\"item() must be callable function\")}};return hoc},exports.isDate=d=>{try{return d instanceof Date}catch(err){return!1}},exports.xrequire=function xrequire(path,ref){if(void 0===path&&(path=\"\"),void 0===ref&&(ref=\"\"),!isWindow()){var Mod=function Mod(){};return Mod.prototype=Object.create(module.constructor.prototype),Mod.prototype.constructor=module.constructor,Mod.prototype.require=function(_path,ref){var self=this;try{return self.constructor._load(_path,self)}catch(err){if(\"ERR_NO_THROW\"===ref)return;if(\"MODULE_NOT_FOUND\"===err.code)throw err}},Mod.prototype instanceof module.constructor?Mod.prototype.require(path,ref):void 0}},exports.asJson=data=>{try{return JSON.stringify(data,null,2)}catch(err){return\"[asJson], \"+err.toString()}},exports.truthFul=function truthFul(obj){return void 0===obj&&(obj={}),isObject(obj)?Object.entries(obj).reduce((n,_ref11)=>{var[k,v]=_ref11;return void 0!==v&&(n[k]=v),n},{}):{}},exports.inIndex=function inIndex(str,patterns){void 0===str&&(str=\"\"),void 0===patterns&&(patterns=[]);var o=0;if(!isArray(patterns))return o;if(!patterns.length)return o;if(\"string\"!==typeof str)return o;if(!str)return o;var regx=(patt,s,inx)=>{try{return new RegExp(patt).test(s)}catch(err){return onerror(\"[inIndex]\",\"wrong pattern/expression at index:\"+inx),!1}};return o=patterns.filter((n,inx)=>regx(n,str,inx)).length,o},exports.isRegExp=isRegExp,exports.matched=function matched(str,expression){void 0===str&&(str=\"\"),void 0===expression&&(expression=/\\\\/);var o=!1;if(!isString(str))return o;if(!isRegExp(expression))return o;if(\"string\"!==typeof str)return o;if(!str)return o;return o=((patt,s)=>{try{return new RegExp(patt).test(s)}catch(err){return onerror(\"[matched]\",err.toString()),!1}})(expression,str),o}});\r\n","/**\r\n * Set new probe model\r\n * - every new task has a set of requirements controlled by `statusStackOrder` in status setter. Once status is `complete` and data available, information is send and probe is blocked.\r\n * methods:`{get,all}` props: `{id,data,tasks,status}`\r\n */\r\n\r\n// const messageCODE = require('./errors') // DISPLAY MESSAGES WITH CODE\r\nconst { isString, sq, isArray, warn, log, isNumber, onerror, last, copy, isObject, isFunction, dispatcher } = require('x-utils-es/umd')\r\nconst ProbeDataBank = require('./Probe.dataBank')\r\nclass Probe extends ProbeDataBank {\r\n\r\n    /**\r\n         * @param {object} props probe options `{id,task,campaign,data,status,emitter,completeOnNull}`   \r\n         * @param {string} props.id required, case sensitive, all will be toLowerCase() \r\n         * @param {string} props.task once set cannot be changed\r\n         * @param {string} props.campaign optional, once set cannot be changed\r\n         * @param {any} props.data optional any value except undefind, cannot be change once status set to `complete` or send\r\n         * @param {string} props.ref (optional) any type of string reference\r\n         * @param {string} props.status required to control Probe actions\r\n         * @param {({ prob: Probe, status })=>{}} props.emitter optional, dispatcher/emmiter available if not null\r\n         * @param {boolean} props.completeOnNull override complete setting even if data was never set\r\n         * @param {boolean} debug \r\n         */\r\n    constructor(props = undefined, opts = {}, debug) {\r\n        super(props, opts, debug)\r\n\r\n        this.debug = debug || false\r\n        if (isNumber(props.id) || props.id) props.id = props.id.toString()\r\n        if (!props.task || !isString(props.task)) throw ('task as string is required')\r\n        this._id = null\r\n        this._error = [] // REVIEW should be add options for props.error ?\r\n        this._ref = null\r\n        this._task = null\r\n        this._status = null\r\n        this._data = null\r\n        this._campaign = null\r\n        this._dataIndex = 0\r\n        this._statusIndex = 0\r\n        this._statusAsync = [/** {timestamp:promise} */] // dynamic promise changer\r\n        this.task = props.task\r\n        this.id = props.id\r\n        this.status = 'open'\r\n        this._sealed = false // once the pocket is send of complete we set to true\r\n            \r\n        this._onChange = opts.onChange || null\r\n        this._onchangeDispatch = undefined // loads dispatcher when `opts.onChange=true` is set\r\n        this.emitter = opts.emitter || null\r\n        // this will allow storing old data in to an array when curent data gets updated via setter\r\n        this.withDataBank = opts.withDataBank || false\r\n        this.completeOnNull = opts.completeOnNull || null // when true allows completion on data still at initial null state\r\n        this.disableWarnings = (opts || {}).disableWarnings // disable some less relevant warning messages\r\n\r\n        // assign initial data if differs from default\r\n        if (props.ref !== this._ref) this.ref = props.ref\r\n        if (props.data !== this._data) this.data = props.data\r\n        if (props.campaign) this.campaign = props.campaign\r\n\r\n        this._completeAsync = sq()\r\n    }\r\n\r\n    /**\r\n     * nice and easy, save some coding, and added security\r\n     */\r\n    get sq() {\r\n        if (this._sq) return this._sq\r\n        this._sq = sq()\r\n        return this._sq\r\n    }\r\n\r\n    set id(v) {\r\n        if (this._id) {\r\n            if (this.debug) warn('[pocket]', `cannot update already set id: ${this._id}`)\r\n            return\r\n        }\r\n        if (!v) throw ('id is required')\r\n        if (v.split(' ').length > 1) throw ('each id cannot have spaces')\r\n        if (v.indexOf(`::`) === -1) throw ('each id must be of format id::taskName')\r\n        if (v.indexOf(`:::`) !== -1) throw ('each id must be of format id::taskName')\r\n\r\n        // validate chars\r\n        const pat = /[`~!@#$%^&*()\\=?;'\",.<>\\{\\}\\[\\]\\\\\\/]/gi\r\n        const regx = new RegExp(pat, 'gi')\r\n        if (regx.test(v)) throw (`your id is invalid, allowed chars: ${pat}`)\r\n\r\n        v = v.replace(/ /gi, '_').toLowerCase()\r\n\r\n        if (v.indexOf(this._task) === -1) {\r\n            throw (`wrong id setup, your id should make up the taks name, example: id='cocacola::drink'`)\r\n        }\r\n\r\n        this._id = v\r\n    }\r\n\r\n    get id() {\r\n        return this._id\r\n    }\r\n\r\n    /**\r\n         * - collect all errors in to an array\r\n         * - no empty error values will be set\r\n         */\r\n    set error(v) {\r\n        if (!v) return\r\n\r\n        // in case data is in its initial status state = 'open' we need to update it to change `_dataIndex`\r\n        //  if (this.data === null) this.data = false\r\n        // NOTE  we now use `this.completeOnNull` so can ignore above logic\r\n        this._error.push(isArray(v) ? v.toString() : v)\r\n        this._error = this._error.filter(z => !!z)\r\n        this.dispatchChange('error')\r\n    }\r\n\r\n    /**\r\n         * @returns an arrays of errors or null\r\n         */\r\n    get error() {\r\n        if (!this._error.length) return undefined\r\n        return this._error\r\n    }\r\n\r\n    get ref() {\r\n        return this._ref\r\n    }\r\n\r\n    /**\r\n         * - acceps string, can only be set when status isnt complete\r\n         * - can be used to find your Pocket by particular `ref`\r\n         */\r\n    set ref(v) {\r\n        if (!v) return\r\n        if (!isString(v)) {\r\n            warn('[pocket]', `[ref] must be a string`)\r\n            return\r\n        }\r\n        if (this.status === 'complete' || this.status === 'send') return\r\n\r\n        this._ref = v\r\n        this.dispatchChange('ref')\r\n    }\r\n\r\n    get campaign() {\r\n        return this._campaign\r\n    }\r\n\r\n    set campaign(v) {\r\n        if (v === undefined) return\r\n        if (this._campaign) {\r\n            if (this.debug && !this.disableWarnings) warn('[pocket]', `cannot update already set campaign ${this._campaign}`)\r\n            return\r\n        }\r\n        if (!v) return\r\n        if (!isString(v)) {\r\n            if (this.debug) warn('[pocket]', `campaign must be a string`, v)\r\n            return\r\n        }\r\n\r\n        this._campaign = v\r\n        this.dispatchChange('campaign')\r\n    }\r\n\r\n    set task(v) {\r\n        if (v === undefined) return\r\n        if (this._task) {\r\n            if (this.debug && !this.disableWarnings) warn('[pocket]', `cannot update already set task`)\r\n            return\r\n        }\r\n\r\n        if (!v) return\r\n        if (!isString(v)) {\r\n            if (this.debug) warn('[pocket]', `task must be a string`)\r\n            return\r\n        }\r\n        if (v.indexOf(\"::\") !== -1) throw ('task seperator :: is restricted')\r\n        if (v.split(' ').length > 1) throw ('task cannot have spaces, use seperators: _+')\r\n        const pat = /[`~!@#$%^&*()\\=?;'\",.<>\\{\\}\\[\\]\\\\\\/]/gi\r\n        const regx = new RegExp(pat, 'gi')\r\n        if (regx.test(v)) throw (`your task is invalid, allowed chars: ${pat}`)\r\n\r\n        this._task = v.replace(/ /gi, '_').toLowerCase()// every task must be valid with required \r\n           \r\n    }\r\n\r\n    get task() {\r\n        return this._task\r\n    }\r\n\r\n    set data(v) {\r\n        if (v === undefined) return\r\n        /**\r\n            * cannot be updated uppon status is send || complete\r\n            */\r\n        const complete = this.status === 'complete' || this.status === 'send'\r\n        if (complete) {\r\n            // NOTE this can also happen if you are using $transfer().$to from `PocketModule` that is a delayed\r\n            if (this.debug && !this.disableWarnings) warn('[pocket]', `you cannot update data once the status is complete or send`)\r\n            return\r\n        }\r\n\r\n        this._dataIndex++\r\n        if (this.status === 'open' && this._data !== null && this._dataIndex > 1) this.status = 'updated'\r\n            \r\n        this._data = v\r\n        if (this.withDataBank) this.dataBank = v\r\n        this.dispatchChange('data')\r\n    }\r\n\r\n    /**\r\n     *\r\n     *\r\n     * @memberof Probe\r\n     * @returns {any}\r\n     */\r\n    get data() {\r\n        return this._data\r\n    }\r\n\r\n    /**\r\n         * ### update\r\n         * - update data of current Probe{}.data\r\n         * @param {*} data:any, required\r\n         * @param {*} merge:Boolean, optional for merging object to this.data\r\n         */\r\n    update(data, merge = null) {\r\n        if (this.status === 'complete' || this.status === 'send') {\r\n            if (this.debug && !this.disableWarnings) warn(`[Probe][update] cannot update data on complete status`)\r\n            return this\r\n        }\r\n        if (!isObject(data) && merge) {\r\n            if (this.debug) warn('[pocket]', `[Probe][update] cannot update none object 'data' with option 'merge=true' set`)\r\n            return this\r\n        }\r\n        if (isObject(data) && merge) this.data = Object.assign({}, this.data, data)\r\n        else if (data !== undefined) this.data = data\r\n        return this\r\n    }\r\n\r\n    /**\r\n         * forward motion `status` update is allowed\r\n         * `value`: importance que\r\n         * `set`: if status already set\r\n         */\r\n    get statusStackOrder() {\r\n        return {\r\n            open: { value: 1, set: false },\r\n            updated: { value: 2, set: false },\r\n            complete: { value: 3, set: false },\r\n            send: { value: 4, set: false },\r\n            error: { value: 5, set: false }\r\n        }\r\n    }\r\n\r\n    /**\r\n         * allow status: open | updated | complete | send | error\r\n         * `open`: status is set when pocked is initialized\r\n         * `updated`: status is set when data is updated\r\n         * `complete`: status is set when you want to complete and discard probe\r\n         * `send`: once the status was set `complete` data is resolved first then status is set as `send`.\r\n         * and Probe is locked, cannot be interacted with. Follow the strategic order set by `statusStackOrder`\r\n         * `error` acts like complete, it will resolve() last available data and block the Probe\r\n         */\r\n    get status() {\r\n        return this._status\r\n    }\r\n\r\n    set status(v) {\r\n        // order of status and allowed values\r\n        ((stat) => {\r\n            try {\r\n                // meaning do not allow any status changes beond `updated`\r\n                if (this.statusStackOrder[stat].value > 2 && this.statusStackOrder[stat].set === true) return false\r\n            } catch (err) {\r\n                onerror('statusStackOrder invalid status')\r\n            }\r\n\r\n            // if (this._status === 'send' && (stat === 'complete' || stat ==='send')) {\r\n            //     if (this.debug) warn(`cannot update status if already complete, id:${this.id}`)\r\n            //     return false\r\n            // }\r\n\r\n            switch (stat) {\r\n                case 'open':\r\n                    if (this._status === 'updated') {\r\n                        if (this.debug) warn('[pocket]', `cannot set status back to open once set to updated`)\r\n                        break\r\n                    }\r\n                    this._status = stat\r\n                    this.statusStackOrder[stat].set = true\r\n                    this.onOpenStatus(v) // emit probe when status opens\r\n                    this.setStatusAsync = stat\r\n                    this.dispatchChange('status')\r\n                    break\r\n\r\n                case 'updated':\r\n                    if (this._status === 'complete') {\r\n                        if (this.debug) warn('[pocket]', `cannot update status to 'updated' then previously set to 'complete'`)\r\n                        break\r\n                    }\r\n\r\n                    if (this._dataIndex > 0) {\r\n                        this._status = stat\r\n                        this.statusStackOrder[stat].set = true\r\n                        this.setStatusAsync = stat\r\n                        this.dispatchChange('status')\r\n                        if (this.debug) log(`id:${this.id}, data updated`)\r\n                    }\r\n\r\n                    break\r\n\r\n                case 'complete':\r\n                    if (this.data === null && this.completeOnNull !== true) {\r\n                        if (this.debug) warn('[pocket]', `[status] cannot complete status because data is null, to complete you set data prop to false`)\r\n                        break\r\n                    }\r\n                    this.statusStackOrder[stat].set = true\r\n                    this.setStatusAsync = stat\r\n                    // setTimeout(()=>{\r\n                    this._status = stat\r\n                    this.dispatchChange('status')\r\n                    this.onComplete(v) // resolve probe when status complete\r\n                    //  })\r\n                       \r\n                    break\r\n\r\n                case 'send':\r\n                    if (this._status !== 'complete') {\r\n                        if (this.debug) warn('[pocket]', `cannot update status to 'send' then previously not set to 'complete'`)\r\n                        break\r\n                    }\r\n                    this._status = stat\r\n                    this.statusStackOrder[stat].set = true\r\n                    this.setStatusAsync = stat\r\n                    this._completeAsync.resolve({ status: this._status, id: this.id })\r\n                    this.dispatchChange('status')\r\n                    break\r\n\r\n                case 'error':\r\n                    if (this._status === 'complete') return\r\n                    // when we have error we need to inform what happen, and close the Probe\r\n\r\n                    this.statusStackOrder[stat].set = true\r\n                    this.setStatusAsync = stat\r\n                    this.dispatchChange('status')\r\n                    this.onComplete(v) // resolve probe when status complete                     \r\n                    break\r\n\r\n                default:\r\n                    if (this.debug) warn('[pocket]', `id:${this.id},  you set invalid status: ${stat}, nothing changed`)\r\n            }\r\n        })(v)\r\n    }\r\n\r\n    /**\r\n         * - works with `statusAsync`\r\n         * - (1.) setter creates our new sq() promise every time, and allows use or resolve \r\n         * - to use example: setStatusAsync.resolve()\r\n         */\r\n    set setStatusAsync(v) {\r\n        // 'v'  set to anything to initiate setter\r\n        const timestamp = new Date().getTime()\r\n        const p = { timestamp, p: sq() }\r\n        this._statusAsync.push(p)\r\n    }\r\n\r\n    /**\r\n     * Resolve lext promise and returns last status\r\n     *\r\n     * @memberof Probe\r\n     * @returns {Promise} \r\n     */\r\n    get setStatusAsync() {\r\n        const lastPromise = last(this._statusAsync.sort((a, b) => a.timestamp - b.timestamp).map(z => z['p']))\r\n        lastPromise.resolve(copy(this.status)) // << we are only returning\r\n        return lastPromise\r\n    }\r\n\r\n    /**\r\n     * ### statusAsync\r\n     * - dynamic promise resolver with `Simple Q` from `eaglex.net`\r\n     * - works with `setStatusAsync` setter/getter\r\n     * - return last 'resolve' status from last `timestamp` setting\r\n     * @returns {Promise<string>} status name\r\n     */\r\n    get getStatusAsync() {\r\n        return this.setStatusAsync.promise\r\n    }\r\n\r\n    /**\r\n     * - when status is set to complete or send, the promise will then be resolved\r\n     * @returns {Promise<{status, id}>}\r\n     */\r\n    get completeAsync() {\r\n        return this._completeAsync.promise\r\n    }\r\n\r\n    /**\r\n         * - alias of `getStatusAsync`\r\n         * @readonly\r\n         */\r\n    get statusAsync() {\r\n        return this.getStatusAsync\r\n    }\r\n\r\n    all() {\r\n\r\n        const d = { error: this.error, ref: this.ref, campaign: this.campaign, data: this.data, id: this.id, task: this.task, status: this.status }\r\n        if (this.withDataBank) d.dataBank = copy(this.dataBank)\r\n        return d\r\n    }\r\n\r\n    /**\r\n     * - can be used when `opts.onChange=true` is set\r\n     * - changes are observed for `[ data,status,ref,error,campaign,status:complete]`\r\n     * @param {(probeCopy:{},id)=>{}} cb(data,id) callback returns updated value in real time\r\n     */\r\n    onChange(cb, watch = 'all') {\r\n        if (!this._onChange) {\r\n            if (this.debug) warn('[pocket]', `[onChange] to use need to set opts.onChange=true`)\r\n            return this\r\n        }\r\n        if (!isFunction(cb)) {\r\n            if (this.debug) warn(`[onChange] cb must be a function`)\r\n            return this\r\n        }\r\n        let availableWatch = ['all', 'data', 'status', 'ref', 'error', 'campaign']\r\n\r\n        // allo lookout for status complete event only when selected to watch\r\n        availableWatch = [].concat(availableWatch, ['status:complete'])\r\n\r\n        if (!availableWatch.includes(watch)) {\r\n            if (this.debug) warn('[pocket]', `[onChange] no watch available for ${watch}`)\r\n            return this\r\n        }\r\n\r\n        let statIndex = availableWatch.indexOf('status:complete')\r\n        availableWatch.splice(statIndex, 1)\r\n\r\n        const self = this\r\n\r\n        if (!this.onchangeDispatch) {\r\n            if (this.debug) warn('[pocket]', `[onChange] onchangeDispatch no longer active`)\r\n            return this\r\n        }\r\n\r\n        this.onchangeDispatch.subscribe(function (data, id) {\r\n            // NOTE data['changed'] // returned in dispatch only provided name of asset changed\r\n            // no point to carry data if we can access it direct\r\n            if (data['changed'] && watch === 'all') {\r\n                cb.bind(self)(self, id)\r\n                return\r\n            }\r\n\r\n            /** \r\n                 * on status complete return all data copy in callback\r\n                */\r\n            if (watch === 'status:complete') {\r\n\r\n                if (data['changed'] === 'status' && (self['status'] === 'send' || self['status'] === 'complete' && !self._sealed)) {\r\n                    let d = {\r\n                        ...copy(self.all()),\r\n                        status: 'complete'\r\n                    }\r\n                    cb.bind(self)(d, id)\r\n                    self._sealed = true\r\n                }  \r\n                return this\r\n            }\r\n                 \r\n            if (data['changed'] === watch && self[watch] !== undefined) {\r\n                cb.bind(self)(copy(self[watch]), id)                 \r\n            }          \r\n        })\r\n        return this\r\n    }\r\n\r\n    /**\r\n         * - works with onchangeDispatch, onChange \r\n         * - emmits next value to `onchangeDispatch` listener\r\n         * @param {*} changedName required, provide name of Probe prop to alert dispatcher what has changed\r\n         * @returns self\r\n         */\r\n    dispatchChange(changedName) {\r\n        if (!this._onChange) {\r\n            return false\r\n        }\r\n        if (!this.onchangeDispatch) {\r\n            return false\r\n        }\r\n        this.onchangeDispatch.next({ changed: changedName })\r\n        return true\r\n    }\r\n\r\n    /**\r\n         * initiates dispatcher to handle on change value of [data,status,ref,error,campaign]\r\n         * @returns dispatcher instance\r\n         */\r\n    get onchangeDispatch() {\r\n        if (!this._onChange) {\r\n            if (this.debug) warn('[pocket]', `[onchangeDispatch] to use need to set opts.onChange=true`)\r\n            return null\r\n        }\r\n\r\n        if (this._onchangeDispatch) {\r\n            return this._onchangeDispatch\r\n        }\r\n\r\n        this._onchangeDispatch = dispatcher(this.id)\r\n        return this._onchangeDispatch\r\n    }\r\n\r\n    /**\r\n         * status watch, when current status changes execute send\r\n         * @param {*} status\r\n         */\r\n    onComplete(status) {\r\n        if ((status === 'complete' || status === 'error') && this._status !== 'send' && (this._dataIndex > 0 || this.completeOnNull === true)) {\r\n\r\n            if (this.emitter) {\r\n                setTimeout(() => {\r\n                    this.emitter({ probe: this, status })\r\n                })\r\n            }\r\n            this._status = 'send'\r\n            this.sq.resolve({ probe: this.all() })  \r\n\r\n            setTimeout(() => {\r\n                // in case delete listener when data complete     \r\n                if (this.onchangeDispatch) this.onchangeDispatch.del()\r\n            })\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n         * do something on open task, this means we start request for data\r\n         * @param {*} status\r\n         */\r\n    onOpenStatus(status) {\r\n        if (status === 'open') {\r\n            // return this probe and update it when its complete\r\n            if (this.emitter) {\r\n                setTimeout(() => {\r\n                    this.emitter({ probe: this, status: 'open' })\r\n                })\r\n            }\r\n        }\r\n        return this\r\n    }\r\n}\r\n\r\nmodule.exports = Probe\r\n","/* eslint-disable no-proto */\r\nconst { validID } = require('x-utils-es/umd')\r\n\r\n// node.js/browser detection\r\n\r\n// const { isObject } = require('x-utils-es/umd')\r\n// const { v4 } = require('uuid')\r\n\r\n/**\r\n* - accepting object of messages, example: `{'001':['my message',001],...}`\r\n* - returns : {'001':{message,code},...}\r\n*/\r\nexports.errorMessages = (messages) => {\r\n    const msgs = {}\r\n    for (let [k, v] of Object.entries(messages)) {\r\n        msgs[k] = { message: v[0], code: k }\r\n    }\r\n    return msgs\r\n}\r\n\r\nconst idRegexValid = (str = '') => {\r\n    const pat = /[`~!@#$%^&*()\\=?;'\",.<>\\{\\}\\[\\]\\\\\\/]/gi\r\n    const regx = new RegExp(pat, 'gi')\r\n    if (regx.test(str)) {\r\n        // NOT ALWAYS NEEDED TO DISPLAY THE ERROR\r\n        // if (this.debug) onerror(`your id is invalid, allowed chars: ${pat}`)\r\n        return false\r\n    }\r\n    return true\r\n}\r\n\r\nexports.validProjectID = (id = '') => {\r\n    // id = validID(id) // bad idea we should alwasy provide valid id, not modifying inputs\r\n    if (!id) return undefined\r\n    if ((id || '').split(' ').length > 1) return undefined\r\n    if (!idRegexValid(id)) return undefined\r\n    return id\r\n}\r\n\r\n/**\r\n * Evaluate ProbeID\r\n * @param {string} probeID (required)\r\n */\r\nexports.validProbe = (probeID = '') => {\r\n    probeID = validID(probeID)\r\n    if (!probeID) return undefined\r\n    if (!idRegexValid(probeID)) return\r\n    if (probeID.indexOf(`::`) === -1) return undefined\r\n    // if (!this.pocket[probeID]) {\r\n    //     if (this.debug && debug === null) warn('[pocket]',`[validProbe] did not find probe with probeID ${probeID}`)\r\n    //     return null\r\n    // }\r\n    return probeID\r\n}\r\n\r\nexports.idRegexValid = idRegexValid\r\n","/**\r\n * This is the last Pocket extended class\r\n */\r\n\r\nconst PocketSelectors = require('./Pocket.selectors')\r\nclass Pocket extends PocketSelectors {\r\n    /**\r\n     *\r\n     * @param {Object} opts available options\r\n     * @param {boolean} opts.async  when set, allow $payload(`data`) to be async object\r\n     * @param {boolean} opts.onChange loads watch for changes Probe asset\r\n     * @param {boolean} opts.completeOnNull Allow Probe to complete even if data\r\n     * @param {boolean} opts.disableWarnings disable some less relevant warning messages\r\n     * @param {boolean} opts.withDataBank\r\n     * @param {number} opts.deleteWithDelay\r\n     * @param {any} opts.dispatcher, when set to true, loads external library `Dispatcher`\r\n     * @param {*} debug optional\r\n     */\r\n    constructor(opts, debug) {\r\n        super(opts, debug)      \r\n    }\r\n    \r\n}\r\nmodule.exports = Pocket\r\n","\r\n/**\r\n * Data provided to _setUpdate() method\r\n * @param {object} dataFrom \r\n * @param {any} dataFrom.data\r\n * @param {string} dataFrom.status\r\n * @param {string} dataFrom.ref \r\n * @param {string} dataFrom.error\r\n * @param {string} dataFrom.campaign\r\n */\r\nfunction SetUpdateModel({ data = undefined, status = undefined, ref = undefined, error = undefined, campaign = undefined }) {\r\n    this.data = data\r\n    this.status = status\r\n    this.ref = ref\r\n    this.error = error\r\n    this.campaign = campaign\r\n\r\n    // NOTE just a clean up do not pass any undefined vals\r\n    Object.entries(this).forEach(([k, val]) => {\r\n        if (val === undefined) delete this[k]\r\n    })\r\n}\r\n\r\nmodule.exports = SetUpdateModel\r\n","const ProbePayload = require('./ProbePayloadModel')\r\nconst { validProjectID } = require('../utils')\r\nconst { isArray, isString } = require('x-utils-es/umd')\r\n\r\n/**\r\n * Data configuration asset required to create new project\r\n * @param {object} params `{id,tasks[]}`\r\n * @param {string} params.id project/Pocket id that identify each project to Probes batch\r\n * @param {ProbePayload[]} params.tasks each Probe data asset\r\n */\r\nfunction ProjectPayloadModel({ id = '', tasks = [] }) {\r\n\r\n    if (!id || !isString(id) || !validProjectID(id)) throw ('ProjectPayloadModel/invalid id provided')\r\n    if (!isArray(tasks) || !(tasks || []).length) throw ('ProjectPayloadModel/invalid tasks[] provided')\r\n\r\n    this.id = id\r\n    this.tasks = tasks.map(n => new ProbePayload(n))\r\n\r\n}\r\n\r\nmodule.exports = ProjectPayloadModel\r\n\r\n/*\r\nid: 'pocket-1', // Belt and Road Initiative\r\n    tasks: [\r\n\r\n        {\r\n            ref: 'abc',\r\n            task: 'china',\r\n            data: { 'assets': 15, type: 'billions', info: 'benefactor' },\r\n            compaign: 'Belt_and_Road_Initiative'\r\n        },\r\n\r\n* */\r\n","/* eslint-disable no-undef */\r\n// for es2015/ or below browser loading\r\nwindow.Pocket = require('../Pocket/PocketExit.module')\r\n","/**\r\n * ### PocketSelectors\r\n * - Extends PocketModule using selectors for better access to Probes\r\n * - allow selecttion to refference by, example:  `taskName`, `::taskName` and `${projectID}::taskName`, thanks to `selectByTask()` method\r\n */\r\n\r\n// TYPES\r\n// eslint-disable-next-line no-unused-vars\r\nconst Probe = require('../Probe/Probe')\r\n// MODELS AND TYPES\r\n// eslint-disable-next-line no-unused-vars\r\nconst { $computeCallBack } = require('../Intellisense')\r\n// eslint-disable-next-line no-unused-vars\r\nconst SetUpdateModel = require('../Models/SetUpdateModel')\r\n\r\nconst { copy, warn, isArray, onerror, objectSize, isString, uniq, isFunction } = require('x-utils-es/umd')\r\nconst { validProbe, validProjectID } = require('../utils')\r\n\r\nconst PocketArchitect = require('./Pocket.architect')\r\nclass PocketSelectors extends PocketArchitect {\r\n    constructor(opts, debug) {\r\n        super(opts, debug)\r\n    }\r\n\r\n    /**\r\n     * @memberof PocketArchitect\r\n     */\r\n    $architect(cb, projectID) {\r\n        return super.architect(cb, projectID)\r\n    }\r\n\r\n    /**\r\n     *  @memberof PocketArchitect\r\n     */\r\n    $asset(assetName, asCallback, projectID) {\r\n        return super.asset(assetName, asCallback, projectID)\r\n    }\r\n\r\n    /**\r\n         * - check is probe exists on PocketModule\r\n         * @param {*} probeID required, can specify `::taskName` or full id `{projectID}::{probeID}`\r\n         * @returns boolean\r\n         */\r\n    $exists(probeID) {\r\n        return !!this.selectByTask(probeID)\r\n    }\r\n\r\n    /**\r\n         * @param projectID required\r\n         * @returns boolean `true/false/null`, determined by project completion\r\n         */\r\n    $projectComplete(projectID) {\r\n        if (!this.projectsCache[projectID]) return null\r\n        return this.projectsCache[projectID] === 'complete'\r\n    }\r\n\r\n    /**\r\n         * ### $projectSet\r\n         * - use it to check if project already available, it is similar to `$projectSetAsync` but not a promise, returns current status, not in future\r\n         * @param {*} projectID required\r\n         */\r\n    $projectSet(projectID = '') {\r\n        projectID = validProjectID(projectID)\r\n        if (this.payloadData[projectID]) return true\r\n        return false\r\n    }\r\n\r\n    /**\r\n         * REVIEW self is inconsistant here we may have to update this logic\r\n         * @memberof PocketSelectors\r\n         * run conditional statement within callback, so we can keep chaining in the same block\r\n         * @param {(pocket:PocketSelectors)=>any} cb required, inside callback access to self for PocketModule, or for Probe{}, depending on `projectID/probeID` id specified\r\n         * @param {string} id `projectID/probeID` optional, specify either `projectID` or `probeID`, defaults to last `projectID`\r\n         * @returns {PocketSelectors} by default eturns Pocket/self, or any true value passed inside callback\r\n         */\r\n    $condition(cb, id = undefined) {\r\n        \r\n        if (!isFunction(cb)) {\r\n            if (this.debug) warn('[pocket]', `[$condition] must provide callback`)\r\n            return this\r\n        }\r\n        id = !isString(id) ? '' : id\r\n\r\n        let selfType = 'PocketSelf' // `ProbeSelf`\r\n        let self = null\r\n        if (id.indexOf(`::`) === 0) {\r\n            // if specified id is `probeID`\r\n            id = this.selectByTask(id, true)\r\n            id = this.lastProbeID(id)\r\n            selfType = `ProbeSelf`\r\n            if (!id) {\r\n                if (this.debug) warn('[pocket]', `[$condition] probeID not found`)\r\n                return this\r\n            }\r\n            // also updates last selector reference\r\n        } else if (this.lastProjectID(id)) selfType = 'PocketSelf'\r\n        // if specified id is `projectID`\r\n        else {\r\n            if (this.debug) warn('[pocket]', `[$condition] projectID not found`)\r\n            return this\r\n        }\r\n\r\n        if (selfType === 'PocketSelf') self = this\r\n        if (selfType === 'ProbeSelf') self = this.$get(id)\r\n\r\n        if (!self) {\r\n            if (this.debug) warn('[pocket]', `[$condition] no valid self value`)\r\n            return this\r\n        }\r\n\r\n        const cbDATA = cb.call(self, self) // when using arrow function pass `(self)=>` in callback as well\r\n        if (cbDATA) return cbDATA\r\n        // if callback has any true data return it,\r\n        else return this // else return self\r\n    }\r\n\r\n    /**\r\n         * @returns last selected projectID\r\n         */\r\n    get $projectID() {\r\n        return this._lastProjectID\r\n    }\r\n\r\n    /**\r\n         * - return last probe status, this is a dynamic Promise, creates new promise every time status is changed, so then it needs to bu called again to get latest update\r\n         * @param {*} probeID\r\n         */\r\n    $probeStatusAsync(probeID = '') {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        let lastProbeID = this.lastProbeID(probeID)\r\n        return super.probeStatusAsync(lastProbeID)\r\n    }\r\n\r\n    /**\r\n         * ### $get\r\n         * - `get probe by 'id::taskName'`\r\n         * - `returns instance`\r\n         *  methods:`{get,all}` props: `{id,data,tasks,status}`\r\n         * @param {*} probeID required, example format: `${payload.id}::taskName`\r\n         * @param {*} self = false optional, in case you want to chain, and access `Probe{}` through `...).d`\r\n        */\r\n    $get(probeID, self) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        let lastProbeID = this.lastProbeID(probeID)\r\n        return super._get(lastProbeID, self)\r\n    }\r\n\r\n    /**\r\n     * REVIEW this method must be updated\r\n     * @deprecated\r\n     * - return array of Probes matched by ref\r\n     * @param {*} probeRef, required\r\n     * @returns [Probe{},...] array\r\n     */\r\n    $getByRef(probeRef = '') {       \r\n        return Object.assign(this.pocket).filter(([id, probe], inx) => probe.ref === probeRef)\r\n    }\r\n\r\n    /**\r\n         * - as name suggest sets up new new data for Probe/task, it derives from `$update`\r\n         * @param {SetUpdateModel} dataFrom required, must specify what to set on Probe{}, example: `dataFrom:{data:'coke',status:'complete',campaign:'cocacola'}`\r\n         * - we should only use `$set` for initialization, this action also calls `clearStoreTransfers`\r\n         * @param {*} probeID required, example format: `${payload.id}::taskName`\r\n         */\r\n    $set(dataFrom, probeID) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        let lastProbeID = this.lastProbeID(probeID)\r\n        return super._set(dataFrom, lastProbeID)\r\n    }\r\n\r\n    /**\r\n     * ### $probe\r\n     * - return me as Probe{}, similar as $get(...), although does additional check for instanceOf Probe{}\r\n     * @param {*} probeID\r\n     * @returns {Probe}\r\n     */\r\n    $probe(probeID = '') {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        let lastProbeID = this.lastProbeID(probeID)\r\n        if (!this.pocket[lastProbeID]) {\r\n            if (this.debug) warn('[pocket]', `[$probe] not found for probeID: ${probeID}`)\r\n            return undefined\r\n        }\r\n\r\n        if (this.pocket[lastProbeID].constructor.name !== 'Probe') {\r\n            if (this.debug) onerror('[pocket]', `[$probe] probeID: ${probeID} is not an instance of Probe{}`)\r\n            return undefined\r\n        }\r\n\r\n        return this.pocket[lastProbeID]\r\n    }\r\n\r\n    /**\r\n         * update Probe/task, for convenience, so we dont have do this, example: `pc.$get('abc123::grab').status='complete'`\r\n         * @param {SetUpdateModel} dataFrom required, must specify what to update on Probe{}, example: `dataFrom:{data:'coke',status:'complete',campaign:'cocacola'}`\r\n         * @param {*} mergeData optional if `true` will merge: `Object.assing({},probe[id].data,mergeData['data'])`\r\n         * @param {*} probeID required, example format: `${payload.id}::taskName`\r\n         */\r\n    $update(dataFrom, mergeData, probeID) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        let lastProbeID = this.lastProbeID(probeID)\r\n        return super.update(dataFrom, mergeData, lastProbeID)\r\n    }\r\n\r\n    /**\r\n         * ### $select\r\n         * - select current payloadID/project/job by id you are working on\r\n         * @param {*} projectID optional/sensitive, selects new point of reference.\r\n         */\r\n    $select(projectID = undefined) {\r\n        projectID = !isString(projectID) ? '' : projectID\r\n        this.lastProjectID(projectID) // also updates last selector reference\r\n        return this\r\n    }\r\n\r\n    /**\r\n         * Filter works together with `$compute` or standalone when specified `.d` to return filtered `list`\r\n         * @memberof PocketSelectors\r\n         * @param {(probe:Probe)=>any} cb\r\n         * @param {string} projectID\r\n         * @returns {PocketSelectors}\r\n         */\r\n    $filter(cb, projectID = undefined) {\r\n        const self = this\r\n        projectID = this.lastProjectID(projectID) // also updates last selector reference\r\n        const returnAs = (val) => {\r\n            this.d = (val || []).filter((z) => z.isNONE === undefined)\r\n            return self\r\n        }\r\n\r\n        if (!isFunction(cb)) return returnAs([])\r\n\r\n        if (!this.payloadData[projectID]) {\r\n            if (this.debug) warn('[pocket]', `[$filter] no projectID found`)\r\n            return returnAs(null)\r\n        }\r\n        // when narrowing down $filter.$filter process, lets remember last action\r\n        let probeList = []\r\n        if ((this._lastFilterList[projectID] || []).length) probeList = this._lastFilterList[projectID]\r\n        else {\r\n            this._lastFilterList[projectID] = []\r\n            probeList = this.projectProbeList(projectID)\r\n        }\r\n        probeList.forEach((probe, inx) => {\r\n            if (probe.isNONE) {\r\n                return\r\n            }\r\n            const matchFound = cb.call(probe, probe)\r\n            if (!matchFound) {\r\n                this._lastFilterList[projectID] = this._lastFilterList[projectID].filter((z) => z.id !== probe.id)\r\n                this._lastFilterList[projectID].push({ id: probe.id, isNONE: true })\r\n                return\r\n            }\r\n\r\n            if (matchFound !== undefined && (matchFound === true || matchFound === 1)) {\r\n                // dont re-add same probe\r\n                const isNew = this._lastFilterList[projectID].filter((z, i) => (z || {}).id === probe.id).length\r\n\r\n                if (!isNew) this._lastFilterList[projectID].push(probe)\r\n            } else this._lastFilterList[projectID].push({ id: probe.id, isNONE: true })\r\n        })\r\n        return returnAs(this._lastFilterList[projectID])\r\n    }\r\n\r\n    /**\r\n         * ### $compute\r\n         * @instance\r\n         * - iterate thru each Probe{}/ instance in a callback, and make changes to it\r\n         * - note: you can only compute thru items that are not `complete`\r\n         * @param {$computeCallBack} cb callback to current Probe instance process\r\n         * @param {string} projectID optional/sensitive, selects new point of reference.\r\n         */\r\n    $compute(cb, projectID = '') {\r\n        projectID = this.lastProjectID(projectID)\r\n        const returnAs = (val) => {\r\n            // delete last filtered list after it was consumed\r\n            if (val) delete this._lastFilterList[projectID]\r\n            this.d = val\r\n            return this\r\n        }\r\n\r\n        if (!isFunction(cb)) {\r\n            if (this.debug) warn('[pocket]', `[$compute] cb must be a function`)\r\n            return returnAs(null)\r\n        }\r\n\r\n        if (!this.payloadData[projectID]) {\r\n            if (this.debug) warn('[pocket]', `[$compute] no project found fo your/last id projectID:${projectID}`)\r\n            return returnAs(null)\r\n        }\r\n\r\n        let lastFilter = this._lastFilterList[projectID] || []\r\n        if (lastFilter.length) {\r\n            // uniq\r\n            this._lastFilterList[projectID] = lastFilter = lastFilter\r\n                .filter((z) => z.isNONE === undefined)\r\n                .filter(({ id }, i, all) => {\r\n                    return all.filter((_probe) => id === _probe.id).length === 1\r\n                })\r\n            lastFilter.forEach((probe) => {\r\n                // compute method is designed to allow access to each Probe, but we do not want to allow looping thru assets that are already complete\r\n                if (probe.status !== 'complete' && probe.status !== 'send') cb.call(probe, probe)\r\n            })\r\n            // finally only return not none list on probes, then clear _lastFilterList\r\n            return returnAs(this._lastFilterList[projectID])\r\n        } else {\r\n            this.projectProbeList(projectID).forEach((probe) => {\r\n                // compute method is designed to allow access to each Probe, but we do not want to allow looping thru assets that are already complete\r\n\r\n                if (probe.status !== 'complete' && probe.status !== 'send') cb.call(probe, probe)\r\n            })\r\n            return returnAs(this.projectProbeList(projectID))\r\n        }\r\n    }\r\n\r\n    /**\r\n         * ### $list\r\n         * - list active Probes{} by project id, should return all assigned probe/tasks regardless of status\r\n         * - returns array[] of active Probe{}/tasks or []\r\n         * @param {*} projectID optional/sensitive, selects new point of reference.\r\n         * @param {(probeCopy:object)=>{}} cb((probe, probeID)=>) optional, when set will loop thru each Probe{} in callback\r\n         * @param {*} type optional, set to `list`, will return latest Probes, that includes if initiated cb and made a few changes\r\n         */\r\n    $list(projectID = '', cb = null, type = 'self') {\r\n        projectID = this.lastProjectID(projectID)\r\n        if (!this.payloadData[projectID]) return []\r\n        const list = () => {\r\n            return Object.entries(this.pocket).reduce((n, [key, val], inx) => {\r\n                if (val.id.includes(projectID)) n.push(val)\r\n                return n\r\n            }, [])\r\n        }\r\n        if (isFunction(cb)) {\r\n            this.projectProbeList(projectID).forEach((probe) => {\r\n                cb(probe.all()) // no access to Probe/instance only copy\r\n            })\r\n            if (type === 'self' || !type) {\r\n                return this\r\n            }\r\n            if (type === 'list') return list()\r\n        } else {\r\n            return list()\r\n        }\r\n    }\r\n\r\n    /**\r\n         * ### $transfer\r\n         * - select data from `fromProbeID` and hold it in `_transferCache`, until `$to(probeID)` is called\r\n         * - warning, action removes `Probe[fromProbeID].data` and overrides it on Probe[probeID].data, only when `$to(probeID)` is called, simple as that!\r\n         * @param {*} fromProbeID optional/sensitive, selects new point of reference.\r\n         */\r\n    $transfer(fromProbeID = '') {\r\n        // allow use of short ref names example: `::cocalola`\r\n        fromProbeID = this.selectByTask(fromProbeID, true)\r\n        fromProbeID = this.lastProbeID(fromProbeID)\r\n        if (!this.pocket[fromProbeID]) {\r\n            if (this.debug) warn('[pocket]', `[$transfer] no Probe{} found for this id fromProbeID:${fromProbeID}`)\r\n            return this\r\n        }\r\n        this.storeTransfers(fromProbeID, copy(this.pocket[fromProbeID]['data']))\r\n        // NOTE needed for extra security to make sure it was called before we can update `$to()`\r\n        this.$transfer_lastID = fromProbeID\r\n        return this\r\n    }\r\n\r\n    /**\r\n         * ### $to\r\n         * - works together with `$transfer`, will transfer `data` from one Probe{} to another\r\n         * if `_transferCache` is set, the cache is cleared.\r\n         * @param {*} toProbeID optional/sensitive, points to Probe{} `data` will be packed, it is not previous reference pointer, but the next.\r\n         * - will only work if `toProbeID` is not yet complete\r\n         * @param {*} pointToThisProbe to stay on the current pointer reference\r\n         * @param {*} maxDelay, keep at minimum! Time between transaction can take place, relates to `fromAverageTimeHasPast` found in `accessLastValidTransfer()`\r\n         */\r\n    $to(toProbeID = '', pointToThisProbe = true, maxDelay = 100) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        toProbeID = this.selectByTask(toProbeID, pointToThisProbe)\r\n        // if (!keepLastPointerReference) toProbeID = this.lastProbeID(toProbeID)\r\n        if (pointToThisProbe) toProbeID = validProbe(toProbeID)\r\n        if (!toProbeID) {\r\n            if (this.debug) warn('[pocket]', `[$to] toProbeID is invalid`)\r\n            return this\r\n        }\r\n        if (!this.pocket[toProbeID]) {\r\n            if (this.debug) warn('[pocket]', `[$to] no Probe{} found for this id toProbeID:${toProbeID}`)\r\n            return this\r\n        }\r\n        if (this.$transfer_lastID) {\r\n            // please note because this can be a delayed transaction, if you send `status=complete`\r\n            // the data will not be updated\r\n            const lastValidTransfer = this.accessLastValidTransfer(maxDelay)\r\n            if (objectSize(lastValidTransfer)) {\r\n                const { fromProbeID, data } = lastValidTransfer\r\n                if (this.$transfer_lastID === fromProbeID) {\r\n                    if (this.pocket[toProbeID].status === 'complete' || this.pocket[toProbeID].status === 'send') {\r\n                        if (this.debug) warn('[pocket]', `[$to] cannot transfer since toProbeID: ${toProbeID} is already complete`)\r\n                        this.$transfer_lastID = ''\r\n                        return this\r\n                    }\r\n                    this.pocket[fromProbeID]['data'] = null // from $transfer\r\n                    this.pocket[toProbeID]['data'] = data // $to\r\n                }\r\n            } else {\r\n                if (this.debug) warn('[pocket]', `[$to] no last valid transfer found`)\r\n            }\r\n            this.$transfer_lastID = ''\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n         * ### $of\r\n         * - points to Probe{} be reference\r\n         * @param {*} probeID optional/sensitive, select new point of reference\r\n         */\r\n    $of(probeID = '') {\r\n        // allow use of short ref names example: `::cocalola`\r\n        this.selectByTask(probeID, true)\r\n        return this\r\n    }\r\n\r\n    /**\r\n         * ### $data\r\n         * - returns Object copy of `Probe['data']`\r\n         * @param {*} dataProp optional, if you know what you are asking for example: `{assets:true}`,or `array['assets]`, it has catch error exception, so you wont receive any errors just `null`\r\n         * will return all available matched within our `Probe{}['data]`. Multiples of `dataProp{}/([])/(',')` will return an object, if only one specified, only value will be retured\r\n         * @param {*} probeID optional/sensitive, select new point of reference\r\n         * @param {*} self optional,if you want to $cached() last data enquiry and return `self` to keep chaining, nice!\r\n         */\r\n    $data(dataProp = undefined /** {}||[] */, probeID = '', self = false) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return self ? this : undefined\r\n\r\n        // NOTE can provide as an array\r\n        if (isArray(dataProp) && (dataProp || []).length) {\r\n            dataProp = uniq(dataProp).reduce((n, el) => {\r\n                if (el !== undefined) n[el.trim()] = true\r\n                return n\r\n            }, {})\r\n        }\r\n\r\n        if (!dataProp || !objectSize(dataProp)) {\r\n            this._$cached_data[probeID] = copy(this.pocket[probeID]['data'])\r\n            return self ? this : this._$cached_data[probeID]\r\n        }\r\n        return this.dataPropSelector('data()', probeID, dataProp, self, copy(this.pocket[probeID]['data']))\r\n    }\r\n\r\n    /**\r\n         * ### cached\r\n         * - grabs last cached `$data(...)` from Probe{}\r\n         * @param {*} dataProp{}/String optional, know what you are asking for example: ` {assets:true}/ or > 'assets,values,somethingElse'`, it has catch error exception, so you wont receive any errors just `null`\r\n         * will return all available matched within our `_$cached_data[probeID]`. Multiples of `dataProp{}/([])/(',')` will return an object, if only one specified, only value will be retured\r\n         * @param {*} probeID\r\n         */\r\n    $cached(dataProp = {}, probeID = '') {\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return undefined\r\n        const hasValue = this._$cached_data[probeID] !== undefined && this._$cached_data[probeID] !== null\r\n        if (!hasValue) return undefined\r\n        // if you provided a string make it an object\r\n        if (isString(dataProp) && (dataProp || '').length) {\r\n            dataProp = uniq(dataProp.trim().replace(/ /gi, '').split(',')).reduce((n, el) => {\r\n                if (el !== undefined) n[el] = true\r\n                return n\r\n            }, {})\r\n        }\r\n        // return cached data if its not an object, or undefined\r\n        if (!objectSize(this._$cached_data[probeID]) && hasValue) {\r\n            if (objectSize(dataProp)) return undefined\r\n            // our cache not an object, but we are asking for dataProp reference, so should return undefined\r\n            else return this._$cached_data[probeID]\r\n        }\r\n        // no selection at all, so just return whats available\r\n        if (!dataProp || !objectSize(dataProp)) {\r\n            return this._$cached_data[probeID] === undefined ? undefined : this._$cached_data[probeID]\r\n        } else return this.dataPropSelector('cached()', probeID, dataProp, false, this._$cached_data[probeID])\r\n    }\r\n\r\n    /**\r\n         * ### $campaign\r\n         * - returns Object copy of `Probe['campaign']`\r\n         * @param {*} probeID optional/sensitive, select new point of reference\r\n         */\r\n    $campaign(probeID) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return null\r\n        return copy(this.pocket[probeID]['campaign'])\r\n    }\r\n\r\n    /**\r\n         * ### $ref\r\n         * - returns Probe{}.ref\r\n         * @param {*} probeID optional/sensitive, select new point of reference\r\n         * @returns {string}\r\n         */\r\n    $ref(probeID) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return undefined\r\n        return copy(this.pocket[probeID]['ref'])\r\n    }\r\n\r\n    /**\r\n         * ### $status\r\n         * - returns Object copy of `Probe['status']`\r\n         * @param {*} probeID optional/sensitive, select new point of reference\r\n         * @returns {string}\r\n         */\r\n    $status(probeID) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return undefined\r\n        return copy(this.pocket[probeID]['status'])\r\n    }\r\n\r\n    /**\r\n         * ### $task\r\n         * - returns Object copy of `Probe['task']`\r\n         * @param {*} probeID optional/sensitive, select new point of reference\r\n         *  @returns {string}\r\n         */\r\n    $task(probeID) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return undefined\r\n        return copy(this.pocket[probeID]['task'])\r\n    }\r\n\r\n    /**\r\n         * ### $task\r\n         * - returns Object copy of `Probe['task']`\r\n         * @param {*} probeID optional/sensitive, select new point of reference\r\n         * @returns {array}\r\n         */\r\n    $error(probeID) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return undefined\r\n        return copy(this.pocket[probeID]['error'])\r\n    }\r\n\r\n    /**\r\n     * ### $all\r\n     * - return Object copy of all setters: `{id,status,campaign,task,data}`\r\n     * @param {*} probeID optional/sensitive, select new point of reference\r\n     * @returns {object}\r\n     */\r\n    $all(probeID) {\r\n        // allow use of short ref names example: `::cocalola`\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return undefined\r\n        return copy(this.pocket[probeID].all())\r\n    }\r\n\r\n    /**\r\n     * - changes are observed for `[data,status,ref,error,campaign, status:complete]`\r\n     * - when watchProp `status:complete` is selected all copy data is returned in callback\r\n     * @param {(probeCopy:{},id)=>any} cb\r\n     * @param watchProp specify what property to watch, defaults to `all`, except for `status:complete`\r\n     * @param {*} probeID optional/sensitive, select new point of reference\r\n\r\n     */\r\n    $onChange(cb, watchProp, probeID) {\r\n        if (!this._onChange) {\r\n            if (this.debug) warn('[pocket]', `[$onChange] opts.onChange=true must be enabled to use this feature`)\r\n            return this\r\n        }\r\n        probeID = this.selectByTask(probeID, true)\r\n        if (!this.pocket[probeID]) return null\r\n        this.pocket[probeID].onChange(cb, watchProp)\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * callback initialted of any probe that was completed, unless specificly selected `probeID`\r\n     * @param {(probeCopy:{},id)=>any} cb\r\n     * @param {*} probeID optional if you only want to listen for changes to specific probe add the id\r\n     */\r\n    $onProbeComplete(cb, probeID) {\r\n        if (!this._onChange) {\r\n            if (this.debug) warn('[pocket]', `[$onChange] opts.onChange=true must be enabled to use this feature`)\r\n            return this\r\n        }\r\n        // only run available onChange for selected probe by id\r\n        if (probeID) {\r\n            probeID = this.selectByTask(probeID, true)\r\n            if (!this.pocket[probeID]) return undefined\r\n            this.pocket[probeID].onChange(cb, 'status:complete')\r\n            return this\r\n        } else {\r\n            let projectID = this.lastProjectID()\r\n            let probeList = this.projectProbeList(projectID)\r\n\r\n            /**\r\n                 * callback any probe that completed due process\r\n                 */\r\n            probeList.forEach((probe) => {\r\n                probe.onChange(cb, 'status:complete')\r\n            })\r\n\r\n            return this\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = PocketSelectors\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\r\n* Probe databank extention   \r\n* \r\n**/\r\n\r\nconst { uniqBy, isArray } = require('x-utils-es/umd')\r\nclass ProbeDataBank {\r\n   \r\n    constructor(props, opts, debug) {\r\n        this._dataBank = []\r\n        this.debug = debug\r\n    }\r\n\r\n    /**\r\n     * accumulate data into historic array\r\n     * this data is never cleared, unless we unset protected var\r\n     * @memberof ProbeDataBank\r\n     * \r\n     */\r\n    set dataBank(v) {\r\n        // NOTE check if we are trying to assing dataBank to it self\r\n        if (isArray(v)) {\r\n            if (v.filter(n => n.data_id).length) {\r\n                // if (this.debug) warn('[dataBank]', 'trying to assing dataBank to self, skipped')\r\n                return \r\n            }\r\n        } else if ((v || {}).data_id) {\r\n            //  if (this.debug) warn('[dataBank]', 'trying to assing dataBank to self, skipped')\r\n            return \r\n        }\r\n        this._dataBank.push({ data: v, data_id: new Date().getTime().toString() })\r\n        this._dataBank = this._dataBank.filter(n => n.data !== undefined)\r\n    }\r\n    /**\r\n     *\r\n     *\r\n     * @memberof ProbeDataBank\r\n     * @returns {[{data:any,data_id:string}]} may also return []\r\n     */\r\n    get dataBank() {\r\n        // @ts-ignore\r\n        return uniqBy((this._dataBank || []), 'data_id')\r\n    }\r\n}\r\n\r\nmodule.exports = ProbeDataBank\r\n","/* eslint-disable no-unused-vars */\r\n\r\n/**\r\n * NOTE\r\n * This file is only to provide Intellisense via jsDocs for source to output data, \r\n * No mods are performed, original data is returned\r\n */\r\n\r\nconst ProbeReadyOutput = require('../Models/ProbeReadyOutput')\r\nconst Pocket = require('../../libs/Pocket/PocketExit.module')\r\nconst Probe = require('../Probe/Probe')\r\n\r\n/**\r\n * @summary Provide Intellisense support\r\n * @param {Probe} probe\r\n * @param {string} id \r\n * @returns {any}\r\n */\r\nexports.$computeCallBack = function(probe, id) {\r\n}\r\n\r\n/**\r\n * @summary Provide Intellisense support\r\n * @param {ProbeReadyOutput[]} arr \r\n * @returns {ProbeReadyOutput[]}\r\n */\r\nexports.readyOutput = (arr) => arr\r\n\r\n/**\r\n * @summary Provide Intellisense support\r\n * @param {Pocket} instance \r\n * @returns {Pocket}\r\n */\r\nexports.asPocket = (instance) => instance\r\n\r\n/**\r\n * @summary Provide Intellisense support\r\n * @param {Probe} instance \r\n * @returns {Probe}\r\n */\r\nexports.asProbe = (instance) => instance\r\n","\r\nfunction ProbeReadyOutput() {\r\n    this.data = undefined\r\n    this.task = ''\r\n    this.id = ''\r\n    this.status = ''\r\n    this.error = undefined\r\n}\r\n\r\nmodule.exports = ProbeReadyOutput\r\n/*\r\n data: { value: 1, message: 'some data' },\r\n    task: 'china',\r\n    ref: 'abc',\r\n    id: 'pocket-1::china',\r\n    status: 'send'\r\n\r\n* */\r\n","\r\n/** \r\n    * ### Architect\r\n    * a more in depth project architecture setup, allowing more robust configuration, munipulation and data flows\r\n*/\r\n\r\nconst { validProjectID } = require('../utils')\r\n\r\nconst { objectSize, isFunction, onerror, warn, isString } = require('x-utils-es/umd')\r\nconst ArchitectModel = require('../Models/ArchitectModel')\r\nconst PocketModuleExt = require('./PocketExtended')\r\nclass PocketArchitect extends PocketModuleExt {\r\n    constructor(opts, debug) {\r\n        super(opts, debug)\r\n\r\n        this.architectConfig = {}\r\n        const archModel = new ArchitectModel()\r\n        this.architectMod = archModel.architect\r\n    }\r\n\r\n    setArchitect(projectID, val) {\r\n        if (this.architectConfig[projectID] === undefined) this.architectConfig[projectID] = this.architectMod\r\n        this.architectConfig[projectID]['value'] = Object.assign({}, this.architectConfig[projectID]['value'], val)\r\n        return this\r\n    }\r\n\r\n    getArchitect(projectID) {\r\n        return (this.architectConfig[projectID] || {})['value']\r\n    }\r\n\r\n    /** \r\n       * @param assetName string, specify the name you chose in your `$architect(...)` declaration,\r\n       * @param asCallback when exists, return asset as callback\r\n       * @param projectID optional, update selector and return desired asset\r\n       * @returns if callback is returned the same value is returned\r\n      */\r\n    asset(assetName, asCallback, projectID) {\r\n        if (!isFunction(asCallback)) {\r\n            if (this.debug) warn('[pocket]', `[$asset] asCallback must be a function`)\r\n            return null\r\n        }\r\n        // reserved names\r\n        if (assetName === 'project' || assetName === 'cache') {\r\n            if (this.debug) warn('[pocket]', `[$asset] 'project, cache' are  restricted`)\r\n            return undefined\r\n        }\r\n        const lastProject = this.lastProjectID(projectID) // in case we are calling `$architect` on existing project\r\n        projectID = validProjectID(lastProject || projectID)\r\n\r\n        if (this.getArchitect(projectID)) {\r\n            if (this.getArchitect(projectID)[assetName] !== undefined) {\r\n                return asCallback.call(this, this.getArchitect(projectID)[assetName])\r\n            } else {\r\n                if (this.debug) warn('[pocket]', `[$asset] assetName for architect doesnt exist`)\r\n                return null\r\n            }\r\n        } else {\r\n            if (this.debug) warn('[pocket]', `[$asset] architectConfig for assetName doesnt exist`)\r\n            return null\r\n        }\r\n    }\r\n\r\n    /** \r\n          * - can be used as a project setter same as `$payload` or `$project`, but with additional configuration\r\n          * \r\n          * @param cb required, must return project settings: `{project:{payloadData}, asset:{value, name}, cache:{project, asset}}\r\n          * @param projectID optional\r\n          * @returns self\r\n         */\r\n    architect(cb, projectID) {\r\n\r\n        if (!isFunction(cb)) {\r\n            if (this.debug) onerror('[pocket]', `[$architect] callback must be set`)\r\n            return this\r\n        }\r\n\r\n        const config = cb.call(this/** ,?? */)\r\n\r\n        if (!objectSize(config)) {\r\n            if (this.debug) onerror('[pocket]', `[architect] must return a valid object settings {project, asset}, at least 1 is required`)\r\n            return this\r\n        }\r\n\r\n        const configProjectID = (config['project'] || {}).id\r\n        const lastProject = this.lastProjectID(projectID) // in case we are calling `$architect` on existing project\r\n        projectID = validProjectID(lastProject || projectID || configProjectID)\r\n\r\n        if (!projectID) {\r\n            if (this.debug) onerror('[pocket]', `[$architect] if this is a new project, you must specify projectID`)\r\n            return this\r\n        }\r\n        const validConfig = Object.entries(config).reduce((n, [k, value]) => {\r\n            if (['project', 'asset', 'cache'].indexOf(k) !== -1) n[k] = value\r\n            return n\r\n        }, {})\r\n\r\n        // default setting for `architect.cache` if getArchitect not stored\r\n        if (!(this.getArchitect(projectID) || {})['cache']) {\r\n            const defaults = { project: false, asset: false }\r\n            if (!validConfig['cache']) validConfig['cache'] = defaults\r\n\r\n            this.setArchitect(projectID, {\r\n                'cache': validConfig['cache']\r\n            })\r\n\r\n        } else validConfig['cache'] = this.getArchitect(projectID)['cache']\r\n\r\n        for (let k in validConfig) {\r\n            const item = validConfig[k]\r\n            // get last cache overide\r\n            const cached = validConfig['cache'][k] === true && (k === 'project' || k === 'asset')\r\n\r\n            if (k === 'project') {\r\n                // item['async'] item['type'] .. can include `async` and `type` \r\n                try {\r\n                    if (cached && this.getArchitect(projectID)[k]) continue\r\n                } catch (err) {\r\n                    // \r\n                }\r\n\r\n                this.setArchitect(projectID,\r\n                    { project: this.$payload(item, item['async'], item['type']).d }\r\n                )\r\n            }\r\n\r\n            if (k === 'asset') {\r\n                if (!isString(item['name']) || item['value'] === undefined) {\r\n                    if (this.debug) warn('[pocket]', `[$architect] asset must include {value, name}`)\r\n                    return this\r\n                }\r\n                if (item['name'] === 'project' || item['name'] === 'cache') {\r\n                    if (this.debug) warn('[pocket]', `[$architect] asset props, \"project, cache\" are reserved`)\r\n                    return this\r\n                }\r\n                try {\r\n                    if (cached && this.getArchitect(projectID)[item['name']]) continue\r\n                } catch (err) {\r\n                    // \r\n                }\r\n\r\n                // if already exists, same assets will be overriten and new will be created\r\n                this.setArchitect(projectID, {\r\n                    [item['name']]: item['value']\r\n                })\r\n            }\r\n        }\r\n        return this\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = PocketArchitect\r\n","const { objectSize, log } = require('x-utils-es/umd')\r\n// work with\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\r\n\r\n/**\r\n * protected prototype exluded from `Architect`\r\n */\r\nfunction ArchitectModel() {\r\n    this._architectVal = null\r\n    this.architect = Object.create(ArchitectModel.prototype, {\r\n        value: {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: () => {\r\n                return this._architectVal\r\n            },\r\n            set: (v) => {\r\n                if (!objectSize(v)) return\r\n                this._architectVal = v\r\n                log('[pocket]', `[architect] updated`)\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nmodule.exports = ArchitectModel\r\n","\r\n// providing jsdocs intelesence\r\n// eslint-disable-next-line no-unused-vars\r\nconst ProbeModel = require('../Probe/Probe') \r\n\r\n// eslint-disable-next-line no-unused-vars\r\nconst ProjectPayloadModel = require('../Models/ProjectPayloadModel')\r\n\r\nconst { onerror, warn, isPromise, validID, isString } = require('x-utils-es/umd')\r\n// const sq = require('simple-q') // nice and simple promise/defer by `eaglex.net`\r\n// const PocketLibs = require('./Pocket.libs')\r\nconst PocketModule = require('./Pocket.module')\r\n\r\nclass PocketModuleExt extends PocketModule {\r\n    constructor(opts, debug) {\r\n        super(opts, debug)\r\n\r\n        /**\r\n         * @borrows $payload\r\n         * @function $payload an alias on $payload(...)\r\n         */\r\n        this.$project = this.$payload\r\n    }\r\n\r\n    /**\r\n     * - delete completed `pocketSet`\r\n     */\r\n    deletePocketSet(id) {\r\n        if (!id) return\r\n        if (Object.values(this.pocket).length) {\r\n            for (let poc of Object.values(this.pocket)) {\r\n                if (this._$cached_data[poc.id]) delete this._$cached_data[poc.id]\r\n                if (poc.id.includes(id)) delete this.pocket[poc.id]\r\n            }\r\n        }\r\n        if (this.payloadData[id]) delete this.payloadData[id]\r\n        if (this._ready[id]) delete this._ready[id]\r\n\r\n        // these  two are together\r\n        if (this._projectSetDispatcher[id] !== undefined) delete this._projectSetDispatcher[id]\r\n        if (this._projectSetAsync[id]) delete this._projectSetAsync[id]\r\n        if (this._lastFilterList[id]) delete this._lastFilterList[id]\r\n\r\n        // from PocketArchitect dynamicly assigned\r\n        try {\r\n            if (this.architectConfig[id]) delete this.architectConfig[id]\r\n        } catch (err) {\r\n            // blah\r\n        }\r\n\r\n        // empty self\r\n        this.clearStoreTransfers(id)\r\n    }\r\n    /**\r\n     * ### $removeProject\r\n     * - removes all Probes and references relating to `projectID`\r\n     * @param {*} projectID\r\n     */\r\n    $removeProject(projectID) {\r\n        projectID = !isString(projectID) ? '' : projectID\r\n        projectID = this.lastProjectID(projectID) // also updates last selector reference\r\n        this.deletePocketSet(projectID)\r\n        return this\r\n    }\r\n   \r\n    /**\r\n     * - you can also use it on concurent payloads to existing `projectID`, once initial project is created overy other call will update each Probe{}.data/status, based on payloadData\r\n     * @param {ProjectPayloadModel | Promise<ProjectPayloadModel>} data required\r\n     * @param {*} async `override current opts.sync for this payload`\r\n     * @param {*} type optional, new/update, `update`: if we call on an existing project we can update `data/status properties` of all assigned tasks at once\r\n     * \r\n     * - `initialize new payload, for as many tasks`\r\n     * - `sets a multi task with instructions:`\r\n     * - `data = {\r\n            id: '', // 1 id for all tasks\r\n            tasks: [{ taskName: '', data: '', campaign: '' }]\r\n        }`\r\n\r\n    * - `call distributor and setDefer`\r\n    * \r\n    */\r\n    $payload(data, async, type) {\r\n        const returnAs = (val) => {\r\n            this.d = val\r\n            return this\r\n        }\r\n        const asAsync = async !== undefined ? async : this.async // override if set\r\n        if (asAsync && isPromise(data)) {\r\n            return returnAs(\r\n                // @ts-ignore\r\n                data.then(\r\n                    (z) => this.payload(z, false, type),\r\n                    (err) => err\r\n                )\r\n            )\r\n        }\r\n        // @ts-ignore\r\n        if (!asAsync && !isPromise(data)) return returnAs(this.payload(data, false, type))\r\n        else {\r\n            if (this.debug) onerror('[pocket]', `[payload] with opts.async=true, data must be a promise, or do not set async when not a promise`)\r\n            if (asAsync) return returnAs(Promise.reject())\r\n            else return returnAs(false)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @exports d\r\n     * @memberof PocketModule\r\n     * - resolves currently active `$payload(...)`\r\n     * - `after completion of Pocket, instance data for all Probes is deleted`\r\n     * - can be called even before project was declared thanks to callback dispather `$projectSetAsync()`\r\n     * @param {*} payloadID ,required\r\n     * @param allowsMultiple optional, when set to true will allow multiple calls to resolved data\r\n     * @returns {PocketModule}\r\n     */\r\n    $ready(payloadID, allowsMultiple = false) {\r\n        \r\n        try {\r\n            /**\r\n             * \r\n             * @param {Promise<ProbeModel[]>} val \r\n             */\r\n            const returnAs = (val) => {\r\n                this.d = val\r\n                if (this.d && !allowsMultiple) {\r\n                    this.d.catch((err) => {\r\n                        if (!this.disableWarnings) warn('[pocket]', err)\r\n                    })\r\n                }\r\n                return this\r\n            }\r\n\r\n            // sofl validation for non existant `payloadID` if called before declaration of a project\r\n            let _payloadID = this.lastProjectID(payloadID, false, null)\r\n            if (!payloadID && _payloadID) payloadID = _payloadID // grab last assigned id incase provided none\r\n\r\n            // in case it was called the second time, when already resolved!\r\n            if (this.projectsCache[payloadID] === 'complete' && !allowsMultiple) {\r\n                return returnAs(Promise.reject(`[$ready] project: ${payloadID} already complete`))\r\n            }\r\n\r\n            if (this._ready_method_set[payloadID] !== undefined && !allowsMultiple) {\r\n                if (this._ready_method_set[payloadID] === true) {\r\n                    return returnAs(Promise.reject(`[$ready] project: ${payloadID} already complete, cannot recall same $ready, ALLOW_MULTIPLE_FALSE`))\r\n                }\r\n                if (this._ready_method_set[payloadID] === false) {\r\n                    return returnAs(Promise.reject(`[$ready] project: ${payloadID} you already declared $ready somewhere else, this call is ignored, ALLOW_MULTIPLE_FALSE`))\r\n                }\r\n            }\r\n\r\n            if (!_payloadID) throw `payloadID must be set`\r\n\r\n            // we wrap it if on ready project so it allows declaring `${$ready()}` even before $project was created, cool ha!\r\n            const p = this.$projectSetAsync(_payloadID).then(({ projectID }) => {\r\n                return this.ready(projectID).then((z) => {\r\n                    // NOTE to help problems with loops and using chaining with last selector\r\n                    // will gradualy delete project with specified timeout\r\n                    if (!this.deleteWithDelay) this.deletePocketSet(projectID)\r\n                    else {\r\n                        setTimeout(() => {\r\n                            this.deletePocketSet(projectID)\r\n                        }, this.deleteWithDelay)\r\n                    }\r\n\r\n                    this.projectsCache[projectID] = 'complete'\r\n                    this._ready_method_set[_payloadID] = true\r\n\r\n                    return z\r\n                }, Promise.reject)\r\n            }, Promise.reject)\r\n\r\n            this._ready_method_set[_payloadID] = false\r\n            return returnAs(p)\r\n        } catch (error) {\r\n            if (!this.disableWarnings) onerror('[pocket]', error)\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = PocketModuleExt\r\n","\r\n/**\r\n * Probe propeties that can be set\r\n * @param {object} params `{id,ref,task,campaign,data}`\r\n * @param {string} params.id (required)\r\n * @param {string} params.ref (optional)\r\n * @param {string} params.task (optional)\r\n * @param {string} params.campaign (optional)\r\n * @param {any} params.data any data any be set except for undefined\r\n */\r\nfunction ProbePalyoadModel({ id = undefined, ref = undefined, task = undefined, campaign = undefined, data = undefined }) {\r\n    this.id = id\r\n    this.ref = ref\r\n    this.task = task\r\n    this.campaign = campaign\r\n    this.data = data\r\n    // NOTE this value is only generated when error happens\r\n    // this.error\r\n\r\n    // NOTE just a clean up do not pass any undefined vals\r\n    Object.entries(this).forEach(([k, val]) => {\r\n        if (val === undefined) delete this[k]\r\n    })\r\n}\r\n\r\nmodule.exports = ProbePalyoadModel\r\n","// const messageCODE = require('./errors') // DISPLAY MESSAGES WITH CODE\r\n\r\n// MODELS AND TYPES\r\nconst ProjectPayloadModel = require('../Models/ProjectPayloadModel')\r\nconst SetUpdateModel = require('../Models/SetUpdateModel')\r\n// eslint-disable-next-line no-unused-vars\r\nconst ProbeModel = require('../Probe/Probe') \r\n\r\nconst { idRegexValid } = require('../utils')\r\nconst { sq, objectSize, log, onerror, warn, isObject, validID } = require('x-utils-es/umd')\r\nconst PocketLibs = require('./Pocket.libs')\r\n\r\n/**\r\n * TODO ADD to $update `// action/[merge], action/+-*` using regEx\r\n */\r\n\r\nclass PocketModule extends PocketLibs {\r\n    constructor(opts, debug) {\r\n        super(opts, debug)\r\n        if (this.dispatcher) {\r\n            this.dispatcher.subscribe((z, id) => {\r\n                const { probe, status } = z || {}\r\n\r\n                if (status === 'error') {\r\n                    // NOTE dispatch data out\r\n                    if (this.debug) log('[pocket]', `[dispatcher] probe id:${probe.id} error`)\r\n                }\r\n\r\n                if (status === 'open') {\r\n                    if (this.debug) log('[pocket]', `[dispatcher] probe id:${probe.id} created`)\r\n                }\r\n\r\n                if (status === 'complete') {\r\n                    // NOTE dispatch data out\r\n                    if (this.debug) log('[pocket]', `[dispatcher] probe id:${probe.id} completed`)\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    // \r\n    //   :::::: U S E R   A P P L I C A T I O N   C A L L I N G   M E T H O D S : :  :   :    :\r\n    // \r\n    //\r\n\r\n    /**\r\n     * @memberof PocketModule\r\n     * @param {ProjectPayloadModel} data\r\n     */\r\n    payload(data = undefined, async, type = 'new') {\r\n        try {\r\n            \r\n            data = new ProjectPayloadModel(data) \r\n        } catch (err) {\r\n            onerror('[payload]', err)\r\n            return false\r\n        }\r\n\r\n        this.d = null\r\n        let isUpdated = null\r\n\r\n        if (this.payloadData[data.id] && (!type || type === 'new')) {\r\n            this._lastProjectID = data.id\r\n            // if (this.debug) warn(`[$payload] this payload.id already exists`)\r\n            return true\r\n        }\r\n\r\n        let initialProject = this.payloadData[data.id] === undefined // because there is no data set as of yet\r\n\r\n        // NOTE on update/new of project we need to reset $filter values, in case\r\n        if ((this._lastFilterList[data.id] || []).length) this._lastFilterList[data.id] = []\r\n\r\n        // NOTE validate our pocket values before generating each `new Probe()`\r\n        for (let val of data['tasks']) {\r\n            \r\n            if (!val['task']) {\r\n                if (this.debug) warn('[pocket]', '[$payload] task must be set for your tasks')\r\n                continue\r\n            }\r\n            // validate task\r\n            if (!idRegexValid(val['task']) || val['task'].indexOf('::') !== -1) {\r\n                if (this.debug) warn('[pocket]', '[$payload] invalid taskName, failed idRegexValid validation')\r\n                continue\r\n            }\r\n\r\n            const probeID = `${data.id}::${val['task']}`\r\n            if (type === 'update' && !initialProject && this.pocket[probeID]) {\r\n                if (val['data']) this.pocket[probeID]['data'] = val['data']\r\n                if (val['status']) this.pocket[probeID]['status'] = val['status']\r\n\r\n                // NOTE in case we update status in case it wasnt provided but new data was assigned\r\n                // status should only be changed after data is set\r\n                if (!val['status'] && val['data'] && this.pocket[probeID]['status'] === 'open') {\r\n                    this.pocket[probeID]['status'] = 'updated'\r\n                }\r\n                if (val['ref']) this.pocket[probeID]['ref'] = val['ref']\r\n                if (val['error']) this.pocket[probeID]['error'] = val['error']\r\n                if (val['campaign']) this.pocket[probeID]['campaign'] = val['campaign']\r\n\r\n                isUpdated = true\r\n                this._lastProjectID = data.id\r\n                // NOTE after update, payloadData will differ from new Probe{} data\r\n                // NOTE do not update `payloadData` it is redundant if we donot need it for anything, only update Probes{}\r\n                /// this.payloadData[data.id]['value']\r\n                // an existing project do not everride\r\n\r\n                continue\r\n            }\r\n\r\n            if (!this.payloadData[data.id]) this.payloadData[data.id] = { value: [], status: 'open', timestamp: new Date().getTime() }\r\n            const exists = this.payloadData[data.id]['value'].filter((z) => z.task.indexOf(val.task) !== -1)\r\n            if (exists.length) {\r\n                if (this.debug && !this.disableWarnings) warn('[pocket]', `the same task \"${val.task}\" already exists on the payload, you must choose uniq`)\r\n                continue\r\n            }\r\n\r\n            this.payloadData[data.id]['value'].push(val)\r\n            this.lastPocketTimestamp = this.payloadData[data.id]['timestamp']\r\n        }\r\n\r\n        // only when updating existance of Probe{}\r\n        if (type === 'update' && this.payloadData[data.id] && !initialProject) {\r\n            this.projectsCache[data.id] = 'open'\r\n            return isUpdated\r\n        }\r\n\r\n        if (this.payloadData[data.id]) {\r\n            this.lastProjectID(data.id)\r\n            this.projectsCache[data.id] = 'open' // means created project\r\n            this.distributor().setDefer(data.id)\r\n            // NOTE required in order for $projectSetAsync to retrun callback to resolve our promise\r\n            this.projectSetDispatcher(data.id).next({ projectID: data.id })\r\n            return true\r\n        } else return false\r\n    }\r\n\r\n    /**\r\n     * ### $projectSetAsync\r\n     * - usage: to call before `$project()/$payload()/$architect` were called\r\n     * - for example you have loaded same `Pocket` instance in another part of your code, now checking for it  in future before $project created. This method can `await $projectSetAsync(projectID)` and continue with already set `$project(...).$get(..).$update(..)` etc\r\n     * @param {*} projectID required, this is your `$project/$payload` id\r\n     * @returns {Promise}\r\n     */\r\n    $projectSetAsync(projectID = '') {\r\n        const self = this\r\n        projectID = this.lastProjectID(projectID, false, null)\r\n        if (this._projectSetAsync[projectID]) {\r\n            return this._projectSetAsync[projectID].promise\r\n        }\r\n        /**\r\n         * will subscribe when called the first time and set our simple promise then resolve once the `$payload` is succesfull\r\n         */\r\n        this._projectSetAsync[projectID] = sq()\r\n        this.projectSetDispatcher(projectID)\r\n            .subscribe(function (z, id) {\r\n                self._projectSetAsync[id].resolve(z)\r\n                this.del() // deletes projectSetDispatcher of self\r\n            })\r\n        return this._projectSetAsync[projectID].promise\r\n    }\r\n\r\n    /**\r\n     * @memberof probeStatusAsync\r\n     */\r\n    probeStatusAsync(probeID = '') {\r\n        const returnAs = (val) => {\r\n            this.d = val\r\n            return this\r\n        }\r\n\r\n        probeID = this.lastProbeID(probeID)\r\n        if (!probeID) return returnAs(null)\r\n        return returnAs(this.pocket[probeID].getStatusAsync)\r\n    }\r\n\r\n    /**\r\n     * @memberof $update\r\n     * @param {SetUpdateModel} dataFrom\r\n     */\r\n    update(dataFrom, mergeData = null, probeID = undefined) {\r\n        return this._setUpdate(dataFrom, mergeData, probeID, 'update')\r\n    }\r\n\r\n    /**\r\n     * @memberof $set\r\n     * @param {SetUpdateModel} dataFrom\r\n     */\r\n    _set(dataFrom, probeID = undefined) {\r\n        return this._setUpdate(dataFrom, null, probeID, 'set')\r\n    }\r\n\r\n    /**\r\n     * - declated via $get\r\n     * @memberof PocketModule\r\n     * @returns {PocketModule | ProbeModel}\r\n     */\r\n    _get(probeID = '', self = undefined) {\r\n        const returnAs = (val) => {\r\n            this.d = val\r\n            return self ? this : this.d\r\n        }\r\n\r\n        this.d = null\r\n        probeID = this.lastProbeID(probeID)\r\n        if (!probeID) return returnAs(null)\r\n        else return returnAs(this.pocket[probeID])\r\n    }\r\n\r\n    /**\r\n     * ### $activeTasks\r\n     * - list any active tasks for assigned Probes\r\n     * @param {*} payloadID optional, when set will only filter thru given job id (NOT Probe{} ID!)\r\n     */\r\n    $activeTasks(payloadID = '') {\r\n        const returnAs = (val) => {\r\n            this.d = val\r\n            return this\r\n        }\r\n\r\n        payloadID = this.lastProjectID(payloadID)\r\n        if (!objectSize(this.pocket)) return returnAs([])\r\n        let tasks = Object.entries(this.pocket).reduce((n, [probeID, probe]) => {\r\n            if (probeID.indexOf(payloadID || '') === 0 && payloadID && this.payloadData[payloadID]) n.push(probe['task'])\r\n            else if (!payloadID) n.push(probe['task'])\r\n            return n\r\n        }, [])\r\n        return returnAs(tasks)\r\n    }\r\n\r\n    /**\r\n     * @summary called by $ready() \r\n     * @memberof PocketModule\r\n     * @returns {Promise<ProbeModel[]>}\r\n     */\r\n    ready(payloadID = '') {\r\n        this.d = null\r\n\r\n        if (!this._ready[payloadID]) throw `ready[payloadID] is not set, maybe you called it before $payload()`\r\n        return this._ready[payloadID].promise\r\n    }\r\n\r\n    //\r\n    // \r\n    //   :::::: E N D : :  :   :    :     :        :\r\n    // \r\n\r\n    /**\r\n     * @summary extends  `$update` and `$set`\r\n     * @param {SetUpdateModel} dataFrom\r\n     * @param {boolean} mergeData \r\n     * @param {string} probeID \r\n     * @param {string} type \r\n     */\r\n    _setUpdate(dataFrom, mergeData = null, probeID = '', type = 'update') {\r\n        dataFrom = new SetUpdateModel(dataFrom)\r\n\r\n        const returnAs = (val) => {\r\n            this.d = val\r\n            return this\r\n        }\r\n\r\n        let id = this.lastProbeID(probeID)\r\n        if (!id) {\r\n            if (this.debug) onerror('[pocket]', `[$update] must specify id`)\r\n            return returnAs(false)\r\n        }\r\n\r\n        // TODO to remove\r\n        if (!objectSize(dataFrom)) {\r\n            if (this.debug) warn('[pocket]', `[$update] dataFrom{} must not be empty`)\r\n            return returnAs(false)\r\n        }\r\n\r\n        if (!this.pocket[id]) {\r\n            if (this.debug) onerror('[pocket]', `[$update] this.pocket with id:${id} not found`)\r\n            return returnAs(false)\r\n        }\r\n\r\n        let updated = false\r\n        this._lastProjectID = id\r\n        // reorder dataFrom, make sure if `status` exists, it is shifted to last position, so the Probe{} doent change state before other values got chance to do so, nice!\r\n\r\n        // we need to convert dataFrom{} to dataFrom[]>array to achieve this\r\n        \r\n        let dataFromArr = Object.entries(dataFrom).reduce((n, [key, value]) => {\r\n            const pos = this.probeProps.indexOf(key) // new order\r\n            if (this.probeProps[pos] === key) n.push({ inx: pos, data: { [key]: value } })\r\n            return n\r\n        }, [])\r\n\r\n        for (let inx = 0; inx < dataFromArr.length; inx++) {\r\n            if ((dataFromArr[inx] || {})['data'] === undefined) continue\r\n            const [key, value] = Object.entries(dataFromArr[inx]['data'])[0]\r\n            if (this.pocket[id][key] !== undefined) {\r\n                if (key === 'data') {\r\n                    if (mergeData === true) this.pocket[id][key] = Object.assign({}, this.pocket[id][key], value)\r\n                    else this.pocket[id][key] = value\r\n                }\r\n                if (key === 'status' || key === 'ref' || key === 'error' || key === 'campaign') this.pocket[id][key] = value\r\n                updated = true\r\n                continue\r\n            } else {\r\n                if (this.debug) warn('[pocket]', `[$update] not a valid prop/value: { ${key}:${this.pocket[id][key]} }`)\r\n            }\r\n        }\r\n        // when setting new data, using `$set()` we should clear any cached Probes and realated data\r\n        if (updated && type === 'set') {\r\n            this.clearStoreTransfers(id)\r\n            if (this.$transfer_lastID === id) this.$transfer_lastID = ''\r\n            if (this._$cached_data[id]) delete this._$cached_data[id]\r\n        }\r\n\r\n        // if(updated && type==='update') { }\r\n        return returnAs(updated)\r\n    }\r\n\r\n    /**\r\n     * - sets defer for `$ready()` initially after calling payload\r\n     * @param {*} id required\r\n     */\r\n    setDefer(id) {\r\n        id = validID(id)\r\n        if (!id) throw 'id must be set'\r\n\r\n        if (!this._ready[id]) this._ready[id] = sq()\r\n\r\n        if (!objectSize(this.pocket)) {\r\n            const msg = `[setDefer] probe is empty, so nothing set, id:${id}`\r\n            if (this.debug) onerror('[pocket]', msg)\r\n            this._ready[id].reject(msg)\r\n            return undefined\r\n        }\r\n\r\n        const pocketSet = Object.values(this.pocket).filter((z) => z.id.indexOf(id) !== -1)\r\n        if (!pocketSet.length) {\r\n            const msg = `[setDefer] no pocketSet found for id:${id} `\r\n            if (this.debug) onerror('[pocket]', msg)\r\n            this._ready[id].reject(msg)\r\n            return undefined\r\n        }\r\n\r\n        try {\r\n            const userOutput = (pock) => {\r\n                const output = {}\r\n                if (!isObject(pock)) return null\r\n                for (let i = 0; i < this.probeProps.length; i++) {\r\n                    const prop = this.probeProps[i]\r\n                    if (pock[prop] !== undefined && pock[prop] !== null) output[prop] = pock[prop]\r\n                }\r\n                return output\r\n            }\r\n            /**\r\n             * IMPORTANT:\r\n             * when our pocketSet for each this.pocket[id] is marked 'complete'\r\n             * `Probe().resolve(...)` is called, and Promise.all is waiting for `pocketSet` to complete\r\n             */\r\n            Promise.all(pocketSet.map((z) => z.sq.promise)).then((z) => {\r\n                const output = z.map((p) => userOutput(p.probe)).filter((n) => !!n)\r\n                this._ready[id].resolve(output)\r\n            },\r\n            (err) => {\r\n                // should unlikely happen since we dont have any rejects set\r\n                onerror('[pocket]', `[setDefer] Promise.all`, err)\r\n            })\r\n\r\n            return true\r\n        } catch (err) {\r\n            onerror('[pocket]', `[setDefer]`, err)\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * - distribute payloadData, each to `new Probe()`\r\n     */\r\n    distributor() {\r\n        for (let [key, el] of Object.entries(this.payloadData)) {\r\n            if (this.lastPocketTimestamp > el['timestamp']) continue // no new entries\r\n\r\n            // omit done\r\n            if (el.status === 'complete' || el.status === 'send' || el.status === 'error') continue\r\n\r\n            for (let value of el.value.values()) {\r\n                const pl = { id: key, ...value }\r\n                const pocketSet = this.setProbe(pl)\r\n                if (!pocketSet) onerror('[pocket]', `probe for id:${key} already exists`)\r\n            }\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * - every new probe `id` must be: format `id:::taskName`\r\n     * required: `{id,task}`\r\n     * optional: `{campaign}`\r\n     * @param {*} props\r\n     */\r\n    setProbe(props = {}) {\r\n        if (!props.id || !props.task) throw 'id and task both must be set'\r\n        if (!validID(props.id)) throw 'props.id not valid'\r\n\r\n        const uid = `${props.id}::${props.task}`\r\n        if (this.pocket[uid]) {\r\n            if (this.debug) log('[pocket]', `[setProbe] probe: ${uid} already set`)\r\n            return null\r\n        }\r\n        try {\r\n            props.id = uid\r\n            const emitter = this.dispatcher !== null ? this._emit.bind(this) : null\r\n            let opts = {\r\n                withDataBank: this.withDataBank,\r\n                disableWarnings: this.disableWarnings, // disable some less relevant warning messages\r\n                onChange: this._onChange,\r\n                emitter,\r\n                completeOnNull: this.completeOnNull\r\n            }\r\n\r\n            const Probe = this.Probe\r\n            const p = new Probe(props, opts, this.debug)\r\n            this.pocket[uid] = p\r\n        } catch (err) {\r\n            onerror('[pocket]', err)\r\n            return null\r\n        }\r\n        return this.pocket[uid]\r\n    }\r\n\r\n    /**\r\n     * UPDATE\r\n     * @deprecated using Imports \r\n     * set new probe model\r\n     * - every new task has a set of requirements. Once status is `complete` and data available, probe sends a dispatch with probe information `(if opts.dispatcher===true)`.\r\n     * methods:`{get,all}` props: `{id,data,task,status,campaign}`\r\n     *\r\n     * @memberof Probe.js module\r\n     */\r\n    // Probe(props = {}, opts = {}) {\r\n    //     return new NewProbe(props, opts, this.debug)\r\n    // }\r\n\r\n    /**\r\n     * - emit extends with `Dispatcher` to be used by every new Probe{} as an emitter `(if opts.dispatcher===true)`\r\n     * @param {*} obj required\r\n     */\r\n    _emit(obj) {\r\n        if (!obj) return null\r\n        if (!this.dispatcher) return false\r\n        try {\r\n            this.dispatcher.next(obj)\r\n            return true\r\n        } catch (err) {\r\n            onerror('[pocket]', `[_emit] dispatcher did not emit`)\r\n            return false\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = PocketModule\r\n","/**\r\n * ### PocketLibs\r\n * - Top of the stack class of `PocketModule`, all `opt` initial `properties` are set here\r\n */\r\n\r\nconst { objectSize, warn, onerror, dispatcher, validID, copy, log, isString } = require('x-utils-es/umd')\r\nconst Imports = require('./Imports')\r\nconst { validProbe, validProjectID, idRegexValid } = require('../utils')\r\nclass PocketLibs extends Imports {\r\n\r\n    /**\r\n     *\r\n     * @param {Object} opts available options\r\n     * @param {boolean} opts.async  when set, allow $payload(`data`) to be async object\r\n     * @param {boolean} opts.onChange loads watch for changes Probe asset\r\n     * @param {boolean} opts.completeOnNull Allow Probe to complete even if data\r\n     * @param {boolean} opts.disableWarnings disable some less relevant warning messages\r\n     * @param {boolean} opts.withDataBank\r\n     * @param {number} opts.deleteWithDelay\r\n     * @param {any} opts.dispatcher, when set to true, loads external library `Dispatcher`\r\n     * @param {*} debug optional\r\n     */\r\n    // @ts-ignore\r\n    constructor(opts, debug) {\r\n        super()\r\n        this.debug = debug || false\r\n        this.async = (opts || {}).async || null\r\n        this._onChange = (opts || {}).onChange || null // loads watch for changes Probe asset\r\n        this.completeOnNull = (opts || {}).completeOnNull || null // Allow Probe to complete even if data is null\r\n        this.disableWarnings = (opts || {}).disableWarnings \r\n        this.withDataBank = (opts || {}).withDataBank || false\r\n        // when set enables dispatcher to communicate directly with `probe.js`\r\n        this.dispatcher = (opts || {}).dispatcher ? dispatcher() : undefined\r\n        this.pocket = {} // example this.pocket[`abc::taskName`] returns Probe{} Instance\r\n\r\n        /**\r\n         * @returns `{ [id]:{ value: [], status: 'open', timestamp: new Date().getTime() },... `\r\n         */\r\n        this.payloadData = {} // each payload by id\r\n\r\n        this.lastPocketTimestamp = 0\r\n        this._lastProjectID = null // last cached reference\r\n        this._lastProbeID = null // last cached reference\r\n        this._$cached_data = {\r\n            /** id:{} */\r\n        } // stores last captured data when calling `$data(..)`\r\n        this.$transfer_lastID = '' // set when we call `$transfer()` and reset after `$to()`\r\n\r\n        /**\r\n         * @return `{[id]:[...probes],...}` as promise\r\n         */\r\n        this._ready = {} // collect all ready example: `{id:Promise}`\r\n\r\n        this._ready_method_set = {\r\n            /** [id]:true */\r\n        } // ignore subsequent calls to $ready method\r\n        this.d = undefined // NOTE user reference data, carefull when using selectors from previous target, always access last\r\n        this._projectSet = {\r\n            /** projectID:promise */\r\n        }\r\n        this._transferCached = [\r\n            /** {timestamp,fromProbeID,data} */\r\n        ]\r\n        this._projectSetDispatcher = {\r\n            /** id:dispatcher */\r\n        }\r\n        this._projectSetAsync = {\r\n            /** id:SQ */\r\n        } // collect all $projectSetAsync promisses\r\n        this._lastFilterList = {\r\n            /** id:[probe references only] */\r\n        }\r\n        this.projectsCache = {\r\n            /** [id]:'open/complete' */\r\n        } // keep reference of completed projects, this variable is never purged\r\n        this.deleteWithDelay = (opts || {}).deleteWithDelay || 1000 // after project is completed and $ready(..) is resolved set delay to when it should be deleted\r\n        // this.createArchitect() // only when pocketInstance is set\r\n    }\r\n\r\n    // NOTE abolished functional class, doesnt work well with es6 class\r\n    // createArchitect() {\r\n    //     if (this.architect && !this[\"architect_set\"]) {\r\n    //         try {\r\n    //             const Architect = require('./Pocket.architect')()\r\n    //             Architect.prototype = Object.create(this)\r\n    //             Architect.prototype.constructor = Architect\r\n    //             Object.assign(this, new Architect())\r\n    //         } catch (err) {\r\n    //             console.log(`[createArchitect] error`, err)\r\n    //         }\r\n\r\n    //         this[\"architect_set\"] = true\r\n    //     }\r\n    // }\r\n\r\n    /**\r\n     * - return latest Probe by reference from `this._lastFilterList[projectID]`\r\n     * @param {*} projectID\r\n     */\r\n    // getProbesByFilterRef(projectID) {\r\n    //     if (!projectID) return []\r\n    //     if (!this._lastFilterList[projectID]) return []\r\n    //     return this._lastFilterList[projectID].reduce((n, ref, inx) => {\r\n    //         if (ref.id && ref.isNONE === undefined && this.pocket[ref.id]) n.push(this.pocket[ref.id])\r\n    //         else if (this.pocket[ref.id]) n.push({ id: ref.id, isNONE: true })\r\n    //         return n\r\n    //     }, []).filter(z => !!z)\r\n    // }\r\n\r\n    /**\r\n     * ### projectSetDispatcher\r\n     * - create new dispather to act as a callback for setting new projects in future. NOTE once project is created and using $architect /$project/$payload to update will not recreate `projectSetDispatcher`\r\n     * - works with `$projectSetAsync`\r\n     * @param {*} projectID\r\n     * @returns `dispatcher`\r\n     */\r\n    projectSetDispatcher(projectID) {\r\n        if (!projectID) {\r\n            if (this.debug) onerror(`[projectSetDispatcher] projectID must be set`)\r\n            return null\r\n        }\r\n        if (this._projectSetDispatcher[projectID]) return this._projectSetDispatcher[projectID]\r\n        if (!this._projectSetDispatcher[projectID]) this._projectSetDispatcher[projectID] = dispatcher(projectID)\r\n        return this._projectSetDispatcher[projectID]\r\n    }\r\n\r\n    /**\r\n     * @param {*} projectID\r\n     * @returns array [Probe{},...] of selected project\r\n     */\r\n    projectProbeList(projectID) {\r\n        if (!projectID) return []\r\n        return Object.entries(this.pocket)\r\n            .filter(([id]) => id.indexOf(projectID) === 0)\r\n            .map(([id, probe]) => probe)\r\n    }\r\n\r\n    /**\r\n     * ### clearStoreTransfers\r\n     * - clear any pending transfers\r\n     * @param {*} projectID required\r\n     */\r\n    clearStoreTransfers(projectID = '') {\r\n        if (!projectID) return\r\n        let cleared = false\r\n        if (this._transferCached.length) {\r\n            this._transferCached.forEach((element, i) => {\r\n                const { fromProbeID } = element || {}\r\n                if (!fromProbeID) return\r\n                if (fromProbeID.indexOf(projectID) !== -1) {\r\n                    this._transferCached.splice(i, 1)\r\n                    cleared = true\r\n                    if (this.debug) log('[pocket]', `[clearStoreTransfers] transferCached for probeID: ${fromProbeID} has been removed`)\r\n                }\r\n            })\r\n        }\r\n        return cleared\r\n    }\r\n    /**\r\n     * ### storeTransfers\r\n     * - caches pending transfers when using `$transfer` with `$to()`\r\n     * - access last data by timestamp\r\n     * @param {*} fromProbeID  required\r\n     * @param {*} data required\r\n     */\r\n    storeTransfers(fromProbeID, data) {\r\n        this._transferCached.push({ timestamp: new Date().getTime(), fromProbeID, data })\r\n        return this._transferCached\r\n    }\r\n\r\n    /**\r\n     * ### accessLastValidTransfer\r\n     * returns latest transfer that is inRange from `fromAverageTimeHasPast` in `ms` vs current Date.getTime\r\n     * - removes _transferCached that was found\r\n     */\r\n    accessLastValidTransfer(fromAverageTimeHasPast = 100) {\r\n        if (!this._transferCached.length) return {}\r\n\r\n        this._transferCached.sort((a, b) => a.timestamp - b.timestamp)\r\n        const transferCachedCopy = copy(this._transferCached)\r\n\r\n        const coundCache = transferCachedCopy.reduce((n, el, i) => {\r\n            const { timestamp } = el\r\n\r\n            // calculate max wait between transfers, so if we have timeout we can only wait as long as `fromAverageTimeHasPast`\r\n            const currentOffset = new Date().getTime() + fromAverageTimeHasPast\r\n            const diff = currentOffset - timestamp - fromAverageTimeHasPast\r\n            const timeInRange = currentOffset > timestamp && diff <= fromAverageTimeHasPast\r\n            if (timeInRange) {\r\n                n = el\r\n                // delete found cache\r\n                this._transferCached.splice(i, 1)\r\n            }\r\n            return n\r\n        }, {})\r\n\r\n        if (!objectSize(coundCache)) return {}\r\n        else return coundCache\r\n    }\r\n\r\n    /**\r\n     * ### selectByTask\r\n     * - works with `PocketSelectors class`, when `::taskNames, taskName` are specified, extracts full probeID by matching previous pointer reference and updates `lastProbeID()`\r\n     * - returns valid probeID or null\r\n     * @param {*} taskOrProbeID  required, but optional\r\n     */\r\n    selectByTask(taskOrProbeID = '', updateLastProbeID = null) {\r\n        taskOrProbeID = !isString(taskOrProbeID) ? '' : taskOrProbeID\r\n        if (!idRegexValid(taskOrProbeID) && taskOrProbeID) return null\r\n        if (taskOrProbeID.indexOf(':') > 0 && !this.pocket[taskOrProbeID]) {\r\n            if (this.debug) warn('[pocket]', `[selectByTask] when using '::' prefix selector, it should come at 0 index`)\r\n            return null\r\n        }\r\n\r\n        if (taskOrProbeID.split(':').length > 3 || taskOrProbeID.split(':').length === 2) {\r\n            if (this.debug) warn('[pocket]', `[selectByTask] wrong taskName :${taskOrProbeID}, allowed prefix is '::taskName'`)\r\n            return null\r\n        }\r\n\r\n        if (updateLastProbeID) this.lastProbeID(taskOrProbeID, true) // if a match we receive below updated `_lastProbeID`\r\n        if (this.pocket[taskOrProbeID]) {\r\n            if (updateLastProbeID) this.lastProbeID(taskOrProbeID)\r\n            return taskOrProbeID // we have a valid ref so use that\r\n        }\r\n\r\n        /**\r\n         * - generate valid probeID `${projectID}::${probeTaskName}` //\r\n         */\r\n        const dynamicProbeID = (name) => {\r\n            const n = name.split('::')[1] || name // in case we are using prefixed taskName, example \"::cocacola\"\r\n            const matchByProbeID = (this._lastProbeID || '').indexOf(n) > 0\r\n            if (matchByProbeID && n) return this._lastProbeID\r\n            else if (this._lastProjectID && n) return this._lastProjectID + `::` + n\r\n            return this._lastProbeID\r\n        }\r\n\r\n        const newProbeID = dynamicProbeID(taskOrProbeID)\r\n        if (!newProbeID) {\r\n            if (this.debug) warn('[pocket]', `[selectByTask] newProbeID was not found from taskOrProbeID: ${taskOrProbeID}`)\r\n        } else if (updateLastProbeID) this.lastProbeID(newProbeID)\r\n        return newProbeID\r\n    }\r\n\r\n    /**\r\n     * ### lastProjectID\r\n     * - every project is a job initiated by payload, so `payload.id === lastProjectID()`\r\n     * @param type strictly validate against scoped projecjID\r\n     */\r\n    lastProjectID(projectID = '', debug = null, type = 'strict') {\r\n        if (!projectID && this._lastProjectID) projectID = this._lastProjectID\r\n        if (projectID) projectID = validProjectID(projectID)\r\n        if (projectID && this.payloadData[projectID]) this._lastProjectID = projectID\r\n        if (!this.payloadData[projectID] && type === 'strict') return null\r\n        if (!projectID) return null\r\n        if (projectID && !this._lastProjectID) this._lastProjectID = projectID\r\n        return projectID\r\n    }\r\n\r\n    /**\r\n     * ### lastProbeID\r\n     * - return last reference to probeID\r\n     * - cache with `_lastProbeID`\r\n     * @param {*} probeID\r\n     */\r\n    lastProbeID(probeID = '', debug = null) {\r\n        if (!probeID && this._lastProbeID) probeID = this._lastProbeID\r\n        if (probeID) probeID = validProbe(probeID)\r\n        if (probeID && this.pocket[probeID]) this._lastProbeID = probeID\r\n        if (!probeID) return null\r\n        if (!this.pocket[probeID]) return null\r\n        return probeID\r\n    }\r\n \r\n    /**\r\n     * ### dataPropSelector\r\n     * - works with `$data()` and `$cached()` user selectors\r\n     * - refer to `PocketSelectors` module\r\n     * @param {*} probeID required\r\n     * @param {*} dataProp optional\r\n     * @param {*} self optional\r\n     * @param {*} probeData{} required our referencing probeData{}\r\n     */\r\n    dataPropSelector(type = 'data()', probeID = '', dataProp = {}, self = false, probeData = {}) {\r\n        let selectedData\r\n        /**\r\n         * NOTE if calling via `$cached()`,  `probeData` already comes as `this._$cached_data` so dont need to cache  it again!\r\n         */\r\n        try {\r\n            /**\r\n             * NOTE IMPORTANT\r\n             * assembly order: `dataProp < probeData > selectedData`\r\n             * if are asking for multiple, example `selectedData:{a,b,value:1111}`, will return those available\r\n             * as an Object{}. But if asking for only 1 `selectedData:{value:1111}`, will return the value `11111`, only because we know what we asked for initially\r\n             */\r\n            selectedData = Object.entries(dataProp).reduce((n, [k, val], i) => {\r\n                if (probeData[k] !== undefined) n[k] = probeData[k]\r\n                return n\r\n            }, {})\r\n\r\n            if (!objectSize(selectedData)) selectedData = undefined\r\n\r\n            // selct only value if `dataProp` === `selectedData` is size ( 1 + 1 === 2 )\r\n            if (objectSize(selectedData) + objectSize(dataProp) === 2) selectedData = Object.values(selectedData).shift()\r\n\r\n            // if coming from `$data()` we cache our data\r\n            if (type === 'data()') this._$cached_data[probeID] = selectedData\r\n            return self ? this : selectedData\r\n        } catch (err) {\r\n            if (this.debug) warn('[pocket]', `[$data] no dataProp found on probeID: ${probeID}`)\r\n            if (type === 'data()') this._$cached_data[probeID] = selectedData\r\n            return self ? this : selectedData\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ### probeProps\r\n     * - `each probe props that can be available and send on ready`\r\n     * - `order is important, keep 'status' last`\r\n     * - only updatable props are: `'campaign', 'data', 'error', 'ref', 'status'(limited)`\r\n     */\r\n    get probeProps() {\r\n        return ['campaign', 'data', 'task', 'ref', 'error', 'id', 'status']\r\n    }\r\n}\r\n\r\nmodule.exports = PocketLibs\r\n","class Imports {\r\n\r\n    get Probe() {\r\n        return require('../Probe/Probe')\r\n    }\r\n}\r\n\r\nmodule.exports = Imports\r\n"],"sourceRoot":""}