!function(t,e){for(var r in e)t[r]=e[r]}(window,function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(t,e,r){(function(r,n){var o,i,a,c;c=function(t,e){"use strict";var o=Number.prototype,i=String.prototype;function a(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){a(s,n,o,i,c,"next",t)}function c(t){a(s,n,o,i,c,"throw",t)}var s=t.apply(e,r);i(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0});var s=()=>{try{if("test"===(r.env||{}).NODE_ENV)return!1;if(window)return!0}catch(t){return!1}},u=function(t){void 0===t&&(t="");try{if(s())return window.xUtilsConfig||(window.xUtilsConfig={}),window.xUtilsConfig?"off"===window.xUtilsConfig.logging?"off":(window.xUtilsConfig[t]?window.xUtilsConfig[t]:"on").toString():"on"}catch(t){}try{return n.xUtilsConfig||(n.xUtilsConfig={}),n.xUtilsConfig?"off"===n.xUtilsConfig.logging?"off":(n.xUtilsConfig[t]?n.xUtilsConfig[t]:"on").toString():"on"}catch(t){}return"on"},l=()=>{try{if(s())return"on"===(window.xUtilsConfig||{}).logging||void 0===(window.xUtilsConfig||{}).logging}catch(t){}try{return"on"===(n.xUtilsConfig||{}).logging||void 0===(n.xUtilsConfig||{}).logging}catch(t){}return!0},f=function(t){if(void 0===t&&(t=void 0),"function"!=typeof t)return!1;try{var e=t();return!0===e||0<e}catch(t){return!1}},h=function(t,e){void 0===t&&(t=""),e.length||(e[0]="");var r=0===e.filter(t=>"string"==typeof t||void 0===t).length?"%o":"";"log"===t&&(e=[].concat("[90m[log][0m[2m"+r+" ",e,"[0m")),"debug"===t&&(e=[].concat("[90m[debug][0m[32m"+r+" ",e,"[0m")),"warn"===t&&(e=[].concat("[90m[warning][0m[1m"+r+" ",e,"[0m")),"alert"===t&&(e=[].concat("[90m[alert][0m[33m"+r+" ",e,"[0m")),"attention"===t&&(e=[].concat("[90m[attention][0m[36m"+r+" ",e,"[0m"));try{return void(window&&console.log.apply(null,e))}catch(t){}console.log.apply(null,e)},p=function(){if(l()&&"off"!==u("log")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return h("log",e)}},d=function(){if(l()&&"off"!==u("warn")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return h("warn",e)}},y=function(){if(l()&&"off"!==u("alert")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return h("alert",e)}},v=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(l()&&"off"!==u("error")&&"off"!==u("onerror")){e.length||(e[0]="");var n=0===e.filter(t=>"string"==typeof t||void 0===t).length,o=n?"%o":"";try{if(s())return e=[].concat("[31m[error][0m[31m"+o+" ",e,"[0m"),void console.error.apply(null,e)}catch(t){}e=[].concat("[41m[error][0m[31m"+o+" ",e,"[0m"),console.error.apply(null,e)}},g=v,b=function(t){return void 0===t&&(t=void 0),"function"==typeof t},m=t=>"bigint"==typeof t,_=function(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=void 0),(!b(e)||f(e))&&!m(t)&&!!t&&Array.prototype===t.__proto__},k=function(t,e){void 0===e&&(e=!0);var r=r=>e?typeof t:r||typeof t,n=e=>e.prototype===t.prototype;try{return"symbol"==typeof t?{type:r(),value:0,primitiveValue:Symbol("")}:void 0===t?{type:r(),value:0,primitiveValue:void 0}:"boolean"==typeof t?{type:r(),value:+t,primitiveValue:Boolean()}:"bigint"==typeof t&&"object"==typeof Object(t)?{type:r(),value:1,primitiveValue:BigInt("")}:null===t?{type:r("null"),value:0,primitiveValue:{}}:t.__proto__===Date.prototype||n(Date)?{type:r("date"),value:1,primitiveValue:new Date}:i===t.__proto__?{type:r(),value:t.length,primitiveValue:String()}:Array.prototype===t.__proto__||n(Array)?{type:r("array"),value:(t||[]).length,primitiveValue:[]}:Promise.prototype===(t||"").__proto__||n(Promise)?{type:r("promise"),value:1,primitiveValue:Function}:Function.prototype===t.__proto__||n(Function)?{type:r(),value:1,primitiveValue:Function}:Object.prototype===t.__proto__||n(Object)?{type:r(),value:Object.keys(t).length,primitiveValue:{}}:Error.prototype===t.__proto__||n(Error)?{type:r("error"),value:Object.keys(t).length,primitiveValue:Error()}:t.__proto__===o||n(Number)?isNaN(t)?{type:r("NaN"),value:0,primitiveValue:Number()}:{type:r(),value:t,primitiveValue:Number()}:0==0<=+t?{type:typeof t,value:+t,primitiveValue:void 0}:{type:typeof t,value:0,primitiveValue:void 0}}catch(t){return g(t),{}}},j=t=>Error.prototype===(t||"").__proto__,O=t=>{if(void 0===t)return!1;if(null===t)return!1;if(!0===t||!1===t)return!0;try{if(t instanceof Boolean)return!0}catch(t){}return!1},w=t=>null===t,P=t=>void 0===t,S=t=>{if(m(t))return!1;try{if(t instanceof Number)return!0}catch(t){}return!(null==t||""===t)&&t.__proto__===o},D=function(t){void 0===t&&(t=void 0);try{if(1==(void 0!==t.promise&&"function"==typeof t.resolve&&"function"==typeof t.reject&&"function"==typeof t.fulfill&&"function"==typeof t.notify))return!0}catch(t){}return!1},x=t=>{try{return"SimpleQ"===t.entity}catch(t){return!1}},I=t=>{if(D(t))return!0;try{if(t instanceof Promise)return!0}catch(t){}return!1},C=function(t,e){if(void 0===t&&(t=void 0),void 0===e&&(e=void 0),b(e)&&!f(e))return!1;if(m(t))return!1;if(isNaN(t)&&"number"==typeof t)return!1;if("function"==typeof t)return!1;if(!isNaN(+t)||void 0===t)return!1;if(t.__proto__===[].__proto__)return!1;if((Object.prototype===t.__proto__||Error.prototype===t.__proto__)&&t instanceof Object)return!0;if(void 0!==t.__proto__)try{return t instanceof Object}catch(t){return!1}return!!t.prototype},A=function(t){var e;return void 0===t&&(t=[]),(e=t.filter((t,e,r)=>r.indexOf(t)===e))instanceof Array?e:[]},$=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=void 0),(!b(e)||f(e))&&!!t&&void 0!==t.prototype},T=function(t){void 0===t&&(t=/\\/);try{return t instanceof RegExp}catch(t){return!1}},E=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e=void 0),b(e)&&!f(e))return!1;if(!t)return!1;if(_(t))return!1;if(t.__proto__&&!$(t))try{return t.__proto__ instanceof Object}catch(t){return!1}return!1},B=function(t){return void 0===t&&(t={}),t&&isNaN(+t)&&(E(t)||Object.prototype===t.__proto__||Error.prototype===t.__proto__)?Object.keys(t).length:0},R=function(t){return void 0===t&&(t=void 0),null==t||!1===t&&"boolean"==typeof t||(!0!==t||"boolean"!=typeof t)&&!("number"==typeof t&&0<t)&&(i===t.__proto__?1>t.length:Array.prototype===t.__proto__?0===(t||[]).length:Promise.prototype!==(t||{}).__proto__&&"function"!=typeof t&&(Object.prototype===t.__proto__||E(t)?0===Object.keys(t).length:Error.prototype!==t.__proto__&&(void 0!==t&&t.__proto__===o?!!isNaN(t)||0>=t:0==0<+t||!t&&!1)))},L=function(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=void 0),(!b(e)||f(e))&&null!=t&&"boolean"!=typeof t&&(""===t||i===t.__proto__)},N=t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return k(t).primitiveValue}};e.disableLogging=()=>{try{if(s())return window.xUtilsConfig?window.xUtilsConfig.logging="off":window.xUtilsConfig={logging:"off"},!0}catch(t){}try{return n.xUtilsConfig?n.xUtilsConfig.logging="off":n.xUtilsConfig={logging:"off"},!0}catch(t){return!1}},e.resetLogging=()=>{try{if(s())return window.xUtilsConfig?window.xUtilsConfig.logging="on":window.xUtilsConfig={logging:"on"},!0}catch(t){}try{return n.xUtilsConfig?n.xUtilsConfig.logging="on":n.xUtilsConfig={logging:"on"},!0}catch(t){return!1}},e.loggerSetting=function(t,e){if(void 0===t&&(t="log"),void 0===e&&(e="off"),!["log","warn","onerror","error","alert","attention","debug","stack","errorTrace"].includes(t)||!t)return!1;if(!["on","off"].includes(e)||!e)return!1;"onerror"===t&&(t="error");try{if(s())return window.xUtilsConfig?window.xUtilsConfig[t]=e:window.xUtilsConfig={[t]:e},!0}catch(t){}try{return n.xUtilsConfig?n.xUtilsConfig[t]=e:n.xUtilsConfig={[t]:e},!0}catch(t){return!1}},e.checkLoggerSetting=u,e.stack=function(t,e){if(void 0===e&&(e=!1),l()&&"off"!==u("stack")){var r=new Error(JSON.stringify(t)).stack.split("(");r.splice(1,1);var n=r[0].split(/\n/)[0].replace("Error","[STACK TRACE]");return r.splice(0,1),r.unshift(n),void(e?console.log(r):console.log.apply(null,r))}},e.errorTrace=function(t,e){if(void 0===e&&(e=!1),l()&&"off"!==u("errorTrace")){var r=new Error(JSON.stringify(t)).stack.split("(");r.splice(1,1);var n=r[0].split(/\n/)[0].replace("Error","[ERROR]");return r.splice(0,1),r.unshift(n),void(e?console.error(r):console.error.apply(null,r))}},e.loop=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=function(t){void 0===t&&(t=0)}),"function"!=typeof e||"number"!=typeof t)return[];for(var r,n=[],o=0;o<Array(t).length;o++){r=e.apply(this,[o]);try{if(r&&Object.entries(r).length&&r.break)break}catch(t){}n.push(r)}return n},e.isFalse=t=>{if(null===t)return!0;if(void 0===t)return!0;if("number"==typeof t&&1>t)return!0;if("boolean"==typeof t&&!1===t)return!0;try{if(t instanceof Boolean)return!1===t.valueOf()}catch(t){}return!1},e.isTrue=t=>{if(null===t)return!1;if(void 0===t)return!1;if("number"==typeof t&&0<t)return!0;if("boolean"==typeof t&&!0===t)return!0;try{if(t instanceof Boolean)return!0===t.valueOf()}catch(t){}return!1},e.isBoolean=O,e.isNull=w,e.isUndefined=P,e.isEmpty=t=>!j(t)&&!k(t).value,e.head=function(t){return void 0===t&&(t=[]),Array.prototype===(t||null).__proto__?t.flat().shift():void 0},e.last=function(t){return void 0===t&&(t=[]),t&&Array.prototype===t.__proto__?t[t.length-1]:void 0},e.timer=function(t,e){if(void 0===t&&(t=()=>{}),void 0===e&&(e=0),"function"==typeof t){e="number"==typeof e&&0<=e?e:0;var r=setTimeout(()=>{t(),clearTimeout(r)},e)}},e.interval=function(t,e,r){if(void 0===t&&(t=()=>{}),void 0===e&&(e=0),void 0===r&&(r=0),"function"!=typeof t)return null;e="number"==typeof e&&0<=e?e:0,r="number"==typeof r&&0<=r?r:0;var n=0,o=setInterval(()=>(t(),r<=n?clearInterval(o):void(n+=e)),e)},e.sq=()=>{class t extends Promise{constructor(e){void 0===e&&(e=function(t,e){void 0===t&&(t=()=>{}),void 0===e&&(e=()=>{})}),t._promise=super(e)}resolve(e){var r=t._resolve;return r instanceof Function?r(e):v("[SimpleQ][resolve]","not callable"),this}reject(e){var r=t._reject;return r instanceof Function?r(e):v("[SimpleQ][reject]","not callable"),this}get promise(){var e=t._promise;return e instanceof Promise?e:void 0}}var e=new t((e,r)=>{t._resolve=e,t._reject=r});if(e.__proto__.entity="SimpleQ",e instanceof Promise&&e instanceof t)return e;throw"sq() not a valid Promise ?"},e.validID=function(t){return void 0===t&&(t=""),t?(t||"").toString().toLowerCase().replace(/\s/g,""):""},e.isBigInt=m,e.isNumber=S,e.stringSize=function(t){return void 0===t&&(t=""),null!=t&&t.__proto__===i?t.length:0},e.cancelPromise=t=>{var{defer:e={},checkEvery:r=500,maxWait:n=9500,cbErr:o=(t=>{var{error:e,defer:r,id:n}=t}),message:i="taken too long to respond",logging:a=!1,id:c}=t;if(!I(e)&&!D(e)||"function"!=typeof o||!n)return v("[cancelPromise]","{defer,maxWait,cbErr} must be provided"),Promise.reject("{defer,maxWait,cbErr} must be provided");var s,u=r||500;n=n||1;var l=0,f=setInterval(()=>{if(s)return clearInterval(f);if(l>n){var t={error:i+", time: "+l,defer:e,id:c};try{o.apply(t,[t]),e.reject(i+", time: "+l)}catch(t){v("[cancelPromise]",t)}return clearInterval(f)}a&&(c?p("-- processing: ",c):y("-- processing ")),l=u+l},u),h=t=>t.then(t=>(s=!0,t),t=>(s=!0,Promise.reject(t)));return x(e)||I(e)&&!D(e)?h(e):D(e)?h(e.promise):Promise.reject("[cancelPromise], Supplied {defer} is not a promise")},e.shuffle=function(t){var e=Math.floor;if(void 0===t&&(t=[]),!_(t))return[];for(var r=t.length-1;0<r;r--){var n=e(Math.random()*r),o=t[r];t[r]=t[n],t[n]=o}return t},e.selectiveArray=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=[]),!_(e))return[];if(!e.length)return[];if(!_(t))return e;if(!t.length)return e;t=A(t);for(var r,n=[],o=function t(e,r,n){var o;if(void 0===n&&(n=0),e&&_(e)&&e.length){try{if(void 0!==r[e[n]])return o=r[e[n]],e[++n]?t(e,o,n):o}catch(t){console.log(t.toString())}return o}},i=0;i<e.length;i++)if(r=e[i],C(r)){for(var a,c=void 0,s=[],u=0;u<t.length;u++){a=(t[u]||"").split(".");try{c=o(a,r,0),s.push(c)}catch(t){}}t.length===s.length&&s.filter(t=>void 0===t).length===t.length&&(s=s.filter(t=>!!t)),s.length?n.push([].concat(s)):void 0!==c&&n.push(c)}else n.push([r]);return n},e.hasPrototype=$,e.hasProto=function(t,e){if(void 0===e&&(e=void 0),b(e)&&!f(e))return!1;try{return void 0!==t.__proto__}catch(t){return!1}},e.objectSize=B,e.isString=L,e.isFunction=b,e.copyBy=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e=[]),!C(t))return{};var r=[].concat(e).reduce((e,r)=>(void 0!==t[r]&&(e[r]=t[r]),e),{});try{return JSON.parse(JSON.stringify(r))}catch(t){return{}}},e.copyDeep=t=>{if(_(t))return t.map(t=>N(t));if(C(t))return Object.entries(t).reduce((t,e)=>{var[r,n]=e;return t[r]=C(n)?Object.assign({},N(n)):n,t},{});try{return JSON.parse(JSON.stringify(t))}catch(e){return k(t).primitiveValue}},e.delay=function(t){return void 0===t&&(t=100),"number"==typeof t&&0<=t?new Promise(e=>{var r=setTimeout(()=>{clearTimeout(r),e(!0)},t)}):Promise.resolve(!0)},e.someKeyMatch=function(t,e,r){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===r&&(r=void 0),b(r)&&!f(r))return!1;if(!t||Object.prototype!==t.__proto__)return!1;if(!e||Object.prototype!==e.__proto__)return!1;var n=Object.keys(t),o=Object.keys(e);return n.length>=o.length?0<n.filter(t=>o.filter(e=>e===t).length).length:0<o.filter(t=>n.filter(e=>e===t).length).length},e.exactKeyMatch=function(t,e,r){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===r&&(r=void 0),b(r)&&!f(r))return!1;if(!t||Object.prototype!==t.__proto__)return!1;if(!e||Object.prototype!==e.__proto__)return!1;var n=Object.keys(t),o=Object.keys(e);return n.length>=o.length?n.filter(t=>o.filter(e=>e===t).length).length===n.length:o.filter(t=>n.filter(e=>e===t).length).length===o.length},e.trueVal=function(t){return void 0===t&&(t=[]),t&&Array.prototype===t.__proto__?[].concat(t).filter(t=>!0!==R(t)):[]},e.trueValDeep=function(t){return void 0===t&&(t=[]),t&&Array.prototype===t.__proto__&&t.length?[].concat(t).map(t=>{var e=k(t,!1);return"array"===e.type&&0<e.value?t.map(t=>0<k(t,!1).value?t:null).filter(t=>!!t):"object"===e.type&&e.value?Object.entries(t).reduce((t,e)=>{var[r,n]=e;return 0<k(r,!1).value&&(t[r]=n),t},{}):0<e.value?t:null}).filter(t=>!!t):[]},e.trueProp=function(t){return void 0===t&&(t={}),t&&Object.prototype===t.__proto__?Object.entries(t).reduce((t,e)=>{var[r,n]=e;return R(n)||(t[r]=n),t},{}):{}},e.resolver=function(t,e,r){return void 0===t&&(t=()=>{}),void 0===e&&(e=5e3),void 0===r&&(r=50),"function"==typeof t?new Promise(n=>{var o,i=r||50,a=e,s=0,u=(o=c((function*(){try{return yield t()}catch(t){return j(t)?{error:t}:C(t)&&t.error?t:{error:t}}})),function(){return o.apply(this,arguments)}),l=setInterval(c((function*(){var t=u();if(t.catch(t=>t),s>=a)return(t||{}).resolve&&t.resolve(void 0),n(void 0),clearInterval(l);s+=i;try{s+=i;var e=yield t;if(e)return n(e),clearInterval(l)}catch(t){return j(t)&&n(t),C(t)&&t.error?n(t):n({error:t}),clearInterval(l)}})),i)}):Promise.reject("fn() must be callable")},e.flatten=function(t){return void 0===t&&(t=[]),_(t)?[].concat(...t):[]},e.flattenDeep=function(t){void 0===t&&(t=[]);var e=[];if(!_(t))return e;try{return(e=function t(e,r){return void 0===r&&(r=1),0<r?e.reduce((e,n)=>e.concat(Array.isArray(n)?t(n,r-1):n),[]):e.slice()}(t,1/0)||[])instanceof Array?e:[]}catch(t){return[]}},e.chunks=function(t,e){var r=Math.ceil;return void 0===t&&(t=[]),void 0===e&&(e=0),Array.from({length:r(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))},e.dupes=function(t,e){void 0===e&&(e=0);for(var r=[],n=parseInt(e);0<n;)n--,r.push(t);return r},e.uniqBy=function(t,e){void 0===t&&(t=[]),void 0===e&&(e="");var r={},n=[];if(!e)return[];if(!(t||[]).length)return[];for(var o=function(o){var i=t[o];return P(i)||w(i)?(n.push(i),"continue"):C(i)&&i[e]?Object.entries(r).filter(t=>{var[n]=t;return i[e]===r[n]}).length?"continue":void(i[e]!==r[e+":"+o]&&(r[e+":"+o]=i[e],n.push(i))):(n.push(i),"continue")},i=0;i<t.length;i++)o(i);return n},e.arrayWith=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=""),!_(t))return[];try{var r=t.map(t=>(t=>C(t)?-1===Object.keys(t).indexOf(e)?void 0:t:void 0)(t)).filter(t=>!!t);return r instanceof Array?r:[]}catch(t){return[]}},e.exFromArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]);try{if(!(t instanceof Array))return[]}catch(t){return[]}if(!(e=[].concat(e)).length)return t;try{var r=t.map(t=>function(t,e){if(void 0===t&&(t={}),void 0===e&&(e=[]),!C(t))return t;var r=Object.entries(t).reduce((t,r)=>{var[n,o]=r;return-1===e.indexOf(n)&&(t[n]=o),t},{});return R(r)?void 0:r}(t,e));return r instanceof Array?r:[]}catch(t){return[]}},e.copy=N,e.uniq=A,e.isPromise=I,e.isQPromise=D,e.debug=function(){if(l()&&"off"!==u("debug")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return h("debug",e)}},e.log=p,e.warn=d,e.onerror=v,e.error=g,e.alert=y,e.attention=function(){if(l()&&"off"!==u("attention")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return h("attention",e)}},e.isObject=C,e.isFalsy=R,e.isError=j,e.typeCheck=k,e.validDate=function(t,e){if(void 0===e&&(e=void 0),b(e)&&!f(e))return!1;try{return t.__proto__===Date.prototype&&"Invalid Date"!==t.toString()}catch(t){return!1}},e.isInstance=E,e.isClass=$,e.isArray=_,e.pickFromArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]);var r=[];try{if(!(t instanceof Array))return r}catch(t){return[]}if(_(e)||(e=[].concat(e)),!e.length)return t;var n=[void 0,null,!1];if(!(e=e.filter(t=>!R(t)||n.filter(e=>e===t||(S(t)&&!isNaN(t)).length))).length)return t;var o=(t,e)=>{if(_(t)&&b(e)){if("object"===e.name.toLowerCase())return!1;if("array"===e.name.toLowerCase())return!0}if(C(t)&&b(e)){if("array"===e.name.toLowerCase())return!1;if("object"===e.name.toLowerCase())return!0}try{return(e.name||"").toLowerCase()===typeof t}catch(t){}};try{return(r=t.reduce((t,r)=>((t=>{for(var r,n,i=0;i<e.length;i++){if(n=e[i],C(n)&&C(t)){var a=Object.entries(n),c=a.filter(e=>{var[r,n]=e;return!(t[r]!==n)||(void 0===t[r]?void 0:o(t[r],n))});if((c=c.length===a.length&&Object.entries(t).length>=c.length)&&B(t)>=B(n)){r=!0;break}}if(_(n)&&_(t)){var s=n.filter(e=>t.filter(t=>t===e||o(t,e)).length);if(s=s.length===n.length&&t.length>=s.length){r=!0;break}}else{if(n===t){r=!0;break}if(S(t)||O(t)||L(t)||_(t)||C(t)||b(t)){if(o(t,n)){r=!0;break}}else if(o(t,n)){r=!0;break}}}return r})(r)&&t.push(r),t),[]))instanceof Array?r:[]}catch(t){return[]}},e.dispatcher=function(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),new function(t,e){var r=this,n="[dispatcher]";this.uid=((t||"").toString()||(new Date).getTime()).toString(),this.debug=e,this.cbQueue={},this.dispatchInstance={},this._isActive=null,this._onComplete_cb=null,this.index=0,this.data=null,this.onComplete=t=>(this._onComplete_cb=t,this),this.initListener=()=>(this.Dispatch(),this._isActive=!0,this),this.next=function(t){return void 0===t&&(t=null),!1!==r._isActive&&r.initListener(),r.dispatchInstance[r.uid]?r.dispatchInstance[r.uid].next(t):r.debug&&p({message:n+" for uid not available",uid:r.uid}),r},this.Dispatch=()=>{if(this.dispatchInstance[this.uid])return this;var t=this;return this.dispatchInstance[this.uid]||(this.dispatchInstance[this.uid]=new function(){this.uid=t.uid,this.data=null,this.next=e=>("cb"!==(e||{}).type&&(this.data=e),"cb"===(e||{}).type?void("function"==typeof e.cb&&(!t.cbQueue[t.uid]&&(t.cbQueue[t.uid]=e.cb),this.data&&(t.index++,t.data=this.data,e.cb.call(t,this.data,t.uid,t.index)))):void(this.data?"function"==typeof t.cbQueue[t.uid]&&(t.index++,t.data=this.data,t.cbQueue[t.uid].call(t,this.data,t.uid,t.index)):t.debug&&d(n+" no callback data")))}),this},this.isActive=()=>this._isActive,this.del=()=>(delete this.cbQueue[this.uid],delete this.dispatchInstance[this.uid],this._isActive=!1,"function"==typeof this._onComplete_cb&&this._onComplete_cb(this.uid),this),this.subscribe=t=>"function"==typeof t?(this.dispatchInstance[this.uid]||this.Dispatch(),this.dispatchInstance[this.uid]&&this.dispatchInstance[this.uid].next({type:"cb",cb:t}),this):(this.debug&&d(n+"[subscribe] cb must be set"),this),this.init=this.initListener,this.sub=this.subscribe,this.emit=this.next,this.delete=this.del,this.unsubscribe=this.del}(t,e)},e.isSQ=x,e.withHoc=function(t){void 0===t&&(t=()=>{});for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=r,i=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=()=>o?[].concat(r,o):r;if(t instanceof Function)try{return t(...i())}catch(t){v("[HOC]",t)}else{if(I(t))return(t.promise?t.promise:t).then(t=>b(t)?t(...i()):Promise.reject("DEFERRED_NOT_CALLABLE"),t=>b(t)?Promise.reject(t(...i())):Promise.reject("DEFERRED_NOT_CALLABLE"));v("[HOC]","item() must be callable function")}};return i},e.isDate=t=>{try{return t instanceof Date}catch(t){return!1}},e.xrequire=function(e,r){if(void 0===e&&(e=""),void 0===r&&(r=""),!s()){var n=function(){};return(n.prototype=Object.create(t.constructor.prototype)).constructor=t.constructor,n.prototype.require=function(t,e){try{return this.constructor._load(t,this)}catch(t){if("ERR_NO_THROW"===e)return;if("MODULE_NOT_FOUND"===t.code)throw t}},n.prototype instanceof t.constructor?n.prototype.require(e,r):void 0}},e.asJson=t=>{try{return JSON.stringify(t,null,2)}catch(t){return"[asJson], "+t.toString()}},e.truthFul=function(t){return void 0===t&&(t={}),C(t)?Object.entries(t).reduce((t,e)=>{var[r,n]=e;return void 0!==n&&(t[r]=n),t},{}):{}},e.inIndex=function(t,e){void 0===t&&(t=""),void 0===e&&(e=[]);var r=0;return _(e)&&e.length?"string"!=typeof t?r:t?r=e.filter((e,r)=>((t,e,r)=>{try{return new RegExp(t).test(e)}catch(t){return v("[inIndex]","wrong pattern/expression at index:"+r),!1}})(e,t,r)).length:r:r},e.isRegExp=T,e.matched=function(t,e){void 0===t&&(t=""),void 0===e&&(e=/\\/);var r=!1;return L(t)&&T(e)?"string"!=typeof t?r:t?r=((t,e)=>{try{return new RegExp(t).test(e)}catch(t){return v("[matched]",t.toString()),!1}})(e,t):r:r}},i=[t,e],void 0===(a="function"==typeof(o=c)?o.apply(e,i):o)||(t.exports=a)}).call(this,r(8),r(9))},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=r(0),p=h.isString,d=h.sq,y=h.isArray,v=h.warn,g=h.log,b=h.isNumber,m=h.onerror,_=h.last,k=h.copy,j=h.isObject,O=h.isFunction,w=h.dispatcher,P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(h,t);var e,r,n,o,a=(n=h,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(n);if(o){var r=f(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function h(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(c(this,h),(t=a.call(this,e,r,n)).debug=n||!1,(b(e.id)||e.id)&&(e.id=e.id.toString()),!e.task||!p(e.task))throw"task as string is required";return t._id=null,t._error=[],t._ref=null,t._task=null,t._status=null,t._data=null,t._campaign=null,t._dataIndex=0,t._statusIndex=0,t._statusAsync=[],t.task=e.task,t.id=e.id,t.status="open",t._sealed=!1,t._onChange=r.onChange||null,t._onchangeDispatch=void 0,t.emitter=r.emitter||null,t.withDataBank=r.withDataBank||!1,t.completeOnNull=r.completeOnNull||null,t.disableWarnings=(r||{}).disableWarnings,e.ref!==t._ref&&(t.ref=e.ref),e.data!==t._data&&(t.data=e.data),e.campaign&&(t.campaign=e.campaign),t._completeAsync=d(),t}return e=h,(r=[{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"complete"===this.status||"send"===this.status?(this.debug&&!this.disableWarnings&&v("[Probe][update] cannot update data on complete status"),this):!j(t)&&e?(this.debug&&v("[pocket]","[Probe][update] cannot update none object 'data' with option 'merge=true' set"),this):(j(t)&&e?this.data=Object.assign({},this.data,t):void 0!==t&&(this.data=t),this)}},{key:"all",value:function(){var t={error:this.error,ref:this.ref,campaign:this.campaign,data:this.data,id:this.id,task:this.task,status:this.status};return this.withDataBank&&(t.dataBank=k(this.dataBank)),t}},{key:"onChange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(!this._onChange)return this.debug&&v("[pocket]","[onChange] to use need to set opts.onChange=true"),this;if(!O(t))return this.debug&&v("[onChange] cb must be a function"),this;var r=["all","data","status","ref","error","campaign"];if(!(r=[].concat(r,["status:complete"])).includes(e))return this.debug&&v("[pocket]","[onChange] no watch available for ".concat(e)),this;var n=r.indexOf("status:complete");r.splice(n,1);var o=this;return this.onchangeDispatch?(this.onchangeDispatch.subscribe((function(r,n){if(r.changed&&"all"===e)t.bind(o)(o,n);else{if("status:complete"===e){if("status"===r.changed&&("send"===o.status||"complete"===o.status&&!o._sealed)){var a=i(i({},k(o.all())),{},{status:"complete"});t.bind(o)(a,n),o._sealed=!0}return this}r.changed===e&&void 0!==o[e]&&t.bind(o)(k(o[e]),n)}})),this):(this.debug&&v("[pocket]","[onChange] onchangeDispatch no longer active"),this)}},{key:"dispatchChange",value:function(t){return!!this._onChange&&!!this.onchangeDispatch&&(this.onchangeDispatch.next({changed:t}),!0)}},{key:"onComplete",value:function(t){var e=this;return"complete"!==t&&"error"!==t||"send"===this._status||!(this._dataIndex>0||!0===this.completeOnNull)||(this.emitter&&setTimeout((function(){e.emitter({probe:e,status:t})})),this._status="send",this.sq.resolve({probe:this.all()}),setTimeout((function(){e.onchangeDispatch&&e.onchangeDispatch.del()}))),this}},{key:"onOpenStatus",value:function(t){var e=this;return"open"===t&&this.emitter&&setTimeout((function(){e.emitter({probe:e,status:"open"})})),this}},{key:"sq",get:function(){return this._sq||(this._sq=d()),this._sq}},{key:"id",set:function(t){if(this._id)this.debug&&v("[pocket]","cannot update already set id: ".concat(this._id));else{if(!t)throw"id is required";if(t.split(" ").length>1)throw"each id cannot have spaces";if(-1===t.indexOf("::"))throw"each id must be of format id::taskName";if(-1!==t.indexOf(":::"))throw"each id must be of format id::taskName";var e=/[`~!@#$%^&*()\=?;'",.<>\{\}\[\]\\\/]/gi;if(new RegExp(e,"gi").test(t))throw"your id is invalid, allowed chars: ".concat(e);if(-1===(t=t.replace(/ /gi,"_").toLowerCase()).indexOf(this._task))throw"wrong id setup, your id should make up the taks name, example: id='cocacola::drink'";this._id=t}},get:function(){return this._id}},{key:"error",set:function(t){t&&(this._error.push(y(t)?t.toString():t),this._error=this._error.filter((function(t){return!!t})),this.dispatchChange("error"))},get:function(){if(this._error.length)return this._error}},{key:"ref",get:function(){return this._ref},set:function(t){t&&(p(t)?"complete"!==this.status&&"send"!==this.status&&(this._ref=t,this.dispatchChange("ref")):v("[pocket]","[ref] must be a string"))}},{key:"campaign",get:function(){return this._campaign},set:function(t){void 0!==t&&(this._campaign?this.debug&&!this.disableWarnings&&v("[pocket]","cannot update already set campaign ".concat(this._campaign)):t&&(p(t)?(this._campaign=t,this.dispatchChange("campaign")):this.debug&&v("[pocket]","campaign must be a string",t)))}},{key:"task",set:function(t){if(void 0!==t)if(this._task)this.debug&&!this.disableWarnings&&v("[pocket]","cannot update already set task");else if(t)if(p(t)){if(-1!==t.indexOf("::"))throw"task seperator :: is restricted";if(t.split(" ").length>1)throw"task cannot have spaces, use seperators: _+";var e=/[`~!@#$%^&*()\=?;'",.<>\{\}\[\]\\\/]/gi;if(new RegExp(e,"gi").test(t))throw"your task is invalid, allowed chars: ".concat(e);this._task=t.replace(/ /gi,"_").toLowerCase()}else this.debug&&v("[pocket]","task must be a string")},get:function(){return this._task}},{key:"data",set:function(t){void 0!==t&&("complete"===this.status||"send"===this.status?this.debug&&!this.disableWarnings&&v("[pocket]","you cannot update data once the status is complete or send"):(this._dataIndex++,"open"===this.status&&null!==this._data&&this._dataIndex>1&&(this.status="updated"),this._data=t,this.withDataBank&&(this.dataBank=t),this.dispatchChange("data")))},get:function(){return this._data}},{key:"statusStackOrder",get:function(){return{open:{value:1,set:!1},updated:{value:2,set:!1},complete:{value:3,set:!1},send:{value:4,set:!1},error:{value:5,set:!1}}}},{key:"status",get:function(){return this._status},set:function(t){var e=this;!function(r){try{if(e.statusStackOrder[r].value>2&&!0===e.statusStackOrder[r].set)return!1}catch(t){m("statusStackOrder invalid status")}switch(r){case"open":if("updated"===e._status){e.debug&&v("[pocket]","cannot set status back to open once set to updated");break}e._status=r,e.statusStackOrder[r].set=!0,e.onOpenStatus(t),e.setStatusAsync=r,e.dispatchChange("status");break;case"updated":if("complete"===e._status){e.debug&&v("[pocket]","cannot update status to 'updated' then previously set to 'complete'");break}e._dataIndex>0&&(e._status=r,e.statusStackOrder[r].set=!0,e.setStatusAsync=r,e.dispatchChange("status"),e.debug&&g("id:".concat(e.id,", data updated")));break;case"complete":if(null===e.data&&!0!==e.completeOnNull){e.debug&&v("[pocket]","[status] cannot complete status because data is null, to complete you set data prop to false");break}e.statusStackOrder[r].set=!0,e.setStatusAsync=r,e._status=r,e.dispatchChange("status"),e.onComplete(t);break;case"send":if("complete"!==e._status){e.debug&&v("[pocket]","cannot update status to 'send' then previously not set to 'complete'");break}e._status=r,e.statusStackOrder[r].set=!0,e.setStatusAsync=r,e._completeAsync.resolve({status:e._status,id:e.id}),e.dispatchChange("status");break;case"error":if("complete"===e._status)return;e.statusStackOrder[r].set=!0,e.setStatusAsync=r,e.dispatchChange("status"),e.onComplete(t);break;default:e.debug&&v("[pocket]","id:".concat(e.id,",  you set invalid status: ").concat(r,", nothing changed"))}}(t)}},{key:"setStatusAsync",set:function(t){var e={timestamp:(new Date).getTime(),p:d()};this._statusAsync.push(e)},get:function(){var t=_(this._statusAsync.sort((function(t,e){return t.timestamp-e.timestamp})).map((function(t){return t.p})));return t.resolve(k(this.status)),t}},{key:"getStatusAsync",get:function(){return this.setStatusAsync.promise}},{key:"completeAsync",get:function(){return this._completeAsync.promise}},{key:"statusAsync",get:function(){return this.getStatusAsync}},{key:"onchangeDispatch",get:function(){return this._onChange?(this._onchangeDispatch||(this._onchangeDispatch=w(this.id)),this._onchangeDispatch):(this.debug&&v("[pocket]","[onchangeDispatch] to use need to set opts.onChange=true"),null)}}])&&s(e.prototype,r),h}(r(10));t.exports=P},function(t,e,r){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o=r(0).validID;e.errorMessages=function(t){for(var e={},r=0,o=Object.entries(t);r<o.length;r++){var i=(s=o[r],u=2,function(t){if(Array.isArray(t))return t}(s)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(s,u)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(s,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];e[a]={message:c[0],code:a}}var s,u;return e};var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=/[`~!@#$%^&*()\=?;'",.<>\{\}\[\]\\\/]/gi,r=new RegExp(e,"gi");return!r.test(t)};e.validProjectID=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t&&!((t||"").split(" ").length>1)&&i(t))return t},e.validProbe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if((t=o(t))&&i(t)&&-1!==t.indexOf("::"))return t},e.idRegexValid=i},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(c,t);var e,r,n=(e=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=a(e);if(r){var o=a(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return i(this,t)});function c(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),n.call(this,t,e)}return c}(r(7));t.exports=c},function(t,e){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}t.exports=function(t){var e=this,n=t.data,o=void 0===n?void 0:n,i=t.status,a=void 0===i?void 0:i,c=t.ref,s=void 0===c?void 0:c,u=t.error,l=void 0===u?void 0:u,f=t.campaign,h=void 0===f?void 0:f;this.data=o,this.status=a,this.ref=s,this.error=l,this.campaign=h,Object.entries(this).forEach((function(t){var n,o,i=(o=2,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(n,o)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0];void 0===i[1]&&delete e[a]}))}},function(t,e,r){var n=r(16),o=r(2).validProjectID,i=r(0),a=i.isArray,c=i.isString;t.exports=function(t){var e=t.id,r=void 0===e?"":e,i=t.tasks,s=void 0===i?[]:i;if(!r||!c(r)||!o(r))throw"ProjectPayloadModel/invalid id provided";if(!a(s)||!(s||[]).length)throw"ProjectPayloadModel/invalid tasks[] provided";this.id=r,this.tasks=s.map((function(t){return new n(t)}))}},function(t,e,r){window.Pocket=r(3)},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r(1),r(11).$computeCallBack,r(4);var f=r(0),h=f.copy,p=f.warn,d=f.isArray,y=f.onerror,v=f.objectSize,g=f.isString,b=f.uniq,m=f.isFunction,_=r(2),k=_.validProbe,j=_.validProjectID,O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(_,t);var e,r,n,i,f=(n=_,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(i){var r=l(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return u(this,t)});function _(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),f.call(this,t,e)}return e=_,(r=[{key:"$architect",value:function(t,e){return c(l(_.prototype),"architect",this).call(this,t,e)}},{key:"$asset",value:function(t,e,r){return c(l(_.prototype),"asset",this).call(this,t,e,r)}},{key:"$exists",value:function(t){return!!this.selectByTask(t)}},{key:"$projectComplete",value:function(t){return this.projectsCache[t]?"complete"===this.projectsCache[t]:null}},{key:"$projectSet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=j(t),!!this.payloadData[t]}},{key:"$condition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!m(t))return this.debug&&p("[pocket]","[$condition] must provide callback"),this;var r="PocketSelf",n=null;if(0===(e=g(e)?e:"").indexOf("::")){if(e=this.selectByTask(e,!0),r="ProbeSelf",!(e=this.lastProbeID(e)))return this.debug&&p("[pocket]","[$condition] probeID not found"),this}else{if(!this.lastProjectID(e))return this.debug&&p("[pocket]","[$condition] projectID not found"),this;r="PocketSelf"}if("PocketSelf"===r&&(n=this),"ProbeSelf"===r&&(n=this.$get(e)),!n)return this.debug&&p("[pocket]","[$condition] no valid self value"),this;var o=t.call(n,n);return o||this}},{key:"$probeStatusAsync",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=this.selectByTask(t,!0);var e=this.lastProbeID(t);return c(l(_.prototype),"probeStatusAsync",this).call(this,e)}},{key:"$get",value:function(t,e){t=this.selectByTask(t,!0);var r=this.lastProbeID(t);return c(l(_.prototype),"_get",this).call(this,r,e)}},{key:"$getByRef",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object.assign(this.pocket).filter((function(e,r){var n=o(e,2);return n[0],n[1].ref===t}))}},{key:"$set",value:function(t,e){e=this.selectByTask(e,!0);var r=this.lastProbeID(e);return c(l(_.prototype),"_set",this).call(this,t,r)}},{key:"$probe",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=this.selectByTask(t,!0);var e=this.lastProbeID(t);if(this.pocket[e]){if("Probe"===this.pocket[e].constructor.name)return this.pocket[e];this.debug&&y("[pocket]","[$probe] probeID: ".concat(t," is not an instance of Probe{}"))}else this.debug&&p("[pocket]","[$probe] not found for probeID: ".concat(t))}},{key:"$update",value:function(t,e,r){r=this.selectByTask(r,!0);var n=this.lastProbeID(r);return c(l(_.prototype),"update",this).call(this,t,e,n)}},{key:"$select",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t=g(t)?t:"",this.lastProjectID(t),this}},{key:"$filter",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this;r=this.lastProjectID(r);var o=function(t){return e.d=(t||[]).filter((function(t){return void 0===t.isNONE})),n};if(!m(t))return o([]);if(!this.payloadData[r])return this.debug&&p("[pocket]","[$filter] no projectID found"),o(null);var i=[];return(this._lastFilterList[r]||[]).length?i=this._lastFilterList[r]:(this._lastFilterList[r]=[],i=this.projectProbeList(r)),i.forEach((function(n,o){if(!n.isNONE){var i=t.call(n,n);if(!i)return e._lastFilterList[r]=e._lastFilterList[r].filter((function(t){return t.id!==n.id})),void e._lastFilterList[r].push({id:n.id,isNONE:!0});void 0===i||!0!==i&&1!==i?e._lastFilterList[r].push({id:n.id,isNONE:!0}):e._lastFilterList[r].filter((function(t,e){return(t||{}).id===n.id})).length||e._lastFilterList[r].push(n)}})),o(this._lastFilterList[r])}},{key:"$compute",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r=this.lastProjectID(r);var n=function(t){return t&&delete e._lastFilterList[r],e.d=t,e};if(!m(t))return this.debug&&p("[pocket]","[$compute] cb must be a function"),n(null);if(!this.payloadData[r])return this.debug&&p("[pocket]","[$compute] no project found fo your/last id projectID:".concat(r)),n(null);var o=this._lastFilterList[r]||[];return o.length?(this._lastFilterList[r]=o=o.filter((function(t){return void 0===t.isNONE})).filter((function(t,e,r){var n=t.id;return 1===r.filter((function(t){return n===t.id})).length})),o.forEach((function(e){"complete"!==e.status&&"send"!==e.status&&t.call(e,e)})),n(this._lastFilterList[r])):(this.projectProbeList(r).forEach((function(e){"complete"!==e.status&&"send"!==e.status&&t.call(e,e)})),n(this.projectProbeList(r)))}},{key:"$list",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"self";if(e=this.lastProjectID(e),!this.payloadData[e])return[];var i=function(){return Object.entries(t.pocket).reduce((function(t,r,n){var i=o(r,2),a=(i[0],i[1]);return a.id.includes(e)&&t.push(a),t}),[])};return m(r)?(this.projectProbeList(e).forEach((function(t){r(t.all())})),"self"!==n&&n?"list"===n?i():void 0:this):i()}},{key:"$transfer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=this.selectByTask(t,!0),t=this.lastProbeID(t),this.pocket[t]?(this.storeTransfers(t,h(this.pocket[t].data)),this.$transfer_lastID=t,this):(this.debug&&p("[pocket]","[$transfer] no Probe{} found for this id fromProbeID:".concat(t)),this)}},{key:"$to",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;if(t=this.selectByTask(t,e),e&&(t=k(t)),!t)return this.debug&&p("[pocket]","[$to] toProbeID is invalid"),this;if(!this.pocket[t])return this.debug&&p("[pocket]","[$to] no Probe{} found for this id toProbeID:".concat(t)),this;if(this.$transfer_lastID){var n=this.accessLastValidTransfer(r);if(v(n)){var o=n.fromProbeID,i=n.data;if(this.$transfer_lastID===o){if("complete"===this.pocket[t].status||"send"===this.pocket[t].status)return this.debug&&p("[pocket]","[$to] cannot transfer since toProbeID: ".concat(t," is already complete")),this.$transfer_lastID="",this;this.pocket[o].data=null,this.pocket[t].data=i}}else this.debug&&p("[pocket]","[$to] no last valid transfer found");this.$transfer_lastID=""}return this}},{key:"$of",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.selectByTask(t,!0),this}},{key:"$data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=this.selectByTask(e,!0),this.pocket[e]?(d(t)&&(t||[]).length&&(t=b(t).reduce((function(t,e){return void 0!==e&&(t[e.trim()]=!0),t}),{})),t&&v(t)?this.dataPropSelector("data()",e,t,r,h(this.pocket[e].data)):(this._$cached_data[e]=h(this.pocket[e].data),r?this:this._$cached_data[e])):r?this:void 0}},{key:"$cached",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=this.selectByTask(e,!0),this.pocket[e]){var r=void 0!==this._$cached_data[e]&&null!==this._$cached_data[e];if(r)return g(t)&&(t||"").length&&(t=b(t.trim().replace(/ /gi,"").split(",")).reduce((function(t,e){return void 0!==e&&(t[e]=!0),t}),{})),!v(this._$cached_data[e])&&r?v(t)?void 0:this._$cached_data[e]:t&&v(t)?this.dataPropSelector("cached()",e,t,!1,this._$cached_data[e]):void 0===this._$cached_data[e]?void 0:this._$cached_data[e]}}},{key:"$campaign",value:function(t){return t=this.selectByTask(t,!0),this.pocket[t]?h(this.pocket[t].campaign):null}},{key:"$ref",value:function(t){if(t=this.selectByTask(t,!0),this.pocket[t])return h(this.pocket[t].ref)}},{key:"$status",value:function(t){if(t=this.selectByTask(t,!0),this.pocket[t])return h(this.pocket[t].status)}},{key:"$task",value:function(t){if(t=this.selectByTask(t,!0),this.pocket[t])return h(this.pocket[t].task)}},{key:"$error",value:function(t){if(t=this.selectByTask(t,!0),this.pocket[t])return h(this.pocket[t].error)}},{key:"$all",value:function(t){if(t=this.selectByTask(t,!0),this.pocket[t])return h(this.pocket[t].all())}},{key:"$onChange",value:function(t,e,r){return this._onChange?(r=this.selectByTask(r,!0),this.pocket[r]?(this.pocket[r].onChange(t,e),this):null):(this.debug&&p("[pocket]","[$onChange] opts.onChange=true must be enabled to use this feature"),this)}},{key:"$onProbeComplete",value:function(t,e){if(!this._onChange)return this.debug&&p("[pocket]","[$onChange] opts.onChange=true must be enabled to use this feature"),this;if(e){if(e=this.selectByTask(e,!0),!this.pocket[e])return;return this.pocket[e].onChange(t,"status:complete"),this}var r=this.lastProjectID();return this.projectProbeList(r).forEach((function(e){e.onChange(t,"status:complete")})),this}},{key:"$projectID",get:function(){return this._lastProjectID}}])&&a(e.prototype,r),_}(r(13));t.exports=O},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var s,u=[],l=!1,f=-1;function h(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&p())}function p(){if(!l){var t=c(h);l=!0;for(var e=u.length;e;){for(s=u,u=[];++f<e;)s&&s[f].run();f=-1,e=u.length}s=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||l||c(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=r(0),i=o.uniqBy,a=o.isArray,c=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataBank=[],this.debug=n}var e,r;return e=t,(r=[{key:"dataBank",set:function(t){if(a(t)){if(t.filter((function(t){return t.data_id})).length)return}else if((t||{}).data_id)return;this._dataBank.push({data:t,data_id:(new Date).getTime().toString()}),this._dataBank=this._dataBank.filter((function(t){return void 0!==t.data}))},get:function(){return i(this._dataBank||[],"data_id")}}])&&n(e.prototype,r),t}();t.exports=c},function(t,e,r){r(12),r(3),r(1),e.$computeCallBack=function(t,e){},e.readyOutput=function(t){return t},e.asPocket=function(t){return t},e.asProbe=function(t){return t}},function(t,e){t.exports=function(){this.data=void 0,this.task="",this.id="",this.status="",this.error=void 0}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=r(2).validProjectID,l=r(0),f=l.objectSize,h=l.isFunction,p=l.onerror,d=l.warn,y=l.isString,v=r(14),g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(b,t);var e,r,n,l,g=(n=b,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(n);if(l){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return c(this,t)});function b(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),(r=g.call(this,t,e)).architectConfig={};var n=new v;return r.architectMod=n.architect,r}return e=b,(r=[{key:"setArchitect",value:function(t,e){return void 0===this.architectConfig[t]&&(this.architectConfig[t]=this.architectMod),this.architectConfig[t].value=Object.assign({},this.architectConfig[t].value,e),this}},{key:"getArchitect",value:function(t){return(this.architectConfig[t]||{}).value}},{key:"asset",value:function(t,e,r){if(!h(e))return this.debug&&d("[pocket]","[$asset] asCallback must be a function"),null;if("project"!==t&&"cache"!==t){var n=this.lastProjectID(r);return r=u(n||r),this.getArchitect(r)?void 0!==this.getArchitect(r)[t]?e.call(this,this.getArchitect(r)[t]):(this.debug&&d("[pocket]","[$asset] assetName for architect doesnt exist"),null):(this.debug&&d("[pocket]","[$asset] architectConfig for assetName doesnt exist"),null)}this.debug&&d("[pocket]","[$asset] 'project, cache' are  restricted")}},{key:"architect",value:function(t,e){if(!h(t))return this.debug&&p("[pocket]","[$architect] callback must be set"),this;var r=t.call(this);if(!f(r))return this.debug&&p("[pocket]","[architect] must return a valid object settings {project, asset}, at least 1 is required"),this;var n=(r.project||{}).id,i=this.lastProjectID(e);if(!(e=u(i||e||n)))return this.debug&&p("[pocket]","[$architect] if this is a new project, you must specify projectID"),this;var a,c,s,l=Object.entries(r).reduce((function(t,e){var r,n,i=(n=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(r,n)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];return-1!==["project","asset","cache"].indexOf(a)&&(t[a]=c),t}),{});for(var v in(this.getArchitect(e)||{}).cache?l.cache=this.getArchitect(e).cache:(l.cache||(l.cache={project:!1,asset:!1}),this.setArchitect(e,{cache:l.cache})),l){var g=l[v],b=!0===l.cache[v]&&("project"===v||"asset"===v);if("project"===v){try{if(b&&this.getArchitect(e)[v])continue}catch(t){}this.setArchitect(e,{project:this.$payload(g,g.async,g.type).d})}if("asset"===v){if(!y(g.name)||void 0===g.value)return this.debug&&d("[pocket]","[$architect] asset must include {value, name}"),this;if("project"===g.name||"cache"===g.name)return this.debug&&d("[pocket]",'[$architect] asset props, "project, cache" are reserved'),this;try{if(b&&this.getArchitect(e)[g.name])continue}catch(t){}this.setArchitect(e,(a={},c=g.name,s=g.value,c in a?Object.defineProperty(a,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[c]=s,a))}}return this}}])&&i(e.prototype,r),b}(r(15));t.exports=g},function(t,e,r){var n=r(0),o=n.objectSize,i=n.log;t.exports=function t(){var e=this;this._architectVal=null,this.architect=Object.create(t.prototype,{value:{enumerable:!0,configurable:!0,get:function(){return e._architectVal},set:function(t){o(t)&&(e._architectVal=t,i("[pocket]","[architect] updated"))}}})}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r(1),r(5);var s=r(0),u=s.onerror,l=s.warn,f=s.isPromise,h=(s.validID,s.isString),p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(d,t);var e,r,n,s,p=(n=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(s){var r=c(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return a(this,t)});function d(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(r=p.call(this,t,e)).$project=r.$payload,r}return e=d,(r=[{key:"deletePocketSet",value:function(t){if(t){if(Object.values(this.pocket).length)for(var e=0,r=Object.values(this.pocket);e<r.length;e++){var n=r[e];this._$cached_data[n.id]&&delete this._$cached_data[n.id],n.id.includes(t)&&delete this.pocket[n.id]}this.payloadData[t]&&delete this.payloadData[t],this._ready[t]&&delete this._ready[t],void 0!==this._projectSetDispatcher[t]&&delete this._projectSetDispatcher[t],this._projectSetAsync[t]&&delete this._projectSetAsync[t],this._lastFilterList[t]&&delete this._lastFilterList[t];try{this.architectConfig[t]&&delete this.architectConfig[t]}catch(t){}this.clearStoreTransfers(t)}}},{key:"$removeProject",value:function(t){return t=h(t)?t:"",t=this.lastProjectID(t),this.deletePocketSet(t),this}},{key:"$payload",value:function(t,e,r){var n=this,o=function(t){return n.d=t,n},i=void 0!==e?e:this.async;return i&&f(t)?o(t.then((function(t){return n.payload(t,!1,r)}),(function(t){return t}))):i||f(t)?(this.debug&&u("[pocket]","[payload] with opts.async=true, data must be a promise, or do not set async when not a promise"),o(!!i&&Promise.reject())):o(this.payload(t,!1,r))}},{key:"$ready",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=function(t){return e.d=t,e.d&&!r&&e.d.catch((function(t){e.disableWarnings||l("[pocket]",t)})),e},o=this.lastProjectID(t,!1,null);if(!t&&o&&(t=o),"complete"===this.projectsCache[t]&&!r)return n(Promise.reject("[$ready] project: ".concat(t," already complete")));if(void 0!==this._ready_method_set[t]&&!r){if(!0===this._ready_method_set[t])return n(Promise.reject("[$ready] project: ".concat(t," already complete, cannot recall same $ready, ALLOW_MULTIPLE_FALSE")));if(!1===this._ready_method_set[t])return n(Promise.reject("[$ready] project: ".concat(t," you already declared $ready somewhere else, this call is ignored, ALLOW_MULTIPLE_FALSE")))}if(!o)throw"payloadID must be set";var i=this.$projectSetAsync(o).then((function(t){var r=t.projectID;return e.ready(r).then((function(t){return e.deleteWithDelay?setTimeout((function(){e.deletePocketSet(r)}),e.deleteWithDelay):e.deletePocketSet(r),e.projectsCache[r]="complete",e._ready_method_set[o]=!0,t}),Promise.reject)}),Promise.reject);return this._ready_method_set[o]=!1,n(i)}catch(t){this.disableWarnings||u("[pocket]",t)}}}])&&o(e.prototype,r),d}(r(17));t.exports=p},function(t,e){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}t.exports=function(t){var e=this,n=t.id,o=void 0===n?void 0:n,i=t.ref,a=void 0===i?void 0:i,c=t.task,s=void 0===c?void 0:c,u=t.campaign,l=void 0===u?void 0:u,f=t.data,h=void 0===f?void 0:f;this.id=o,this.ref=a,this.task=s,this.campaign=l,this.data=h,Object.entries(this).forEach((function(t){var n,o,i=(o=2,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(n,o)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0];void 0===i[1]&&delete e[a]}))}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=u(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function u(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=r(5),v=r(4),g=(r(1),r(2).idRegexValid),b=r(0),m=b.sq,_=b.objectSize,k=b.log,j=b.onerror,O=b.warn,w=b.isObject,P=b.validID,S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(l,t);var e,r,n,o,u=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(o){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return p(this,t)});function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=u.call(this,t,e)).dispatcher&&r.dispatcher.subscribe((function(t,e){var n=t||{},o=n.probe,i=n.status;"error"===i&&r.debug&&k("[pocket]","[dispatcher] probe id:".concat(o.id," error")),"open"===i&&r.debug&&k("[pocket]","[dispatcher] probe id:".concat(o.id," created")),"complete"===i&&r.debug&&k("[pocket]","[dispatcher] probe id:".concat(o.id," completed"))})),r}return e=l,(r=[{key:"payload",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"new";try{e=new y(e)}catch(t){return j("[payload]",t),!1}this.d=null;var n=null;if(this.payloadData[e.id]&&(!r||"new"===r))return this._lastProjectID=e.id,!0;var o=void 0===this.payloadData[e.id];(this._lastFilterList[e.id]||[]).length&&(this._lastFilterList[e.id]=[]);var i,a=s(e.tasks);try{var c=function(){var a=i.value;if(!a.task)return t.debug&&O("[pocket]","[$payload] task must be set for your tasks"),"continue";if(!g(a.task)||-1!==a.task.indexOf("::"))return t.debug&&O("[pocket]","[$payload] invalid taskName, failed idRegexValid validation"),"continue";var c="".concat(e.id,"::").concat(a.task);return"update"===r&&!o&&t.pocket[c]?(a.data&&(t.pocket[c].data=a.data),a.status&&(t.pocket[c].status=a.status),!a.status&&a.data&&"open"===t.pocket[c].status&&(t.pocket[c].status="updated"),a.ref&&(t.pocket[c].ref=a.ref),a.error&&(t.pocket[c].error=a.error),a.campaign&&(t.pocket[c].campaign=a.campaign),n=!0,t._lastProjectID=e.id,"continue"):(t.payloadData[e.id]||(t.payloadData[e.id]={value:[],status:"open",timestamp:(new Date).getTime()}),t.payloadData[e.id].value.filter((function(t){return-1!==t.task.indexOf(a.task)})).length?(t.debug&&!t.disableWarnings&&O("[pocket]",'the same task "'.concat(a.task,'" already exists on the payload, you must choose uniq')),"continue"):(t.payloadData[e.id].value.push(a),void(t.lastPocketTimestamp=t.payloadData[e.id].timestamp)))};for(a.s();!(i=a.n()).done;)c()}catch(t){a.e(t)}finally{a.f()}return"update"===r&&this.payloadData[e.id]&&!o?(this.projectsCache[e.id]="open",n):!!this.payloadData[e.id]&&(this.lastProjectID(e.id),this.projectsCache[e.id]="open",this.distributor().setDefer(e.id),this.projectSetDispatcher(e.id).next({projectID:e.id}),!0)}},{key:"$projectSetAsync",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this;return t=this.lastProjectID(t,!1,null),this._projectSetAsync[t]||(this._projectSetAsync[t]=m(),this.projectSetDispatcher(t).subscribe((function(t,r){e._projectSetAsync[r].resolve(t),this.del()}))),this._projectSetAsync[t].promise}},{key:"probeStatusAsync",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=function(e){return t.d=e,t};return r((e=this.lastProbeID(e))?this.pocket[e].getStatusAsync:null)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this._setUpdate(t,e,r,"update")}},{key:"_set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._setUpdate(t,null,e,"set")}},{key:"_get",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=function(e){return t.d=e,r?t:t.d};return this.d=null,n((e=this.lastProbeID(e))?this.pocket[e]:null)}},{key:"$activeTasks",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=function(e){return t.d=e,t};if(e=this.lastProjectID(e),!_(this.pocket))return r([]);var n=Object.entries(this.pocket).reduce((function(r,n){var o=c(n,2),i=o[0],a=o[1];return 0===i.indexOf(e||"")&&e&&t.payloadData[e]?r.push(a.task):e||r.push(a.task),r}),[]);return r(n)}},{key:"ready",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.d=null,!this._ready[t])throw"ready[payloadID] is not set, maybe you called it before $payload()";return this._ready[t].promise}},{key:"_setUpdate",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"update";t=new v(t);var i=function(t){return e.d=t,e},s=this.lastProbeID(n);if(!s)return this.debug&&j("[pocket]","[$update] must specify id"),i(!1);if(!_(t))return this.debug&&O("[pocket]","[$update] dataFrom{} must not be empty"),i(!1);if(!this.pocket[s])return this.debug&&j("[pocket]","[$update] this.pocket with id:".concat(s," not found")),i(!1);var u=!1;this._lastProjectID=s;for(var l=Object.entries(t).reduce((function(t,r){var n=c(r,2),o=n[0],i=n[1],s=e.probeProps.indexOf(o);return e.probeProps[s]===o&&t.push({inx:s,data:a({},o,i)}),t}),[]),f=0;f<l.length;f++)if(void 0!==(l[f]||{}).data){var h=c(Object.entries(l[f].data)[0],2),p=h[0],d=h[1];void 0===this.pocket[s][p]?this.debug&&O("[pocket]","[$update] not a valid prop/value: { ".concat(p,":").concat(this.pocket[s][p]," }")):("data"===p&&(this.pocket[s][p]=!0===r?Object.assign({},this.pocket[s][p],d):d),"status"!==p&&"ref"!==p&&"error"!==p&&"campaign"!==p||(this.pocket[s][p]=d),u=!0)}return u&&"set"===o&&(this.clearStoreTransfers(s),this.$transfer_lastID===s&&(this.$transfer_lastID=""),this._$cached_data[s]&&delete this._$cached_data[s]),i(u)}},{key:"setDefer",value:function(t){var e=this;if(!(t=P(t)))throw"id must be set";if(this._ready[t]||(this._ready[t]=m()),!_(this.pocket)){var r="[setDefer] probe is empty, so nothing set, id:".concat(t);return this.debug&&j("[pocket]",r),void this._ready[t].reject(r)}var n=Object.values(this.pocket).filter((function(e){return-1!==e.id.indexOf(t)}));if(!n.length){var o="[setDefer] no pocketSet found for id:".concat(t," ");return this.debug&&j("[pocket]",o),void this._ready[t].reject(o)}try{return Promise.all(n.map((function(t){return t.sq.promise}))).then((function(r){var n=r.map((function(t){return function(t){var r={};if(!w(t))return null;for(var n=0;n<e.probeProps.length;n++){var o=e.probeProps[n];void 0!==t[o]&&null!==t[o]&&(r[o]=t[o])}return r}(t.probe)})).filter((function(t){return!!t}));e._ready[t].resolve(n)}),(function(t){j("[pocket]","[setDefer] Promise.all",t)})),!0}catch(t){j("[pocket]","[setDefer]",t)}return!1}},{key:"distributor",value:function(){for(var t=0,e=Object.entries(this.payloadData);t<e.length;t++){var r=c(e[t],2),n=r[0],o=r[1];if(!(this.lastPocketTimestamp>o.timestamp)&&"complete"!==o.status&&"send"!==o.status&&"error"!==o.status){var a,u=s(o.value.values());try{for(u.s();!(a=u.n()).done;){var l=i({id:n},a.value);this.setProbe(l)||j("[pocket]","probe for id:".concat(n," already exists"))}}catch(t){u.e(t)}finally{u.f()}}}return this}},{key:"setProbe",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.id||!t.task)throw"id and task both must be set";if(!P(t.id))throw"props.id not valid";var e="".concat(t.id,"::").concat(t.task);if(this.pocket[e])return this.debug&&k("[pocket]","[setProbe] probe: ".concat(e," already set")),null;try{t.id=e;var r=null!==this.dispatcher?this._emit.bind(this):null,n={withDataBank:this.withDataBank,disableWarnings:this.disableWarnings,onChange:this._onChange,emitter:r,completeOnNull:this.completeOnNull},o=this.Probe,i=new o(t,n,this.debug);this.pocket[e]=i}catch(t){return j("[pocket]",t),null}return this.pocket[e]}},{key:"_emit",value:function(t){if(!t)return null;if(!this.dispatcher)return!1;try{return this.dispatcher.next(t),!0}catch(t){return j("[pocket]","[_emit] dispatcher did not emit"),!1}}}])&&f(e.prototype,r),l}(r(18));t.exports=S},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=r(0),f=l.objectSize,h=l.warn,p=l.onerror,d=l.dispatcher,y=(l.validID,l.copy),v=l.log,g=l.isString,b=r(19),m=r(2),_=m.validProbe,k=m.validProjectID,j=m.idRegexValid,O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(b,t);var e,r,n,i,l=(n=b,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(i){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return s(this,t)});function b(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),(r=l.call(this)).debug=e||!1,r.async=(t||{}).async||null,r._onChange=(t||{}).onChange||null,r.completeOnNull=(t||{}).completeOnNull||null,r.disableWarnings=(t||{}).disableWarnings,r.withDataBank=(t||{}).withDataBank||!1,r.dispatcher=(t||{}).dispatcher?d():void 0,r.pocket={},r.payloadData={},r.lastPocketTimestamp=0,r._lastProjectID=null,r._lastProbeID=null,r._$cached_data={},r.$transfer_lastID="",r._ready={},r._ready_method_set={},r.d=void 0,r._projectSet={},r._transferCached=[],r._projectSetDispatcher={},r._projectSetAsync={},r._lastFilterList={},r.projectsCache={},r.deleteWithDelay=(t||{}).deleteWithDelay||1e3,r}return e=b,(r=[{key:"projectSetDispatcher",value:function(t){return t?(this._projectSetDispatcher[t]||this._projectSetDispatcher[t]||(this._projectSetDispatcher[t]=d(t)),this._projectSetDispatcher[t]):(this.debug&&p("[projectSetDispatcher] projectID must be set"),null)}},{key:"projectProbeList",value:function(t){return t?Object.entries(this.pocket).filter((function(e){return 0===o(e,1)[0].indexOf(t)})).map((function(t){var e=o(t,2);return e[0],e[1]})):[]}},{key:"clearStoreTransfers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var r=!1;return this._transferCached.length&&this._transferCached.forEach((function(n,o){var i=(n||{}).fromProbeID;i&&-1!==i.indexOf(e)&&(t._transferCached.splice(o,1),r=!0,t.debug&&v("[pocket]","[clearStoreTransfers] transferCached for probeID: ".concat(i," has been removed")))})),r}}},{key:"storeTransfers",value:function(t,e){return this._transferCached.push({timestamp:(new Date).getTime(),fromProbeID:t,data:e}),this._transferCached}},{key:"accessLastValidTransfer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!this._transferCached.length)return{};this._transferCached.sort((function(t,e){return t.timestamp-e.timestamp}));var r=y(this._transferCached),n=r.reduce((function(r,n,o){var i=n.timestamp,a=(new Date).getTime()+e;return a>i&&a-i-e<=e&&(r=n,t._transferCached.splice(o,1)),r}),{});return f(n)?n:{}}},{key:"selectByTask",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e=g(e)?e:"",!j(e)&&e)return null;if(e.indexOf(":")>0&&!this.pocket[e])return this.debug&&h("[pocket]","[selectByTask] when using '::' prefix selector, it should come at 0 index"),null;if(e.split(":").length>3||2===e.split(":").length)return this.debug&&h("[pocket]","[selectByTask] wrong taskName :".concat(e,", allowed prefix is '::taskName'")),null;if(r&&this.lastProbeID(e,!0),this.pocket[e])return r&&this.lastProbeID(e),e;var n=function(e){var r=e.split("::")[1]||e;return(t._lastProbeID||"").indexOf(r)>0&&r?t._lastProbeID:t._lastProjectID&&r?t._lastProjectID+"::"+r:t._lastProbeID},o=n(e);return o?r&&this.lastProbeID(o):this.debug&&h("[pocket]","[selectByTask] newProbeID was not found from taskOrProbeID: ".concat(e)),o}},{key:"lastProjectID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"strict";return!t&&this._lastProjectID&&(t=this._lastProjectID),t&&(t=k(t)),t&&this.payloadData[t]&&(this._lastProjectID=t),(this.payloadData[t]||"strict"!==e)&&t?(t&&!this._lastProjectID&&(this._lastProjectID=t),t):null}},{key:"lastProbeID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!t&&this._lastProbeID&&(t=this._lastProbeID),t&&(t=_(t)),t&&this.pocket[t]&&(this._lastProbeID=t),t&&this.pocket[t]?t:null}},{key:"dataPropSelector",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data()",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};try{return t=Object.entries(n).reduce((function(t,e,r){var n=o(e,2),i=n[0];return n[1],void 0!==a[i]&&(t[i]=a[i]),t}),{}),f(t)||(t=void 0),f(t)+f(n)===2&&(t=Object.values(t).shift()),"data()"===e&&(this._$cached_data[r]=t),i?this:t}catch(n){return this.debug&&h("[pocket]","[$data] no dataProp found on probeID: ".concat(r)),"data()"===e&&(this._$cached_data[r]=t),i?this:t}}},{key:"probeProps",get:function(){return["campaign","data","task","ref","error","id","status"]}}])&&a(e.prototype,r),b}(b);t.exports=O},function(t,e,r){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,o;return e=t,(o=[{key:"Probe",get:function(){return r(1)}}])&&n(e.prototype,o),t}();t.exports=o}]));
//# sourceMappingURL=pocket_browser.cd88e324.js.map