!function webpackUniversalModuleDefinition(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Pocket",[],e):"object"==typeof exports?exports.Pocket=e():t.Pocket=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function __webpack_require__(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)__webpack_require__.d(r,i,function(e){return t[e]}.bind(null,i));return r},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="./libs/Pocket/PocketExit.module.js")}({"./libs/Models/ArchitectModel.js":function(t,e,r){const{objectSize:i,log:s}=r("./node_modules/x-utils-es/umd/index.js");t.exports=function ArchitectModel(){this._architectVal=null,this.architect=Object.create(ArchitectModel.prototype,{value:{enumerable:!0,configurable:!0,get:()=>this._architectVal,set:t=>{i(t)&&(this._architectVal=t,s("[pocket]","[architect] updated"))}}})}},"./libs/Models/ProbePayloadModel.js":function(t,e){t.exports=function ProbePalyoadModel({id:t,ref:e,task:r,campaign:i,data:s}){this.id=t,this.ref=e,this.task=r,this.campaign=i,this.data=s,Object.entries(this).forEach(([t,e])=>{void 0===e&&delete this[t]})}},"./libs/Models/ProjectPayloadModel.js":function(t,e,r){const i=r("./libs/Models/ProbePayloadModel.js"),{validProjectID:s}=r("./libs/utils.js"),{isArray:o,isString:n}=r("./node_modules/x-utils-es/umd/index.js");t.exports=function ProjectPayloadModel({id:t="",tasks:e=[]}){if(!t||!n(t)||!s(t))throw"ProjectPayloadModel/invalid id provided";if(!o(e)||!(e||[]).length)throw"ProjectPayloadModel/invalid tasks[] provided";this.id=t,this.tasks=e.map(t=>new i(t))}},"./libs/Models/SetUpdateModel.js":function(t,e){t.exports=function SetUpdateModel({data:t,status:e,ref:r,error:i,campaign:s}){this.data=t,this.status=e,this.ref=r,this.error=i,this.campaign=s,Object.entries(this).forEach(([t,e])=>{void 0===e&&delete this[t]})}},"./libs/Pocket/Imports.js":function(t,e,r){t.exports=class Imports{get Probe(){return r("./libs/Probe/Probe.js")}}},"./libs/Pocket/Pocket.architect.js":function(t,e,r){const{validProjectID:i}=r("./libs/utils.js"),{objectSize:s,isFunction:o,onerror:n,warn:a,isString:c}=r("./node_modules/x-utils-es/umd/index.js"),u=r("./libs/Models/ArchitectModel.js"),l=r("./libs/Pocket/PocketExtended.js");t.exports=class PocketArchitect extends l{constructor(t,e){super(t,e),this.architectConfig={};const r=new u;this.architectMod=r.architect}setArchitect(t,e){return void 0===this.architectConfig[t]&&(this.architectConfig[t]=this.architectMod),this.architectConfig[t].value=Object.assign({},this.architectConfig[t].value,e),this}getArchitect(t){return(this.architectConfig[t]||{}).value}asset(t,e,r){if(!o(e))return this.debug&&a("[pocket]","[$asset] asCallback must be a function"),null;if("project"===t||"cache"===t)return void(this.debug&&a("[pocket]","[$asset] 'project, cache' are  restricted"));const s=this.lastProjectID(r);return r=i(s||r),this.getArchitect(r)?void 0!==this.getArchitect(r)[t]?e.call(this,this.getArchitect(r)[t]):(this.debug&&a("[pocket]","[$asset] assetName for architect doesnt exist"),null):(this.debug&&a("[pocket]","[$asset] architectConfig for assetName doesnt exist"),null)}architect(t,e){if(!o(t))return this.debug&&n("[pocket]","[$architect] callback must be set"),this;const r=t.call(this);if(!s(r))return this.debug&&n("[pocket]","[architect] must return a valid object settings {project, asset}, at least 1 is required"),this;const u=(r.project||{}).id,l=this.lastProjectID(e);if(!(e=i(l||e||u)))return this.debug&&n("[pocket]","[$architect] if this is a new project, you must specify projectID"),this;const h=Object.entries(r).reduce((t,[e,r])=>(-1!==["project","asset","cache"].indexOf(e)&&(t[e]=r),t),{});if((this.getArchitect(e)||{}).cache)h.cache=this.getArchitect(e).cache;else{const t={project:!1,asset:!1};h.cache||(h.cache=t),this.setArchitect(e,{cache:h.cache})}for(let t in h){const r=h[t],i=!0===h.cache[t]&&("project"===t||"asset"===t);if("project"===t){try{if(i&&this.getArchitect(e)[t])continue}catch(t){}this.setArchitect(e,{project:this.$payload(r,r.async,r.type).d})}if("asset"===t){if(!c(r.name)||void 0===r.value)return this.debug&&a("[pocket]","[$architect] asset must include {value, name}"),this;if("project"===r.name||"cache"===r.name)return this.debug&&a("[pocket]",'[$architect] asset props, "project, cache" are reserved'),this;try{if(i&&this.getArchitect(e)[r.name])continue}catch(t){}this.setArchitect(e,{[r.name]:r.value})}}return this}}},"./libs/Pocket/Pocket.libs.js":function(t,e,r){const{objectSize:i,warn:s,onerror:o,dispatcher:n,validID:a,copy:c,log:u,isString:l}=r("./node_modules/x-utils-es/umd/index.js"),h=r("./libs/Pocket/Imports.js"),{validProbe:d,validProjectID:p,idRegexValid:f}=r("./libs/utils.js");t.exports=class PocketLibs extends h{constructor(t,e){super(),this.debug=e||!1,this.async=(t||{}).async||null,this._onChange=(t||{}).onChange||null,this.completeOnNull=(t||{}).completeOnNull||null,this.disableWarnings=(t||{}).disableWarnings,this.withDataBank=(t||{}).withDataBank||!1,this.dispatcher=(t||{}).dispatcher?n():void 0,this.pocket={},this.payloadData={},this.lastPocketTimestamp=0,this._lastProjectID=null,this._lastProbeID=null,this._$cached_data={},this.$transfer_lastID="",this._ready={},this._ready_method_set={},this.d=void 0,this._projectSet={},this._transferCached=[],this._projectSetDispatcher={},this._projectSetAsync={},this._lastFilterList={},this.projectsCache={},this.deleteWithDelay=0!==(t||{}).deleteWithDelay?1e3:(t||{}).deleteWithDelay}projectSetDispatcher(t){return t?(this._projectSetDispatcher[t]||this._projectSetDispatcher[t]||(this._projectSetDispatcher[t]=n(t)),this._projectSetDispatcher[t]):(this.debug&&o("[projectSetDispatcher] projectID must be set"),null)}projectProbeList(t){return t?Object.entries(this.pocket).filter(([e])=>0===e.indexOf(t)).map(([t,e])=>e):[]}clearStoreTransfers(t=""){if(!t)return;let e=!1;return this._transferCached.length&&this._transferCached.forEach((r,i)=>{const{fromProbeID:s}=r||{};s&&-1!==s.indexOf(t)&&(this._transferCached.splice(i,1),e=!0,this.debug&&u("[pocket]",`[clearStoreTransfers] transferCached for probeID: ${s} has been removed`))}),e}storeTransfers(t,e){return this._transferCached.push({timestamp:(new Date).getTime(),fromProbeID:t,data:e}),this._transferCached}accessLastValidTransfer(t=100){if(!this._transferCached.length)return{};this._transferCached.sort((t,e)=>t.timestamp-e.timestamp);const e=c(this._transferCached).reduce((e,r,i)=>{const{timestamp:s}=r,o=(new Date).getTime()+t;return o>s&&o-s-t<=t&&(e=r,this._transferCached.splice(i,1)),e},{});return i(e)?e:{}}selectByTask(t="",e=null){if(t=l(t)?t:"",!f(t)&&t)return null;if(t.indexOf(":")>0&&!this.pocket[t])return this.debug&&s("[pocket]","[selectByTask] when using '::' prefix selector, it should come at 0 index"),null;if(t.split(":").length>3||2===t.split(":").length)return this.debug&&s("[pocket]",`[selectByTask] wrong taskName :${t}, allowed prefix is '::taskName'`),null;if(e&&this.lastProbeID(t,!0),this.pocket[t])return e&&this.lastProbeID(t),t;const r=(t=>{const e=t.split("::")[1]||t;return(this._lastProbeID||"").indexOf(e)>0&&e?this._lastProbeID:this._lastProjectID&&e?this._lastProjectID+"::"+e:this._lastProbeID})(t);return r?e&&this.lastProbeID(r):this.debug&&s("[pocket]","[selectByTask] newProbeID was not found from taskOrProbeID: "+t),r}lastProjectID(t="",e=null,r="strict"){return!t&&this._lastProjectID&&(t=this._lastProjectID),t&&(t=p(t)),t&&this.payloadData[t]&&(this._lastProjectID=t),(this.payloadData[t]||"strict"!==r)&&t?(t&&!this._lastProjectID&&(this._lastProjectID=t),t):null}lastProbeID(t="",e=null){return!t&&this._lastProbeID&&(t=this._lastProbeID),t&&(t=d(t)),t&&this.pocket[t]&&(this._lastProbeID=t),t&&this.pocket[t]?t:null}dataPropSelector(t="data()",e="",r={},o=!1,n={}){let a;try{return a=Object.entries(r).reduce((t,[e,r],i)=>(void 0!==n[e]&&(t[e]=n[e]),t),{}),i(a)||(a=void 0),i(a)+i(r)===2&&(a=Object.values(a).shift()),"data()"===t&&(this._$cached_data[e]=a),o?this:a}catch(r){return this.debug&&s("[pocket]","[$data] no dataProp found on probeID: "+e),"data()"===t&&(this._$cached_data[e]=a),o?this:a}}get probeProps(){return["campaign","data","task","ref","error","id","status"]}}},"./libs/Pocket/Pocket.module.js":function(t,e,r){const i=r("./libs/Models/ProjectPayloadModel.js"),s=r("./libs/Models/SetUpdateModel.js"),{idRegexValid:o}=(r("./libs/Probe/Probe.js"),r("./libs/utils.js")),{sq:n,objectSize:a,log:c,onerror:u,warn:l,isObject:h,validID:d}=r("./node_modules/x-utils-es/umd/index.js"),p=r("./libs/Pocket/Pocket.libs.js");t.exports=class PocketModule extends p{constructor(t,e){super(t,e),this.dispatcher&&this.dispatcher.subscribe((t,e)=>{const{probe:r,status:i}=t||{};"error"===i&&this.debug&&c("[pocket]",`[dispatcher] probe id:${r.id} error`),"open"===i&&this.debug&&c("[pocket]",`[dispatcher] probe id:${r.id} created`),"complete"===i&&this.debug&&c("[pocket]",`[dispatcher] probe id:${r.id} completed`)})}payload(t,e,r="new"){try{t=new i(t)}catch(t){return u("[payload]",t),!1}this.d=null;let s=null;if(this.payloadData[t.id]&&(!r||"new"===r))return this._lastProjectID=t.id,this.debug&&l("[$payload] this payload.id already exists"),!0;let n=void 0===this.payloadData[t.id];(this._lastFilterList[t.id]||[]).length&&(this._lastFilterList[t.id]=[]);for(let e of t.tasks){if(!e.task){this.debug&&l("[pocket]","[$payload] task must be set for your tasks");continue}if(!o(e.task)||-1!==e.task.indexOf("::")){this.debug&&l("[pocket]","[$payload] invalid taskName, failed idRegexValid validation");continue}const i=`${t.id}::${e.task}`;"update"!==r||n||!this.pocket[i]?(this.payloadData[t.id]||(this.payloadData[t.id]={value:[],status:"open",timestamp:(new Date).getTime()}),this.payloadData[t.id].value.filter(t=>-1!==t.task.indexOf(e.task)).length?this.debug&&!this.disableWarnings&&l("[pocket]",`the same task "${e.task}" already exists on the payload, you must choose uniq`):(this.payloadData[t.id].value.push(e),this.lastPocketTimestamp=this.payloadData[t.id].timestamp)):(e.data&&(this.pocket[i].data=e.data),e.status&&(this.pocket[i].status=e.status),!e.status&&e.data&&"open"===this.pocket[i].status&&(this.pocket[i].status="updated"),e.ref&&(this.pocket[i].ref=e.ref),e.error&&(this.pocket[i].error=e.error),e.campaign&&(this.pocket[i].campaign=e.campaign),s=!0,this._lastProjectID=t.id)}return"update"===r&&this.payloadData[t.id]&&!n?(this.projectsCache[t.id]="open",s):!!this.payloadData[t.id]&&(this.lastProjectID(t.id),this.projectsCache[t.id]="open",this.distributor().setDefer(t.id),this.projectSetDispatcher(t.id).next({projectID:t.id}),!0)}$projectSetAsync(t=""){const e=this;return t=this.lastProjectID(t,!1,null),this._projectSetAsync[t]||(this._projectSetAsync[t]=n(),this.projectSetDispatcher(t).subscribe((function(t,r){e._projectSetAsync[r].resolve(t),this.del()}))),this._projectSetAsync[t].promise}probeStatusAsync(t=""){return(t=>(this.d=t,this))((t=this.lastProbeID(t))?this.pocket[t].getStatusAsync:null)}update(t,e=null,r){return this._setUpdate(t,e,r,"update")}_set(t,e){return this._setUpdate(t,null,e,"set")}_get(t="",e){return this.d=null,(t=>(this.d=t,e?this:this.d))((t=this.lastProbeID(t))?this.pocket[t]:null)}$activeTasks(t=""){const returnAs=t=>(this.d=t,this);return t=this.lastProjectID(t),a(this.pocket)?returnAs(Object.entries(this.pocket).reduce((e,[r,i])=>(0===r.indexOf(t||"")&&t&&this.payloadData[t]?e.push(i.task):t||e.push(i.task),e),[])):returnAs([])}ready(t=""){if(this.d=null,!this._ready[t])throw"ready[payloadID] is not set, maybe you called it before $payload()";return this._ready[t].promise}_setUpdate(t,e=null,r="",i="update"){t=new s(t||{});const returnAs=t=>(this.d=t,this);let o=this.lastProbeID(r);if(!o)return this.debug&&u("[pocket]","[$update] must specify id"),returnAs(!1);if(!a(t))return this.debug&&l("[pocket]","[$update] dataFrom{} must not be empty"),returnAs(!1);if(!this.pocket[o])return this.debug&&u("[pocket]",`[$update] this.pocket with id:${o} not found`),returnAs(!1);let n=!1;this._lastProjectID=o;let c=Object.entries(t).reduce((t,[e,r])=>{const i=this.probeProps.indexOf(e);return this.probeProps[i]===e&&t.push({inx:i,data:{[e]:r}}),t},[]);for(let t=0;t<c.length;t++){if(void 0===(c[t]||{}).data)continue;const[r,i]=Object.entries(c[t].data)[0];void 0===this.pocket[o][r]?this.debug&&l("[pocket]",`[$update] not a valid prop/value: { ${r}:${this.pocket[o][r]} }`):("data"===r&&(this.pocket[o][r]=!0===e?Object.assign({},this.pocket[o][r],i):i),"status"!==r&&"ref"!==r&&"error"!==r&&"campaign"!==r||(this.pocket[o][r]=i),n=!0)}return n&&"set"===i&&(this.clearStoreTransfers(o),this.$transfer_lastID===o&&(this.$transfer_lastID=""),this._$cached_data[o]&&delete this._$cached_data[o]),returnAs(n)}setDefer(t){if(!(t=d(t)))throw"id must be set";if(this._ready[t]||(this._ready[t]=n()),!a(this.pocket)){const e="[setDefer] probe is empty, so nothing set, id:"+t;return this.debug&&u("[pocket]",e),void this._ready[t].reject(e)}const e=Object.values(this.pocket).filter(e=>-1!==e.id.indexOf(t));if(!e.length){const e=`[setDefer] no pocketSet found for id:${t} `;return this.debug&&u("[pocket]",e),void this._ready[t].reject(e)}try{const userOutput=t=>{const e={};if(!h(t))return null;for(let r=0;r<this.probeProps.length;r++){const i=this.probeProps[r];void 0!==t[i]&&null!==t[i]&&(e[i]=t[i])}return e};return Promise.all(e.map(t=>t.sq.promise)).then(e=>{const r=e.map(t=>userOutput(t.probe)).filter(t=>!!t);this._ready[t].resolve(r)},t=>{u("[pocket]","[setDefer] Promise.all",t)}),!0}catch(t){u("[pocket]","[setDefer]",t)}return!1}distributor(){for(let[t,e]of Object.entries(this.payloadData))if(!(this.lastPocketTimestamp>e.timestamp)&&"complete"!==e.status&&"send"!==e.status&&"error"!==e.status)for(let r of e.value.values()){const e={id:t,...r};this.setProbe(e)||u("[pocket]",`probe for id:${t} already exists`)}return this}setProbe(t={}){if(!t.id||!t.task)throw"id and task both must be set";if(!d(t.id))throw"props.id not valid";const e=`${t.id}::${t.task}`;if(this.pocket[e])return this.debug&&c("[pocket]",`[setProbe] probe: ${e} already set`),null;try{t.id=e;const r=null!==this.dispatcher?this._emit.bind(this):null;let i={withDataBank:this.withDataBank,disableWarnings:this.disableWarnings,onChange:this._onChange,emitter:r,completeOnNull:this.completeOnNull};const s=new(0,this.Probe)(t,i,this.debug);this.pocket[e]=s}catch(t){return u("[pocket]",t),null}return this.pocket[e]}_emit(t){if(!t)return null;if(!this.dispatcher)return!1;try{return this.dispatcher.next(t),!0}catch(t){return u("[pocket]","[_emit] dispatcher did not emit"),!1}}}},"./libs/Pocket/Pocket.selectors.js":function(t,e,r){r("./libs/Probe/Probe.js"),r("./libs/Models/SetUpdateModel.js");const{copy:i,warn:s,isArray:o,onerror:n,objectSize:a,isString:c,uniq:u,isFunction:l}=r("./node_modules/x-utils-es/umd/index.js"),{validProbe:h,validProjectID:d}=r("./libs/utils.js"),p=r("./libs/Pocket/Pocket.architect.js");t.exports=class PocketSelectors extends p{constructor(t,e){super(t,e)}$architect(t,e){return super.architect(t,e)}$asset(t,e,r){return super.asset(t,e,r)}$exists(t){return!!this.selectByTask(t)}$projectComplete(t){return this.projectsCache[t]?"complete"===this.projectsCache[t]:null}$projectSet(t=""){return t=d(t),!!this.payloadData[t]}$condition(t,e){if(!l(t))return this.debug&&s("[pocket]","[$condition] must provide callback"),this;let r="PocketSelf",i=null;if(0===(e=c(e)?e:"").indexOf("::")){if(e=this.selectByTask(e,!0),r="ProbeSelf",!(e=this.lastProbeID(e)))return this.debug&&s("[pocket]","[$condition] probeID not found"),this}else{if(!this.lastProjectID(e))return this.debug&&s("[pocket]","[$condition] projectID not found"),this;r="PocketSelf"}if("PocketSelf"===r&&(i=this),"ProbeSelf"===r&&(i=this.$get(e)),!i)return this.debug&&s("[pocket]","[$condition] no valid self value"),this;return t.call(i,i)||this}get $projectID(){return this._lastProjectID}$probeStatusAsync(t=""){t=this.selectByTask(t,!0);let e=this.lastProbeID(t);return super.probeStatusAsync(e)}$get(t,e){t=this.selectByTask(t,!0);let r=this.lastProbeID(t);return super._get(r,e)}$getByRef(t=""){return Object.assign(this.pocket).filter(([e,r],i)=>r.ref===t)}$set(t,e){e=this.selectByTask(e,!0);let r=this.lastProbeID(e);return super._set(t,r)}$probe(t=""){t=this.selectByTask(t,!0);let e=this.lastProbeID(t);if(this.pocket[e]){if("Probe"===this.pocket[e].constructor.name)return this.pocket[e];this.debug&&n("[pocket]",`[$probe] probeID: ${t} is not an instance of Probe{}`)}else this.debug&&s("[pocket]","[$probe] not found for probeID: "+t)}$update(t,e,r){r=this.selectByTask(r,!0);let i=this.lastProbeID(r);return super.update(t,e,i)}$select(t){return t=c(t)?t:"",this.lastProjectID(t),this}$filter(t,e){const r=this;e=this.lastProjectID(e);const returnAs=t=>(this.d=(t||[]).filter(t=>void 0===t.isNONE),r);if(!l(t))return returnAs([]);if(!this.payloadData[e])return this.debug&&s("[pocket]","[$filter] no projectID found"),returnAs(null);let i=[];return(this._lastFilterList[e]||[]).length?i=this._lastFilterList[e]:(this._lastFilterList[e]=[],i=this.projectProbeList(e)),i.forEach((r,i)=>{if(r.isNONE)return;const s=t.call(r,r);if(!s)return this._lastFilterList[e]=this._lastFilterList[e].filter(t=>t.id!==r.id),void this._lastFilterList[e].push({id:r.id,isNONE:!0});void 0===s||!0!==s&&1!==s?this._lastFilterList[e].push({id:r.id,isNONE:!0}):this._lastFilterList[e].filter((t,e)=>(t||{}).id===r.id).length||this._lastFilterList[e].push(r)}),returnAs(this._lastFilterList[e])}$compute(t,e=""){e=this.lastProjectID(e);const returnAs=t=>(t&&delete this._lastFilterList[e],this.d=t,this);if(!l(t))return this.debug&&s("[pocket]","[$compute] cb must be a function"),returnAs(null);if(!this.payloadData[e])return this.debug&&s("[pocket]","[$compute] no project found fo your/last id projectID:"+e),returnAs(null);let r=this._lastFilterList[e]||[];return r.length?(this._lastFilterList[e]=r=r.filter(t=>void 0===t.isNONE).filter(({id:t},e,r)=>1===r.filter(e=>t===e.id).length),r.forEach(e=>{"complete"!==e.status&&"send"!==e.status&&t.call(e,e)}),returnAs(this._lastFilterList[e])):(this.projectProbeList(e).forEach(e=>{"complete"!==e.status&&"send"!==e.status&&t.call(e,e)}),returnAs(this.projectProbeList(e)))}$list(t="",e=null,r="self"){if(t=this.lastProjectID(t),!this.payloadData[t])return[];const list=()=>Object.entries(this.pocket).reduce((e,[r,i],s)=>(i.id.includes(t)&&e.push(i),e),[]);return l(e)?(this.projectProbeList(t).forEach(t=>{e(t.all())}),"self"!==r&&r?"list"===r?list():void 0:this):list()}$transfer(t=""){return t=this.selectByTask(t,!0),t=this.lastProbeID(t),this.pocket[t]?(this.storeTransfers(t,i(this.pocket[t].data)),this.$transfer_lastID=t,this):(this.debug&&s("[pocket]","[$transfer] no Probe{} found for this id fromProbeID:"+t),this)}$to(t="",e=!0,r=100){if(t=this.selectByTask(t,e),e&&(t=h(t)),!t)return this.debug&&s("[pocket]","[$to] toProbeID is invalid"),this;if(!this.pocket[t])return this.debug&&s("[pocket]","[$to] no Probe{} found for this id toProbeID:"+t),this;if(this.$transfer_lastID){const e=this.accessLastValidTransfer(r);if(a(e)){const{fromProbeID:r,data:i}=e;if(this.$transfer_lastID===r){if("complete"===this.pocket[t].status||"send"===this.pocket[t].status)return this.debug&&s("[pocket]",`[$to] cannot transfer since toProbeID: ${t} is already complete`),this.$transfer_lastID="",this;this.pocket[r].data=null,this.pocket[t].data=i}}else this.debug&&s("[pocket]","[$to] no last valid transfer found");this.$transfer_lastID=""}return this}$of(t=""){return this.selectByTask(t,!0),this}$data(t,e="",r=!1){return e=this.selectByTask(e,!0),this.pocket[e]?(o(t)&&(t||[]).length&&(t=u(t).reduce((t,e)=>(void 0!==e&&(t[e.trim()]=!0),t),{})),t&&a(t)?this.dataPropSelector("data()",e,t,r,i(this.pocket[e].data)):(this._$cached_data[e]=i(this.pocket[e].data),r?this:this._$cached_data[e])):r?this:void 0}$cached(t={},e=""){if(e=this.selectByTask(e,!0),!this.pocket[e])return;const r=void 0!==this._$cached_data[e]&&null!==this._$cached_data[e];return r?(c(t)&&(t||"").length&&(t=u(t.trim().replace(/ /gi,"").split(",")).reduce((t,e)=>(void 0!==e&&(t[e]=!0),t),{})),!a(this._$cached_data[e])&&r?a(t)?void 0:this._$cached_data[e]:t&&a(t)?this.dataPropSelector("cached()",e,t,!1,this._$cached_data[e]):void 0===this._$cached_data[e]?void 0:this._$cached_data[e]):void 0}$campaign(t){return t=this.selectByTask(t,!0),this.pocket[t]?i(this.pocket[t].campaign):null}$ref(t){if(t=this.selectByTask(t,!0),this.pocket[t])return i(this.pocket[t].ref)}$status(t){if(t=this.selectByTask(t,!0),this.pocket[t])return i(this.pocket[t].status)}$task(t){if(t=this.selectByTask(t,!0),this.pocket[t])return i(this.pocket[t].task)}$error(t){if(t=this.selectByTask(t,!0),this.pocket[t])return i(this.pocket[t].error)}$all(t){if(t=this.selectByTask(t,!0),this.pocket[t])return i(this.pocket[t].all())}$onChange(t,e,r){return this._onChange?(r=this.selectByTask(r,!0),this.pocket[r]?(this.pocket[r].onChange(t,e),this):null):(this.debug&&s("[pocket]","[$onChange] opts.onChange=true must be enabled to use this feature"),this)}$onProbeComplete(t,e){if(!this._onChange)return this.debug&&s("[pocket]","[$onChange] opts.onChange=true must be enabled to use this feature"),this;if(e){if(e=this.selectByTask(e,!0),!this.pocket[e])return;return this.pocket[e].onChange(t,"status:complete"),this}{let e=this.lastProjectID();return this.projectProbeList(e).forEach(e=>{e.onChange(t,"status:complete")}),this}}}},"./libs/Pocket/PocketExit.module.js":function(t,e,r){function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _toPropertyKey(t){var e=function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_typeof(e)?e:String(e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t})(t,e)}var i=function(t){function Pocket(t,e){return function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Pocket),function _callSuper(t,e,r){return e=_getPrototypeOf(e),function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function _isNativeReflectConstruct(){return!!t}()}()?Reflect.construct(e,r||[],_getPrototypeOf(t).constructor):e.apply(t,r))}(this,Pocket,[t,e])}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(Pocket,t),function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Pocket)}(r("./libs/Pocket/Pocket.selectors.js"));t.exports=i},"./libs/Pocket/PocketExtended.js":function(t,e,r){r("./libs/Probe/Probe.js"),r("./libs/Models/ProjectPayloadModel.js");const{onerror:i,warn:s,isPromise:o,validID:n,isString:a}=r("./node_modules/x-utils-es/umd/index.js"),c=r("./libs/Pocket/Pocket.module.js");t.exports=class PocketModuleExt extends c{constructor(t,e){super(t,e),this.$project=this.$payload}deletePocketSet(t){if(t){if(Object.values(this.pocket).length)for(let e of Object.values(this.pocket))this._$cached_data[e.id]&&delete this._$cached_data[e.id],e.id.includes(t)&&delete this.pocket[e.id];this.payloadData[t]&&delete this.payloadData[t],this._ready[t]&&delete this._ready[t],void 0!==this._projectSetDispatcher[t]&&delete this._projectSetDispatcher[t],this._projectSetAsync[t]&&delete this._projectSetAsync[t],this._lastFilterList[t]&&delete this._lastFilterList[t];try{this.architectConfig[t]&&delete this.architectConfig[t]}catch(t){}this.clearStoreTransfers(t)}}$removeProject(t){return t=a(t)?t:"",t=this.lastProjectID(t),this.deletePocketSet(t),this}$payload(t,e,r){const returnAs=t=>(this.d=t,this),s=void 0!==e?e:this.async;return s&&o(t)?returnAs(t.then(t=>this.payload(t,!1,r),t=>t)):s||o(t)?(this.debug&&i("[pocket]","[payload] with opts.async=true, data must be a promise, or do not set async when not a promise"),returnAs(!!s&&Promise.reject())):returnAs(this.payload(t,!1,r))}$ready(t,e=!1,r=!1){try{const returnAs=t=>(this.d=t,this.d&&!e&&this.d.catch(t=>{this.disableWarnings||s("[pocket]",t)}),this);let i=this.lastProjectID(t,null,!0===r?"strict":null);if(!t&&i&&(t=i),"complete"===this.projectsCache[t]&&!e)return returnAs(Promise.reject(`[$ready] project: ${t} already complete`));if(void 0!==this._ready_method_set[t]&&!e){if(!0===this._ready_method_set[t])return returnAs(Promise.reject(`[$ready] project: ${t} already complete, cannot recall same $ready, ALLOW_MULTIPLE_FALSE`));if(!1===this._ready_method_set[t])return returnAs(Promise.reject(`[$ready] project: ${t} you already declared $ready somewhere else, this call is ignored, ALLOW_MULTIPLE_FALSE`))}if(!i)return returnAs(Promise.reject("payloadID must be set"));const o=this.$projectSetAsync(i).then(({projectID:t})=>this.ready(t).then(e=>(this.deleteWithDelay?setTimeout(()=>{this.deletePocketSet(t)},this.deleteWithDelay):this.deletePocketSet(t),this.projectsCache[t]="complete",this._ready_method_set[i]=!0,e),Promise.reject),Promise.reject);return this._ready_method_set[i]=!1,returnAs(o)}catch(t){this.disableWarnings||i("[pocket]",t)}}}},"./libs/Probe/Probe.dataBank.js":function(t,e,r){const{uniqBy:i,isArray:s}=r("./node_modules/x-utils-es/umd/index.js");t.exports=class ProbeDataBank{constructor(t,e,r){this._dataBank=[],this.debug=r}set dataBank(t){if(s(t)){if(t.filter(t=>t.data_id).length)return}else if((t||{}).data_id)return;this._dataBank.push({data:t,data_id:(new Date).getTime().toString()}),this._dataBank=this._dataBank.filter(t=>void 0!==t.data)}get dataBank(){return i(this._dataBank||[],"data_id")}}},"./libs/Probe/Probe.js":function(t,e,r){const{isString:i,sq:s,isArray:o,warn:n,log:a,isNumber:c,onerror:u,last:l,copy:h,isObject:d,isFunction:p,dispatcher:f}=r("./node_modules/x-utils-es/umd/index.js"),_=r("./libs/Probe/Probe.dataBank.js");t.exports=class Probe extends _{constructor(t,e={},r){if(super(t,e,r),this.debug=r||!1,(c(t.id)||t.id)&&(t.id=t.id.toString()),!t.task||!i(t.task))throw"task as string is required";this._id=null,this._error=[],this._ref=null,this._task=null,this._status=null,this._data=null,this._campaign=null,this._dataIndex=0,this._statusIndex=0,this._statusAsync=[],this.task=t.task,this.id=t.id,this.status="open",this._sealed=!1,this._onChange=e.onChange||null,this._onchangeDispatch=void 0,this.emitter=e.emitter||null,this.withDataBank=e.withDataBank||!1,this.completeOnNull=e.completeOnNull||null,this.disableWarnings=(e||{}).disableWarnings,t.ref!==this._ref&&(this.ref=t.ref),t.data!==this._data&&(this.data=t.data),t.campaign&&(this.campaign=t.campaign),this._completeAsync=s()}get sq(){return this._sq||(this._sq=s()),this._sq}set id(t){if(this._id)return void(this.debug&&n("[pocket]","cannot update already set id: "+this._id));if(!t)throw"id is required";if(t.split(" ").length>1)throw"each id cannot have spaces";if(-1===t.indexOf("::"))throw"each id must be of format id::taskName";if(-1!==t.indexOf(":::"))throw"each id must be of format id::taskName";const e=/[`~!@#$%^&*()\=?;'",.<>\{\}\[\]\\\/]/gi;if(new RegExp(e,"gi").test(t))throw"your id is invalid, allowed chars: "+e;if(-1===(t=t.replace(/ /gi,"_").toLowerCase()).indexOf(this._task))throw"wrong id setup, your id should make up the task name, example: id='cocacola::drink'";this._id=t}get id(){return this._id}set error(t){t&&(this._error.push(o(t)?t.toString():t),this._error=this._error.filter(t=>!!t),this.dispatchChange("error"))}get error(){if(this._error.length)return this._error}get ref(){return this._ref}set ref(t){t&&(i(t)?"complete"!==this.status&&"send"!==this.status&&(this._ref=t,this.dispatchChange("ref")):n("[pocket]","[ref] must be a string"))}get campaign(){return this._campaign}set campaign(t){void 0!==t&&(this._campaign?this.debug&&!this.disableWarnings&&n("[pocket]","cannot update already set campaign "+this._campaign):t&&(i(t)?(this._campaign=t,this.dispatchChange("campaign")):this.debug&&n("[pocket]","campaign must be a string",t)))}set task(t){if(void 0===t)return;if(this._task)return void(this.debug&&!this.disableWarnings&&n("[pocket]","cannot update already set task"));if(!t)return;if(!i(t))return void(this.debug&&n("[pocket]","task must be a string"));if(-1!==t.indexOf("::"))throw"task separator :: is restricted";if(t.split(" ").length>1)throw"task cannot have spaces, use separators: _+";const e=/[`~!@#$%^&*()\=?;'",.<>\{\}\[\]\\\/]/gi;if(new RegExp(e,"gi").test(t))throw"your task is invalid, allowed chars: "+e;this._task=t.replace(/ /gi,"_").toLowerCase()}get task(){return this._task}set data(t){void 0!==t&&("complete"===this.status||"send"===this.status?this.debug&&!this.disableWarnings&&n("[pocket]","you cannot update data once the status is complete or send"):(this._dataIndex++,"open"===this.status&&null!==this._data&&this._dataIndex>1&&(this.status="updated"),this._data=t,this.withDataBank&&(this.dataBank=t),this.dispatchChange("data")))}get data(){return this._data}update(t,e=null){return"complete"===this.status||"send"===this.status?(this.debug&&!this.disableWarnings&&n("[Probe][update] cannot update data on complete status"),this):!d(t)&&e?(this.debug&&n("[pocket]","[Probe][update] cannot update none object 'data' with option 'merge=true' set"),this):(d(t)&&e?this.data=Object.assign({},this.data,t):void 0!==t&&(this.data=t),this)}get statusStackOrder(){return{open:{value:1,set:!1},updated:{value:2,set:!1},complete:{value:3,set:!1},send:{value:4,set:!1},error:{value:5,set:!1}}}get status(){return this._status}set status(t){(e=>{try{if(this.statusStackOrder[e].value>2&&!0===this.statusStackOrder[e].set)return!1}catch(t){u("statusStackOrder invalid status")}switch(e){case"open":if("updated"===this._status||"send"===this._status||"complete"===this._status){this.debug&&n("[pocket]","cannot set status back to open once set to updated/complete/send");break}this._status=e,this.statusStackOrder[e].set=!0,this.onOpenStatus(t),this.setStatusAsync=e,this.dispatchChange("status");break;case"updated":if("complete"===this._status||"send"===this._status){this.debug&&n("[pocket]","cannot update status to 'updated' then previously set to 'complete/send'");break}this._dataIndex>0&&(this._status=e,this.statusStackOrder[e].set=!0,this.setStatusAsync=e,this.dispatchChange("status"),this.debug&&a(`id:${this.id}, data updated`));break;case"complete":if(null===this.data&&!0!==this.completeOnNull){this.debug&&n("[pocket]","[status] cannot complete status because data is null, to complete you set data prop to false");break}this.statusStackOrder[e].set=!0,this.setStatusAsync=e,this._status=e,this.dispatchChange("status"),this.onComplete(t);break;case"send":if("complete"!==this._status){this.debug&&n("[pocket]","cannot update status to 'send' then previously not set to 'complete'");break}this._status=e,this.statusStackOrder[e].set=!0,this.setStatusAsync=e,this._completeAsync.resolve({status:this._status,id:this.id}),this.dispatchChange("status");break;case"error":if("complete"===this._status)return;this.statusStackOrder[e].set=!0,this.setStatusAsync=e,this.dispatchChange("status"),this.onComplete(t);break;default:this.debug&&n("[pocket]",`id:${this.id},  you set invalid status: ${e}, nothing changed`)}})(t)}set setStatusAsync(t){const e={timestamp:(new Date).getTime(),p:s()};this._statusAsync.push(e)}get setStatusAsync(){const t=l(this._statusAsync.sort((t,e)=>t.timestamp-e.timestamp).map(t=>t.p));return t.resolve(h(this.status)),t}get getStatusAsync(){return this.setStatusAsync.promise}get completeAsync(){return this._completeAsync.promise}get statusAsync(){return this.getStatusAsync}all(){const t={error:this.error,ref:this.ref,campaign:this.campaign,data:this.data,id:this.id,task:this.task,status:this.status};return this.withDataBank&&(t.dataBank=h(this.dataBank)),t}onChange(t,e="all"){if(!this._onChange)return this.debug&&n("[pocket]","[onChange] to use need to set opts.onChange=true"),this;if(!p(t))return this.debug&&n("[onChange] cb must be a function"),this;let r=["all","data","status","ref","error","campaign"];if(r=[].concat(r,["status:complete"]),!r.includes(e))return this.debug&&n("[pocket]","[onChange] no watch available for "+e),this;let i=r.indexOf("status:complete");r.splice(i,1);const s=this;return this.onchangeDispatch?(this.onchangeDispatch.subscribe((function(r,i){if(r.changed&&"all"===e)t.bind(s)(s,i);else{if("status:complete"===e){if("status"===r.changed&&("send"===s.status||"complete"===s.status)&&!s._sealed){let e={...h(s),status:"complete"};t.bind(s)(e,i),s._sealed=!0}return this}r.changed===e&&void 0!==s[e]&&t.bind(s)(s[e],i)}})),this):(this.debug&&n("[pocket]","[onChange] onchangeDispatch no longer active"),this)}dispatchChange(t){return!!this._onChange&&!!this.onchangeDispatch&&(this.onchangeDispatch.next({changed:t}),!0)}get onchangeDispatch(){return this._onChange?(this._onchangeDispatch||(this._onchangeDispatch=f(this.id)),this._onchangeDispatch):(this.debug&&n("[pocket]","[onchangeDispatch] to use need to set opts.onChange=true"),null)}onComplete(t){return"complete"!==t&&"error"!==t||"send"===this._status||!(this._dataIndex>0||!0===this.completeOnNull)||(this.emitter&&setTimeout(()=>{this.emitter({probe:this,status:t})}),this._status="send",this.sq.resolve({probe:this.all()}),setTimeout(()=>{this.onchangeDispatch&&this.onchangeDispatch.del()})),this}onOpenStatus(t){return"open"===t&&this.emitter&&setTimeout(()=>{this.emitter({probe:this,status:"open"})}),this}}},"./libs/utils.js":function(t,e,r){const{validID:i}=r("./node_modules/x-utils-es/umd/index.js");e.errorMessages=t=>{const e={};for(let[r,i]of Object.entries(t))e[r]={message:i[0],code:r};return e};const idRegexValid=(t="")=>!new RegExp(/[`~!@#$%^&*()\=?;'",.<>\{\}\[\]\\\/]/gi,"gi").test(t);e.validProjectID=(t="")=>{if(t&&!((t||"").split(" ").length>1)&&idRegexValid(t))return t},e.validProbe=(t="")=>{if((t=i(t))&&idRegexValid(t)&&-1!==t.indexOf("::"))return t},e.idRegexValid=idRegexValid},"./node_modules/process/browser.js":function(t,e){var r,i,s=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(r===setTimeout)return setTimeout(t,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){r=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){i=defaultClearTimeout}}();var o,n=[],a=!1,c=-1;function cleanUpNextTick(){a&&o&&(a=!1,o.length?n=o.concat(n):c=-1,n.length&&drainQueue())}function drainQueue(){if(!a){var t=runTimeout(cleanUpNextTick);a=!0;for(var e=n.length;e;){for(o=n,n=[];++c<e;)o&&o[c].run();c=-1,e=n.length}o=null,a=!1,function runClearTimeout(t){if(i===clearTimeout)return clearTimeout(t);if((i===defaultClearTimeout||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];n.push(new Item(t,e)),1!==n.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=noop,s.addListener=noop,s.once=noop,s.off=noop,s.removeListener=noop,s.removeAllListeners=noop,s.emit=noop,s.prependListener=noop,s.prependOnceListener=noop,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},"./node_modules/webpack/buildin/global.js":function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},"./node_modules/x-utils-es/umd/index.js":function(t,e,r){"use strict";(function(r,i){var s,o,n,a;(function glob(){try{return globalThis||r||window}catch(t){}try{if(r);}catch(t){return window}})(),a=function(t,e){var s=Number.prototype,o=String.prototype;function asyncGeneratorStep(t,e,r,i,s,o,n){try{var a=t[o](n),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(i,s)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(i,s){function _next(t){asyncGeneratorStep(o,i,s,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(o,i,s,_next,_throw,"throw",t)}var o=t.apply(e,r);_next(void 0)}))}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r,i=0;i<e.length;i++)(r=e[i]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(e){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function _wrapNativeSuper(t){function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,Wrapper)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)})(t)}function _construct(){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(t,e,r){var i=[null];i.push.apply(i,e);var s=new(Function.bind.apply(t,i));return r&&_setPrototypeOf(s,r.prototype),s}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t})(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dispatcher(t,e){var r=this,i="[dispatcher]";this.uid=((t||"").toString()||(new Date).getTime()).toString(),this.debug=e,this.cbQueue={},this.dispatchInstance={},this._isActive=null,this._onComplete_cb=null,this.index=0,this.data=null,this.onComplete=t=>(this._onComplete_cb=t,this),this.initListener=()=>(this.Dispatch(),this._isActive=!0,this),this.next=function(t){return void 0===t&&(t=null),!1!==r._isActive&&r.initListener(),r.dispatchInstance[r.uid]?r.dispatchInstance[r.uid].next(t):r.debug&&f({message:i+" for uid not available",uid:r.uid}),r},this.Dispatch=()=>{if(this.dispatchInstance[this.uid])return this;var t=this;return this.dispatchInstance[this.uid]||(this.dispatchInstance[this.uid]=new function D(){this.uid=t.uid,this.data=null,this.next=e=>("cb"!==(e||{}).type&&(this.data=e),"cb"===(e||{}).type?void("function"==typeof e.cb&&(!t.cbQueue[t.uid]&&(t.cbQueue[t.uid]=e.cb),this.data&&(t.index++,t.data=this.data,e.cb.call(t,this.data,t.uid,t.index)))):void(this.data?"function"==typeof t.cbQueue[t.uid]&&(t.index++,t.data=this.data,t.cbQueue[t.uid].call(t,this.data,t.uid,t.index)):t.debug&&_(i+" no callback data")))}),this},this.isActive=()=>this._isActive,this.del=()=>(delete this.cbQueue[this.uid],delete this.dispatchInstance[this.uid],this._isActive=!1,"function"==typeof this._onComplete_cb&&this._onComplete_cb(this.uid),this),this.subscribe=t=>"function"==typeof t?(this.dispatchInstance[this.uid]||this.Dispatch(),this.dispatchInstance[this.uid]&&this.dispatchInstance[this.uid].next({type:"cb",cb:t}),this):(this.debug&&_(i+"[subscribe] cb must be set"),this),this.init=this.initListener,this.sub=this.subscribe,this.emit=this.next,this.delete=this.del,this.unsubscribe=this.del}Object.defineProperty(e,"__esModule",{value:!0});var n,a,c,u,l=(a=(n=Object).getPrototypeOf||function(t){return t.__proto__},c=n.setPrototypeOf||function(t,e){return t.__proto__=e,t},u="object"==typeof Reflect?Reflect.construct:function(t,e,r){var i,s=[null];return s.push.apply(s,e),i=t.bind.apply(t,s),c(new i,r.prototype)},function fixBabelExtend(t){var e=a(t);return c(t,c((function Super(){return u(e,arguments,a(this).constructor)}),e))}),isWindow=()=>{try{if("test"===(i.env||{}).NODE_ENV)return!1;if(window)return!0}catch(t){return!1}},h=function checkLoggerSetting(t){void 0===t&&(t=void 0);try{if(isWindow())return window.xUtilsConfig||(window.xUtilsConfig={}),window.xUtilsConfig?"off"===window.xUtilsConfig.logging?"off":(window.xUtilsConfig[t]?window.xUtilsConfig[t]:"on").toString():"on"}catch(t){}try{return r.xUtilsConfig||(r.xUtilsConfig={}),r.xUtilsConfig?"off"===r.xUtilsConfig.logging?"off":(r.xUtilsConfig[t]?r.xUtilsConfig[t]:"on").toString():"on"}catch(t){}return"on"},loggingON=()=>{try{if(isWindow())return"on"===(window.xUtilsConfig||{}).logging||void 0===(window.xUtilsConfig||{}).logging}catch(t){}try{return"on"===(r.xUtilsConfig||{}).logging||void 0===(r.xUtilsConfig||{}).logging}catch(t){}return!0},d=function callFN(t){if(void 0===t&&(t=void 0),"function"!=typeof t)return!1;try{var e=t();return!0===e||0<e}catch(t){return!1}},p=function logConstract(t,e){void 0===t&&(t=""),e.length||(e[0]="");var r=0===e.filter(t=>"string"==typeof t||void 0===t).length?"%o":"";"log"===t&&(e=[].concat("[90m[log][0m[2m"+r+" ",e,"[0m")),"debug"===t&&(e=[].concat("[90m[debug][0m[32m"+r+" ",e,"[0m")),"warn"===t&&(e=[].concat("[90m[warning][0m[1m"+r+" ",e,"[0m")),"alert"===t&&(e=[].concat("[90m[alert][0m[33m"+r+" ",e,"[0m")),"attention"===t&&(e=[].concat("[90m[attention][0m[36m"+r+" ",e,"[0m")),console.log.apply(null,e)},f=function log(){if(loggingON()&&"off"!==h("log")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return p("log",e)}},_=function warn(){if(loggingON()&&"off"!==h("warn")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return p("warn",e)}},g=function alert(){if(!isWindow()&&loggingON()&&"off"!==h("alert")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return p("alert",e)}},b=function onerror(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(loggingON()&&"off"!==h("error")&&"off"!==h("onerror")){e.length||(e[0]="");var i=0===e.filter(t=>"string"==typeof t||void 0===t).length,s=i?"%o":"";try{if(isWindow())return e=[].concat("[31m[error][0m[31m"+s+" ",e,"[0m"),void console.error.apply(null,e)}catch(t){}e=[].concat("[41m[error][0m[31m"+s+" ",e,"[0m"),console.error.apply(null,e)}},y=b,v=function isFunction(t){return void 0===t&&(t=void 0),"function"==typeof t},isBigInt=t=>"bigint"==typeof t,m=function isArray(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=void 0),(!v(e)||d(e))&&!isBigInt(t)&&!!t&&Array.prototype===t.__proto__},k=function typeCheck(t,e){void 0===e&&(e=!0);var ofType=r=>e?typeof t:r||typeof t,asPrototype=e=>e.prototype===t.prototype;try{return"symbol"==typeof t?{type:ofType(),value:0,primitiveValue:Symbol("")}:void 0===t?{type:ofType(),value:0,primitiveValue:void 0}:"boolean"==typeof t?{type:ofType(),value:+t,primitiveValue:Boolean()}:"bigint"==typeof t&&"object"==typeof Object(t)?{type:ofType(),value:1,primitiveValue:BigInt("")}:null===t?{type:ofType("null"),value:0,primitiveValue:{}}:t.__proto__===Date.prototype||asPrototype(Date)?{type:ofType("date"),value:1,primitiveValue:new Date}:o===t.__proto__?{type:ofType(),value:t.length,primitiveValue:String()}:Array.prototype===t.__proto__||asPrototype(Array)?{type:ofType("array"),value:(t||[]).length,primitiveValue:[]}:Promise.prototype===(t||"").__proto__||asPrototype(Promise)?{type:ofType("promise"),value:1,primitiveValue:Function}:Function.prototype===t.__proto__||asPrototype(Function)?{type:ofType(),value:1,primitiveValue:Function}:Object.prototype===t.__proto__||asPrototype(Object)?{type:ofType(),value:Object.keys(t).length,primitiveValue:{}}:Error.prototype===t.__proto__||asPrototype(Error)?{type:ofType("error"),value:Object.keys(t).length,primitiveValue:Error()}:t.__proto__===s||asPrototype(Number)?isNaN(t)?{type:ofType("NaN"),value:0,primitiveValue:Number()}:{type:ofType(),value:t,primitiveValue:Number()}:0==0<=+t?{type:typeof t,value:+t,primitiveValue:void 0}:{type:typeof t,value:0,primitiveValue:void 0}}catch(t){return y(t),{}}},isBoolean=t=>{if(void 0===t)return!1;if(null===t)return!1;if(!0===t||!1===t)return!0;try{if(t instanceof Boolean)return!0}catch(t){}return!1},isNull=t=>null===t,isUndefined=t=>void 0===t,isNumber=t=>{if(isBigInt(t))return!1;try{if(t instanceof Number)return!0}catch(t){}return!(null==t||""===t)&&t.__proto__===s},j=function stringSize(t){return void 0===t&&(t=""),null!=t&&t.__proto__===o?t.length:0},P=function isQPromise(t){void 0===t&&(t=void 0);try{if(1==(void 0!==t.promise&&"function"==typeof t.resolve&&"function"==typeof t.reject&&"function"==typeof t.fulfill&&"function"==typeof t.notify))return!0}catch(t){}return!1},isSQ=t=>{try{return"SimpleQ"===t.entity}catch(t){return!1}},isPromise=t=>{if(P(t))return!0;try{if(t instanceof Promise)return!0}catch(t){}return!1},w=function isObject(t,e){if(void 0===t&&(t=void 0),void 0===e&&(e=void 0),v(e)&&!d(e))return!1;if(isBigInt(t))return!1;if(isNaN(t)&&"number"==typeof t)return!1;if("function"==typeof t)return!1;if(!isNaN(+t)||void 0===t)return!1;if(t.__proto__===[].__proto__)return!1;if((Object.prototype===t.__proto__||Error.prototype===t.__proto__)&&t instanceof Object)return!0;if(void 0!==t.__proto__)try{return t instanceof Object}catch(t){return!1}return!!t.prototype},x=function uniq(t){var e;return void 0===t&&(t=[]),(e=t.filter((t,e,r)=>r.indexOf(t)===e))instanceof Array?e:[]},O=function isClass(t,e){return void 0===e&&(e=void 0),(!v(e)||d(e))&&!!t&&void 0!==t.prototype},S=function isRegExp(t){void 0===t&&(t=/\\/);try{return t instanceof RegExp}catch(t){return!1}},C=function isInstance(t,e){if(void 0===t&&(t={}),void 0===e&&(e=void 0),v(e)&&!d(e))return!1;if(!t)return!1;if(m(t))return!1;if(t.__proto__&&!O(t))try{return t.__proto__ instanceof Object}catch(t){return!1}return!1},I=function objectSize(t){return void 0===t&&(t={}),t&&isNaN(+t)&&(C(t)||Object.prototype===t.__proto__||Error.prototype===t.__proto__)?Object.keys(t).length:0},$=function isFalsy(t){return void 0===t&&(t=void 0),null==t||!1===t&&"boolean"==typeof t||(!0!==t||"boolean"!=typeof t)&&!("number"==typeof t&&0<t)&&(o===t.__proto__?1>t.length:Array.prototype===t.__proto__?0===(t||[]).length:Promise.prototype!==(t||{}).__proto__&&"function"!=typeof t&&(Object.prototype===t.__proto__||C(t)?0===Object.keys(t).length:Error.prototype!==t.__proto__&&(void 0!==t&&t.__proto__===s?!!isNaN(t)||0>=t:0==0<+t||!t&&!1)))},T=function isString(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=void 0),(!v(e)||d(e))&&null!=t&&"boolean"!=typeof t&&(""===t||o===t.__proto__)},copy=t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return k(t).primitiveValue}},A=l(function(t){function XReferenceError(t,r,i,s,o){var n;return _classCallCheck(this,XReferenceError),n=e.call(this,r,i,s),0<j(t)&&(n.name=t),"string"!=typeof i||n.fileName||(n.fileName=i),"number"==typeof s&&void 0===n.lineNumber&&(n.lineNumber=s),"number"==typeof o&&void 0===n.columnNumber&&(n.columnNumber=o),n}_inherits(XReferenceError,t);var e=_createSuper(XReferenceError);return XReferenceError}(_wrapNativeSuper(ReferenceError))),N=function referenceError(t){return void 0===t&&(t={name:"ReferenceError",message:void 0,fileName:void 0,lineNumber:void 0,columnNumber:void 0}),new A(t.name,t.message,t.fileName,t.lineNumber,t.columnNumber)},E=l(function(t){function XError(t,r,i,s,o){var n;return _classCallCheck(this,XError),(n=e.call(this,i,s,o)).id=void 0,n.name=void 0,"string"==typeof s&&void 0===n.fileName&&(n.fileName=s),"number"==typeof o&&void 0===n.lineNumber&&(n.lineNumber=o),n.name=j(t)?t:"XError",(T(r)||isNumber(r))&&(n.id=r.toString()),n}_inherits(XError,t);var e=_createSuper(XError);return XError}(_wrapNativeSuper(Error))),isError=t=>{try{return!(Error.prototype!==(t||"").__proto__)||t instanceof Error||t instanceof A}catch(t){return!1}},spread=(t,e)=>w(t)&&e&&(e||[]).length?Object.entries(t).reduce((t,r)=>{var[i,s]=r;return e.filter(t=>t===i).length&&(t[i]=s),t},{}):{};e.disableLogging=()=>{try{if(isWindow())return window.xUtilsConfig?window.xUtilsConfig.logging="off":window.xUtilsConfig={logging:"off"},!0}catch(t){}try{return r.xUtilsConfig?r.xUtilsConfig.logging="off":r.xUtilsConfig={logging:"off"},!0}catch(t){return!1}},e.resetLogging=()=>{try{if(isWindow())return window.xUtilsConfig?window.xUtilsConfig.logging="on":window.xUtilsConfig={logging:"on"},!0}catch(t){}try{return r.xUtilsConfig?r.xUtilsConfig.logging="on":r.xUtilsConfig={logging:"on"},!0}catch(t){return!1}},e.loggerSetting=function loggerSetting(t,e){if(void 0===t&&(t="log"),void 0===e&&(e="off"),!["log","warn","onerror","error","alert","attention","debug","stack","errorTrace"].includes(t)||!t)return!1;if(!["on","off"].includes(e)||!e)return!1;"onerror"===t&&(t="error");try{if(isWindow())return window.xUtilsConfig?window.xUtilsConfig[t]=e:window.xUtilsConfig={[t]:e},!0}catch(t){}try{return r.xUtilsConfig?r.xUtilsConfig[t]=e:r.xUtilsConfig={[t]:e},!0}catch(t){return!1}},e.checkLoggerSetting=h,e.stack=function stack(t,e){if(void 0===e&&(e=!1),loggingON()&&"off"!==h("stack")){var r=new Error(JSON.stringify(t)).stack.split("(");r.splice(1,1);var i=r[0].split(/\n/)[0].replace("Error","[STACK TRACE]");return r.splice(0,1),r.unshift(i),void(e?console.log(r):console.log.apply(null,r))}},e.errorTrace=function errorTrace(t,e){if(void 0===e&&(e=!1),loggingON()&&"off"!==h("errorTrace")){var r=new Error(JSON.stringify(t)).stack.split("(");r.splice(1,1);var i=r[0].split(/\n/)[0].replace("Error","[ERROR]");return r.splice(0,1),r.unshift(i),void(e?console.error(r):console.error.apply(null,r))}},e.loop=function loop(t,e){if(void 0===t&&(t=0),void 0===e&&(e=function cb(t){void 0===t&&(t=0)}),"function"!=typeof e||"number"!=typeof t)return[];for(var r,i=[],s=0;s<Array(t).length;s++){r=e.apply(this,[s]);try{if(r&&Object.entries(r).length&&r.break)break}catch(t){}i.push(r)}return i},e.isFalse=t=>{if(null===t)return!0;if(void 0===t)return!0;if("number"==typeof t&&1>t)return!0;if("boolean"==typeof t&&!1===t)return!0;try{if(t instanceof Boolean)return!1===t.valueOf()}catch(t){}return!1},e.isTrue=t=>{if(null===t)return!1;if(void 0===t)return!1;if("number"==typeof t&&0<t)return!0;if("boolean"==typeof t&&!0===t)return!0;try{if(t instanceof Boolean)return!0===t.valueOf()}catch(t){}return!1},e.isBoolean=isBoolean,e.isNull=isNull,e.isUndefined=isUndefined,e.isEmpty=t=>!isError(t)&&!k(t).value,e.head=function head(t){return void 0===t&&(t=[]),Array.prototype===(t||null).__proto__?t.flat().shift():void 0},e.last=function last(t){return void 0===t&&(t=[]),t&&Array.prototype===t.__proto__?t[t.length-1]:void 0},e.timer=function timer(t,e){if(void 0===t&&(t=()=>{}),void 0===e&&(e=0),"function"==typeof t){e="number"==typeof e&&0<=e?e:0;var r=setTimeout(()=>{t(),clearTimeout(r)},e)}},e.interval=function interval(t,e,r){if(void 0===t&&(t=()=>{}),void 0===e&&(e=0),void 0===r&&(r=0),"function"!=typeof t)return null;e="number"==typeof e&&0<=e?e:0,r="number"==typeof r&&0<=r?r:0;var i=0,s=setInterval(()=>(t(),r<=i?clearInterval(s):void(i+=e)),e)},e.sq=()=>{var t=l(function(t){function SimpleQ(t){var r;return void 0===t&&(t=function deferrerCallback(t,e){void 0===t&&(t=()=>{}),void 0===e&&(e=()=>{})}),_classCallCheck(this,SimpleQ),(r=e.call(this,t))._progress_cb={every:100,timeout:1e3,cb:void 0,done:void 0,index:0},r}_inherits(SimpleQ,t);var e=_createSuper(SimpleQ);return function _createClass(t,e,r){e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r)}(SimpleQ,[{key:"progress",value:function progress(t,e,r){void 0===e&&(e=100),void 0===r&&(r=1e3),e>r&&(e=0);var i=0;this._progress_cb.cb=t,this._progress_cb.every=e,this._progress_cb.timeout=r,this._progress_cb.index=i;var s=setInterval(()=>(this._progress_cb.index=i,this._progress_cb.done?clearInterval(s):i>=r?(this._progress_cb.cb("timeout",i),this._progress_cb.done=!0,clearInterval(s)):(this._progress_cb.cb("in_progress",i),void(i+=e))),e);return this}},{key:"resolve",value:function resolve(t){var e=SimpleQ._resolve;return e instanceof Function?(e(t),v(this._progress_cb.cb)&&!this._progress_cb.done&&(this._progress_cb.cb("resolved",this._progress_cb.index),this._progress_cb.done=!0)):b("[SimpleQ][resolve]","not callable"),this}},{key:"reject",value:function reject(t){var e=SimpleQ._reject;return e instanceof Function?(e(t),v(this._progress_cb.cb)&&!this._progress_cb.done&&(this._progress_cb.cb("rejected",this._progress_cb.index),this._progress_cb.done=!0)):b("[SimpleQ][reject]","not callable"),this}},{key:"promise",get:function get(){var t=SimpleQ._promise;return t instanceof Promise?t:void 0}}]),SimpleQ}(_wrapNativeSuper(Promise))),e=t._promise=new t((e,r)=>{t._resolve=e,t._reject=r});if(e.__proto__.entity="SimpleQ",e instanceof Promise&&e instanceof t)return e;throw"sq() not a valid Promise ?"},e.validID=function validID(t){return void 0===t&&(t=""),t?(t||"").toString().toLowerCase().replace(/\s/g,""):""},e.isBigInt=isBigInt,e.isNumber=isNumber,e.stringSize=j,e.cancelPromise=t=>{var{defer:e,checkEvery:r=500,maxWait:i=9500,cbErr:s=(t=>{var{error:e,defer:r,id:i}=t}),message:o="taken too long to respond",logging:n=!1,id:a}=t;if(!isPromise(e)&&!P(e)||"function"!=typeof s||!i)return b("[cancelPromise]","{defer,maxWait,cbErr} must be provided"),Promise.reject("{defer,maxWait,cbErr} must be provided");var c,u=r||500;i=i||1;var l=0,h=setInterval(()=>{if(c)return clearInterval(h);if(l>i){var t={error:o+", time: "+l,defer:e,id:a};try{s.apply(t,[t]),e.reject(o+", time: "+l)}catch(t){b("[cancelPromise]",t)}return clearInterval(h)}n&&(a?f("-- processing: ",a):g("-- processing ")),l=u+l},u),deffer=t=>t.then(t=>(c=!0,t),t=>(c=!0,Promise.reject(t)));return isSQ(e)||isPromise(e)&&!P(e)?deffer(e):P(e)?deffer(e.promise):Promise.reject("[cancelPromise], Supplied {defer} is not a promise")},e.shuffle=function shuffle(t){var e=Math.floor;if(void 0===t&&(t=[]),!m(t))return[];for(var r=t.length-1;0<r;r--){var i=e(Math.random()*r),s=t[r];t[r]=t[i],t[i]=s}return t},e.selectiveArray=function selectiveArray(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=[]),!m(e))return[];if(!e.length)return[];if(!m(t))return e;if(!t.length)return e;t=x(t);for(var r,i=[],s=function findNest(t,e,r){var i;if(void 0===r&&(r=0),t&&m(t)&&t.length){try{if(void 0!==e[t[r]])return i=e[t[r]],t[++r]?findNest(t,i,r):i}catch(t){console.log(t.toString())}return i}},o=0;o<e.length;o++)if(r=e[o],w(r)){for(var n,a=void 0,c=[],u=0;u<t.length;u++){n=(t[u]||"").split(".");try{a=s(n,r,0),c.push(a)}catch(t){}}t.length===c.length&&c.filter(t=>void 0===t).length===t.length&&(c=c.filter(t=>!!t)),c.length?i.push([].concat(c)):void 0!==a&&i.push(a)}else i.push([r]);return i},e.hasPrototype=O,e.hasProto=function hasProto(t,e){if(void 0===e&&(e=void 0),v(e)&&!d(e))return!1;try{return void 0!==t.__proto__}catch(t){return!1}},e.objectSize=I,e.isString=T,e.isFunction=v,e.copyBy=function copyBy(t,e){if(void 0===t&&(t={}),void 0===e&&(e=[]),!w(t))return{};var r=[].concat(e).reduce((e,r)=>(void 0!==t[r]&&(e[r]=t[r]),e),{});try{return JSON.parse(JSON.stringify(r))}catch(t){return{}}},e.copyDeep=t=>{if(m(t))return t.map(t=>copy(t));if(w(t))return Object.entries(t).reduce((t,e)=>{var[r,i]=e;return t[r]=w(i)?Object.assign({},copy(i)):i,t},{});try{return JSON.parse(JSON.stringify(t))}catch(e){return k(t).primitiveValue}},e.delay=function delay(t){return void 0===t&&(t=0),"number"==typeof t&&0<=t?new Promise(e=>{var r=setTimeout(()=>{clearTimeout(r),e(!0)},t)}):Promise.resolve(!0)},e.someKeyMatch=function someKeyMatch(t,e,r){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===r&&(r=void 0),v(r)&&!d(r))return!1;if(!t||Object.prototype!==t.__proto__)return!1;if(!e||Object.prototype!==e.__proto__)return!1;var i=Object.keys(t),s=Object.keys(e);return i.length>=s.length?0<i.filter(t=>s.filter(e=>e===t).length).length:0<s.filter(t=>i.filter(e=>e===t).length).length},e.exactKeyMatch=function exactKeyMatch(t,e,r){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===r&&(r=void 0),v(r)&&!d(r))return!1;if(!t||Object.prototype!==t.__proto__)return!1;if(!e||Object.prototype!==e.__proto__)return!1;var i=Object.keys(t),s=Object.keys(e);return i.length>=s.length?i.filter(t=>s.filter(e=>e===t).length).length===i.length:s.filter(t=>i.filter(e=>e===t).length).length===s.length},e.trueVal=function trueVal(t){return void 0===t&&(t=[]),t&&Array.prototype===t.__proto__?[].concat(t).filter(t=>!0!==$(t)):[]},e.trueValDeep=function trueValDeep(t){return void 0===t&&(t=[]),t&&Array.prototype===t.__proto__&&t.length?[].concat(t).map(t=>{var e=k(t,!1);return"array"===e.type&&0<e.value?t.map(t=>0<k(t,!1).value?t:null).filter(t=>!!t):"object"===e.type&&e.value?Object.entries(t).reduce((t,e)=>{var[r,i]=e;return 0<k(r,!1).value&&(t[r]=i),t},{}):0<e.value?t:null}).filter(t=>!!t):[]},e.trueProp=function trueProp(t){return void 0===t&&(t={}),t&&Object.prototype===t.__proto__?Object.entries(t).reduce((t,e)=>{var[r,i]=e;return $(i)||(t[r]=i),t},{}):{}},e.resolver=function resolver(t,e,r){return void 0===t&&(t=()=>{}),void 0===e&&(e=5e3),void 0===r&&(r=50),"function"==typeof t?new Promise(i=>{var s,o=r||50,n=e,a=0,c=(s=_asyncToGenerator((function*(){try{return yield t()}catch(t){return isError(t)?{error:t}:w(t)&&t.error?t:{error:t}}})),function test(){return s.apply(this,arguments)}),u=setInterval(_asyncToGenerator((function*(){var t=c();if(t.catch(t=>t),a>=n)return(t||{}).resolve&&t.resolve(void 0),i(void 0),clearInterval(u);a+=o;try{a+=o;var e=yield t;if(e)return i(e),clearInterval(u)}catch(t){return isError(t)&&i(t),w(t)&&t.error?i(t):i({error:t}),clearInterval(u)}})),o)}):Promise.reject("fn() must be callable")},e.flatten=function flatten(t){return void 0===t&&(t=[]),m(t)?[].concat(...t):[]},e.flattenDeep=function flattenDeep(t){void 0===t&&(t=[]);var e=[];if(!m(t))return e;try{return(e=function test(t,e){return void 0===e&&(e=1),0<e?t.reduce((t,r)=>t.concat(Array.isArray(r)?test(r,e-1):r),[]):t.slice()}(t,1/0)||[])instanceof Array?e:[]}catch(t){return[]}},e.chunks=function chunks(t,e){var r=Math.ceil;return void 0===t&&(t=[]),void 0===e&&(e=0),Array.from({length:r(t.length/e)},(r,i)=>t.slice(i*e,i*e+e))},e.dupes=function dupes(t,e){void 0===e&&(e=0);for(var r=[],i=parseInt(e);0<i;)i--,r.push(t);return r},e.uniqBy=function uniqBy(t,e){void 0===t&&(t=[]),void 0===e&&(e="");var r={},i=[];if(!e)return[];if(!(t||[]).length)return[];for(var s=function _loop(s){var o=t[s];return isUndefined(o)||isNull(o)?(i.push(o),"continue"):w(o)?void 0===o[e]?(i.push(o),"continue"):Object.entries(r).filter(t=>{var[i]=t;return o[e]===r[i]}).length?"continue":void(o[e]!==r[e+":"+s]&&(r[e+":"+s]=o[e],i.push(o))):(i.push(o),"continue")},o=0;o<t.length;o++)s(o);return i},e.arrayWith=function arrayWith(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=""),!m(t))return[];try{var r=t.map(t=>(t=>w(t)?-1===Object.keys(t).indexOf(e)?void 0:t:void 0)(t)).filter(t=>!!t);return r instanceof Array?r:[]}catch(t){return[]}},e.exFromArray=function exFromArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]);try{if(!(t instanceof Array))return[]}catch(t){return[]}if(!(e=[].concat(e)).length)return t;try{var r=t.map(t=>function excludeFrom(t,e){if(void 0===t&&(t={}),void 0===e&&(e=[]),!w(t))return t;var r=Object.entries(t).reduce((t,r)=>{var[i,s]=r;return-1===e.indexOf(i)&&(t[i]=s),t},{});return $(r)?void 0:r}(t,e));return r instanceof Array?r:[]}catch(t){return[]}},e.copy=copy,e.uniq=x,e.isPromise=isPromise,e.isQPromise=P,e.debug=function debug(){if(loggingON()&&"off"!==h("debug")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return p("debug",e)}},e.log=f,e.warn=_,e.onerror=b,e.error=y,e.alert=g,e.attention=function attention(){if(loggingON()&&"off"!==h("attention")){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return p("attention",e)}},e.isObject=w,e.isFalsy=$,e.isError=isError,e.typeCheck=k,e.validDate=function validDate(t,e){if(void 0===e&&(e=void 0),v(e)&&!d(e))return!1;try{return t.__proto__===Date.prototype&&"Invalid Date"!==t.toString()}catch(t){return!1}},e.isInstance=C,e.isClass=O,e.isArray=m,e.arraySize=function arraySize(t){void 0===t&&(t=void 0);var e=0;return m(t)?e=t.length:e},e.pickFromArray=function pickFromArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]);var r=[];try{if(!(t instanceof Array))return r}catch(t){return[]}if(m(e)||(e=[].concat(e)),!e.length)return t;var i=[void 0,null,!1];if(!(e=e.filter(t=>!$(t)||i.filter(e=>e===t||(isNumber(t)&&!isNaN(t)).length))).length)return t;var isInstanceByName=(t,e)=>{if(m(t)&&v(e)){if("object"===e.name.toLowerCase())return!1;if("array"===e.name.toLowerCase())return!0}if(w(t)&&v(e)){if("array"===e.name.toLowerCase())return!1;if("object"===e.name.toLowerCase())return!0}try{return(e.name||"").toLowerCase()===typeof t}catch(t){}};try{return(r=t.reduce((t,r)=>((t=>{for(var r,i,s=0;s<e.length;s++){if(i=e[s],w(i)&&w(t)){var o=Object.entries(i),n=o.filter(e=>{var[r,i]=e;return!(t[r]!==i)||(void 0===t[r]?void 0:isInstanceByName(t[r],i))});if((n=n.length===o.length&&Object.entries(t).length>=n.length)&&I(t)>=I(i)){r=!0;break}}if(m(i)&&m(t)){var a=i.filter(e=>t.filter(t=>t===e||isInstanceByName(t,e)).length);if(a=a.length===i.length&&t.length>=a.length){r=!0;break}}else{if(i===t){r=!0;break}if(isNumber(t)||isBoolean(t)||T(t)||m(t)||w(t)||v(t)){if(isInstanceByName(t,i)){r=!0;break}}else if(isInstanceByName(t,i)){r=!0;break}}}return r})(r)&&t.push(r),t),[]))instanceof Array?r:[]}catch(t){return[]}},e.dispatcher=function dispatcher(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),new Dispatcher(t,e)},e.isSQ=isSQ,e.withHoc=function withHoc(t){void 0===t&&(t=()=>{});for(var e=arguments.length,r=Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var s=r,o=function hoc(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];var argsFN=()=>s?[].concat(r,s):r;if(t instanceof Function)try{return t(...argsFN())}catch(t){b("[HOC]",t)}else{if(isPromise(t))return(t.promise?t.promise:t).then(t=>v(t)?t(...argsFN()):Promise.reject("DEFERRED_NOT_CALLABLE"),t=>v(t)?Promise.reject(t(...argsFN())):Promise.reject("DEFERRED_NOT_CALLABLE"));b("[HOC]","item() must be callable function")}};return o},e.isDate=t=>{try{return t instanceof Date}catch(t){return!1}},e.xrequire=function xrequire(e,r,i){if(void 0===e&&(e=""),void 0===r&&(r=""),!isWindow()){var s=function Mod(){};return(s.prototype=Object.create(t.constructor.prototype)).constructor=t.constructor,s.prototype.require=function(t,e){try{var i=0!==t.indexOf("./")&&0!==t.indexOf("."),s=t;if(!r&&"ERR_NO_THROW"===e&&!i)return;if(!r&&"ERR_NO_THROW"!==e&&!i)throw N({name:"xrequire",message:"xrequire needs your __dirname to correctly map the path to require script"});if(!i){var o=r.replace(/\\/g,"/");-1===t.indexOf("..")&&-1!==t.indexOf("./")&&(t=t.replace("./","")),s=o+"/"+t}return this.constructor._load(s,this)}catch(t){if("xrequire"===t.name)throw t.message;if("ERR_NO_THROW"===e)return;if("MODULE_NOT_FOUND"===t.code)throw t.stack}},s.prototype instanceof t.constructor?s.prototype.require(e,i):void 0}},e.asJson=t=>{try{return JSON.stringify(t,null,2)}catch(t){return"[asJson], "+t.toString()}},e.truthFul=function truthFul(t){return void 0===t&&(t={}),w(t)?Object.entries(t).reduce((t,e)=>{var[r,i]=e;return void 0!==i&&(t[r]=i),t},{}):{}},e.inIndex=function inIndex(t,e){void 0===t&&(t="");var r=0;return m(e)&&e.length?"string"!=typeof t?r:t?r=e.filter((e,r)=>((t,e,r)=>{try{return new RegExp(t).test(e)}catch(t){return b("[inIndex]","wrong pattern/expression at index:"+r),!1}})(e,t,r)).length:r:r},e.isRegExp=S,e.matched=function matched(t,e){void 0===t&&(t=""),void 0===e&&(e=/\\/);var r=!1;return T(t)&&S(e)?"string"!=typeof t?r:t?r=((t,e)=>{try{return new RegExp(t).test(e)}catch(t){return b("[matched]",t.toString()),!1}})(e,t):r:r},e.referenceError=N,e.xError=function xError(t){return void 0===t&&(t={name:"XError",id:void 0,message:void 0,fileName:void 0,lineNumber:void 0}),new E(t.name,t.id,t.message,t.fileName,t.lineNumber)},e.noop=()=>{},e.trim=t=>"string"==typeof t?t.replace(/(\r\n?|\n|\t)/g,"").trim().replace(/\s\s +/g," "):"",e.includes=(t,e)=>!!m(e)&&0<e.filter(e=>t===e).length,e.unsubscribe=(t,e)=>{if(!(t||[]).length)return 0;var r=0;return t.forEach(t=>{try{void 0!==t.unsubscribe&&(t.unsubscribe(),r++)}catch(t){}}),t.splice(0,t.length),r&&f("unsub "+(e?"from:"+e:"")+" index: "+r),r},e.objectIterateWith=(t,e)=>spread(t,e),e.spread=spread,e.spreadWith=(t,e)=>{if(!(t||[]).length)return[];if(!(e||[]).length)return[];for(var r,i=[],s=0;s<e.length;s++)"number"==typeof(r=e[s])&&void 0!==t[r]&&i.push(t[r]);return i}},o=[t,e],void 0===(n="function"==typeof(s=a)?s.apply(e,o):s)||(t.exports=n)}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/process/browser.js"))}})}));